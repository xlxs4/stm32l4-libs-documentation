<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32L4xx_HAL_Driver: Input and Output operation functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32L4xx_HAL_Driver
   &#160;<span id="projectnumber">1.14.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__I2C__Exported__Functions__Group2.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Input and Output operation functions<div class="ingroups"><a class="el" href="group__STM32L4xx__HAL__Driver.html">STM32L4xx_HAL_Driver</a> &raquo; <a class="el" href="group__I2C.html">I2C</a> &raquo; <a class="el" href="group__I2C__Exported__Functions.html">I2C Exported Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Data transfers functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9440a306e25c7bd038cfa8619ec9a830"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga9440a306e25c7bd038cfa8619ec9a830">HAL_I2C_Master_Transmit</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size, uint32_t Timeout)</td></tr>
<tr class="memdesc:ga9440a306e25c7bd038cfa8619ec9a830"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmits in master mode an amount of data in blocking mode.  <a href="group__I2C__Exported__Functions__Group2.html#ga9440a306e25c7bd038cfa8619ec9a830">More...</a><br /></td></tr>
<tr class="separator:ga9440a306e25c7bd038cfa8619ec9a830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6b3cef8c309e88ed6d3b8deba149aac9"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga6b3cef8c309e88ed6d3b8deba149aac9">HAL_I2C_Master_Receive</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size, uint32_t Timeout)</td></tr>
<tr class="memdesc:ga6b3cef8c309e88ed6d3b8deba149aac9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives in master mode an amount of data in blocking mode.  <a href="group__I2C__Exported__Functions__Group2.html#ga6b3cef8c309e88ed6d3b8deba149aac9">More...</a><br /></td></tr>
<tr class="separator:ga6b3cef8c309e88ed6d3b8deba149aac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9128c5f01406d0da061a2bce00b6866e"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga9128c5f01406d0da061a2bce00b6866e">HAL_I2C_Slave_Transmit</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint8_t *pData, uint16_t Size, uint32_t Timeout)</td></tr>
<tr class="memdesc:ga9128c5f01406d0da061a2bce00b6866e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmits in slave mode an amount of data in blocking mode.  <a href="group__I2C__Exported__Functions__Group2.html#ga9128c5f01406d0da061a2bce00b6866e">More...</a><br /></td></tr>
<tr class="separator:ga9128c5f01406d0da061a2bce00b6866e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92b445a5ca4f5b8195f1c10ebdc41687"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga92b445a5ca4f5b8195f1c10ebdc41687">HAL_I2C_Slave_Receive</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint8_t *pData, uint16_t Size, uint32_t Timeout)</td></tr>
<tr class="memdesc:ga92b445a5ca4f5b8195f1c10ebdc41687"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive in slave mode an amount of data in blocking mode.  <a href="group__I2C__Exported__Functions__Group2.html#ga92b445a5ca4f5b8195f1c10ebdc41687">More...</a><br /></td></tr>
<tr class="separator:ga92b445a5ca4f5b8195f1c10ebdc41687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33e725a824eb672f9f999d9d5ce088fb"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga33e725a824eb672f9f999d9d5ce088fb">HAL_I2C_Mem_Write</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint16_t MemAddress, uint16_t MemAddSize, uint8_t *pData, uint16_t Size, uint32_t Timeout)</td></tr>
<tr class="memdesc:ga33e725a824eb672f9f999d9d5ce088fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write an amount of data in blocking mode to a specific memory address.  <a href="group__I2C__Exported__Functions__Group2.html#ga33e725a824eb672f9f999d9d5ce088fb">More...</a><br /></td></tr>
<tr class="separator:ga33e725a824eb672f9f999d9d5ce088fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b593a1b85bd989dd002ee209eae4ad2"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga7b593a1b85bd989dd002ee209eae4ad2">HAL_I2C_Mem_Read</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint16_t MemAddress, uint16_t MemAddSize, uint8_t *pData, uint16_t Size, uint32_t Timeout)</td></tr>
<tr class="memdesc:ga7b593a1b85bd989dd002ee209eae4ad2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an amount of data in blocking mode from a specific memory address.  <a href="group__I2C__Exported__Functions__Group2.html#ga7b593a1b85bd989dd002ee209eae4ad2">More...</a><br /></td></tr>
<tr class="separator:ga7b593a1b85bd989dd002ee209eae4ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade6a669a25f0e99ef7fd52724acb3dec"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#gade6a669a25f0e99ef7fd52724acb3dec">HAL_I2C_IsDeviceReady</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint32_t Trials, uint32_t Timeout)</td></tr>
<tr class="memdesc:gade6a669a25f0e99ef7fd52724acb3dec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if target device is ready for communication.  <a href="group__I2C__Exported__Functions__Group2.html#gade6a669a25f0e99ef7fd52724acb3dec">More...</a><br /></td></tr>
<tr class="separator:gade6a669a25f0e99ef7fd52724acb3dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48b84e0cff0e44d10e10bf9cc5a6726d"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga48b84e0cff0e44d10e10bf9cc5a6726d">HAL_I2C_Master_Transmit_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:ga48b84e0cff0e44d10e10bf9cc5a6726d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit in master mode an amount of data in non-blocking mode with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#ga48b84e0cff0e44d10e10bf9cc5a6726d">More...</a><br /></td></tr>
<tr class="separator:ga48b84e0cff0e44d10e10bf9cc5a6726d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2aebdb302ffc0a4dff28dc2c8b59e1e9"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga2aebdb302ffc0a4dff28dc2c8b59e1e9">HAL_I2C_Master_Receive_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:ga2aebdb302ffc0a4dff28dc2c8b59e1e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive in master mode an amount of data in non-blocking mode with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#ga2aebdb302ffc0a4dff28dc2c8b59e1e9">More...</a><br /></td></tr>
<tr class="separator:ga2aebdb302ffc0a4dff28dc2c8b59e1e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb5814408402b2e9d07c0b414e64fc9d"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#gabb5814408402b2e9d07c0b414e64fc9d">HAL_I2C_Slave_Transmit_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:gabb5814408402b2e9d07c0b414e64fc9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit in slave mode an amount of data in non-blocking mode with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#gabb5814408402b2e9d07c0b414e64fc9d">More...</a><br /></td></tr>
<tr class="separator:gabb5814408402b2e9d07c0b414e64fc9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48113a4abed4b32ac19da51babb530eb"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga48113a4abed4b32ac19da51babb530eb">HAL_I2C_Slave_Receive_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:ga48113a4abed4b32ac19da51babb530eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive in slave mode an amount of data in non-blocking mode with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#ga48113a4abed4b32ac19da51babb530eb">More...</a><br /></td></tr>
<tr class="separator:ga48113a4abed4b32ac19da51babb530eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab57ffc32b01392d8bcce3c7ec32b3120"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#gab57ffc32b01392d8bcce3c7ec32b3120">HAL_I2C_Mem_Write_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint16_t MemAddress, uint16_t MemAddSize, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:gab57ffc32b01392d8bcce3c7ec32b3120"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write an amount of data in non-blocking mode with Interrupt to a specific memory address.  <a href="group__I2C__Exported__Functions__Group2.html#gab57ffc32b01392d8bcce3c7ec32b3120">More...</a><br /></td></tr>
<tr class="separator:gab57ffc32b01392d8bcce3c7ec32b3120"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2274a9d894a1dc783bc647f937200f65"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga2274a9d894a1dc783bc647f937200f65">HAL_I2C_Mem_Read_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint16_t MemAddress, uint16_t MemAddSize, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:ga2274a9d894a1dc783bc647f937200f65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an amount of data in non-blocking mode with Interrupt from a specific memory address.  <a href="group__I2C__Exported__Functions__Group2.html#ga2274a9d894a1dc783bc647f937200f65">More...</a><br /></td></tr>
<tr class="separator:ga2274a9d894a1dc783bc647f937200f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a55d04a460664f6b2039b2a7b56a9de"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga6a55d04a460664f6b2039b2a7b56a9de">HAL_I2C_Master_Seq_Transmit_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size, uint32_t XferOptions)</td></tr>
<tr class="memdesc:ga6a55d04a460664f6b2039b2a7b56a9de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sequential transmit in master I2C mode an amount of data in non-blocking mode with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#ga6a55d04a460664f6b2039b2a7b56a9de">More...</a><br /></td></tr>
<tr class="separator:ga6a55d04a460664f6b2039b2a7b56a9de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0caa34de50971b2bd5b953ee12af94f1"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga0caa34de50971b2bd5b953ee12af94f1">HAL_I2C_Master_Seq_Receive_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size, uint32_t XferOptions)</td></tr>
<tr class="memdesc:ga0caa34de50971b2bd5b953ee12af94f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sequential receive in master I2C mode an amount of data in non-blocking mode with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#ga0caa34de50971b2bd5b953ee12af94f1">More...</a><br /></td></tr>
<tr class="separator:ga0caa34de50971b2bd5b953ee12af94f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d4024eb28117e0836c2477a855d7531"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga6d4024eb28117e0836c2477a855d7531">HAL_I2C_Slave_Seq_Transmit_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint8_t *pData, uint16_t Size, uint32_t XferOptions)</td></tr>
<tr class="memdesc:ga6d4024eb28117e0836c2477a855d7531"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sequential transmit in slave/device I2C mode an amount of data in non-blocking mode with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#ga6d4024eb28117e0836c2477a855d7531">More...</a><br /></td></tr>
<tr class="separator:ga6d4024eb28117e0836c2477a855d7531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e782a3b10d12e4368eb489ad728e735"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga1e782a3b10d12e4368eb489ad728e735">HAL_I2C_Slave_Seq_Receive_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint8_t *pData, uint16_t Size, uint32_t XferOptions)</td></tr>
<tr class="memdesc:ga1e782a3b10d12e4368eb489ad728e735"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sequential receive in slave/device I2C mode an amount of data in non-blocking mode with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#ga1e782a3b10d12e4368eb489ad728e735">More...</a><br /></td></tr>
<tr class="separator:ga1e782a3b10d12e4368eb489ad728e735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad8c3b67e4430bc8def0c885af769f3ab"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#gad8c3b67e4430bc8def0c885af769f3ab">HAL_I2C_EnableListen_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c)</td></tr>
<tr class="memdesc:gad8c3b67e4430bc8def0c885af769f3ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the Address listen mode with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#gad8c3b67e4430bc8def0c885af769f3ab">More...</a><br /></td></tr>
<tr class="separator:gad8c3b67e4430bc8def0c885af769f3ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd49a2b08bc6e30989c420a9c679b65e"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#gafd49a2b08bc6e30989c420a9c679b65e">HAL_I2C_DisableListen_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c)</td></tr>
<tr class="memdesc:gafd49a2b08bc6e30989c420a9c679b65e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the Address listen mode with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#gafd49a2b08bc6e30989c420a9c679b65e">More...</a><br /></td></tr>
<tr class="separator:gafd49a2b08bc6e30989c420a9c679b65e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad001e42b424fc0d85a8e94380b9c7513"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#gad001e42b424fc0d85a8e94380b9c7513">HAL_I2C_Master_Abort_IT</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress)</td></tr>
<tr class="memdesc:gad001e42b424fc0d85a8e94380b9c7513"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort a master I2C IT or DMA process communication with Interrupt.  <a href="group__I2C__Exported__Functions__Group2.html#gad001e42b424fc0d85a8e94380b9c7513">More...</a><br /></td></tr>
<tr class="separator:gad001e42b424fc0d85a8e94380b9c7513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga978126d41a3a67384f4cb2fe3e6e7e8f"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga978126d41a3a67384f4cb2fe3e6e7e8f">HAL_I2C_Master_Transmit_DMA</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:ga978126d41a3a67384f4cb2fe3e6e7e8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit in master mode an amount of data in non-blocking mode with DMA.  <a href="group__I2C__Exported__Functions__Group2.html#ga978126d41a3a67384f4cb2fe3e6e7e8f">More...</a><br /></td></tr>
<tr class="separator:ga978126d41a3a67384f4cb2fe3e6e7e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga299f5e16a92826b9856c60265bc22cf2"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga299f5e16a92826b9856c60265bc22cf2">HAL_I2C_Master_Receive_DMA</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:ga299f5e16a92826b9856c60265bc22cf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive in master mode an amount of data in non-blocking mode with DMA.  <a href="group__I2C__Exported__Functions__Group2.html#ga299f5e16a92826b9856c60265bc22cf2">More...</a><br /></td></tr>
<tr class="separator:ga299f5e16a92826b9856c60265bc22cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59e69e0da57150f980deea0d235f0397"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga59e69e0da57150f980deea0d235f0397">HAL_I2C_Slave_Transmit_DMA</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:ga59e69e0da57150f980deea0d235f0397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit in slave mode an amount of data in non-blocking mode with DMA.  <a href="group__I2C__Exported__Functions__Group2.html#ga59e69e0da57150f980deea0d235f0397">More...</a><br /></td></tr>
<tr class="separator:ga59e69e0da57150f980deea0d235f0397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad9dd42a10e5c108e30e6546cb64639c2"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#gad9dd42a10e5c108e30e6546cb64639c2">HAL_I2C_Slave_Receive_DMA</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:gad9dd42a10e5c108e30e6546cb64639c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive in slave mode an amount of data in non-blocking mode with DMA.  <a href="group__I2C__Exported__Functions__Group2.html#gad9dd42a10e5c108e30e6546cb64639c2">More...</a><br /></td></tr>
<tr class="separator:gad9dd42a10e5c108e30e6546cb64639c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12a2a86be393359534f630cdd090d8bb"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga12a2a86be393359534f630cdd090d8bb">HAL_I2C_Mem_Write_DMA</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint16_t MemAddress, uint16_t MemAddSize, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:ga12a2a86be393359534f630cdd090d8bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write an amount of data in non-blocking mode with DMA to a specific memory address.  <a href="group__I2C__Exported__Functions__Group2.html#ga12a2a86be393359534f630cdd090d8bb">More...</a><br /></td></tr>
<tr class="separator:ga12a2a86be393359534f630cdd090d8bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab25b99552182d2486d8eb441fffdd0a4"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#gab25b99552182d2486d8eb441fffdd0a4">HAL_I2C_Mem_Read_DMA</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint16_t MemAddress, uint16_t MemAddSize, uint8_t *pData, uint16_t Size)</td></tr>
<tr class="memdesc:gab25b99552182d2486d8eb441fffdd0a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an amount of data in non-blocking mode with DMA from a specific memory address.  <a href="group__I2C__Exported__Functions__Group2.html#gab25b99552182d2486d8eb441fffdd0a4">More...</a><br /></td></tr>
<tr class="separator:gab25b99552182d2486d8eb441fffdd0a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace04b5c76cbe9b8f2293199df5cbebe7"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#gace04b5c76cbe9b8f2293199df5cbebe7">HAL_I2C_Master_Seq_Transmit_DMA</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size, uint32_t XferOptions)</td></tr>
<tr class="memdesc:gace04b5c76cbe9b8f2293199df5cbebe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sequential transmit in master I2C mode an amount of data in non-blocking mode with DMA.  <a href="group__I2C__Exported__Functions__Group2.html#gace04b5c76cbe9b8f2293199df5cbebe7">More...</a><br /></td></tr>
<tr class="separator:gace04b5c76cbe9b8f2293199df5cbebe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83c1c311ce7822081cfca9aeef9ad632"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga83c1c311ce7822081cfca9aeef9ad632">HAL_I2C_Master_Seq_Receive_DMA</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint16_t DevAddress, uint8_t *pData, uint16_t Size, uint32_t XferOptions)</td></tr>
<tr class="memdesc:ga83c1c311ce7822081cfca9aeef9ad632"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sequential receive in master I2C mode an amount of data in non-blocking mode with DMA.  <a href="group__I2C__Exported__Functions__Group2.html#ga83c1c311ce7822081cfca9aeef9ad632">More...</a><br /></td></tr>
<tr class="separator:ga83c1c311ce7822081cfca9aeef9ad632"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga105b8f6d6d7310e2d9bc170e8ed412ae"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#ga105b8f6d6d7310e2d9bc170e8ed412ae">HAL_I2C_Slave_Seq_Transmit_DMA</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint8_t *pData, uint16_t Size, uint32_t XferOptions)</td></tr>
<tr class="memdesc:ga105b8f6d6d7310e2d9bc170e8ed412ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sequential transmit in slave/device I2C mode an amount of data in non-blocking mode with DMA.  <a href="group__I2C__Exported__Functions__Group2.html#ga105b8f6d6d7310e2d9bc170e8ed412ae">More...</a><br /></td></tr>
<tr class="separator:ga105b8f6d6d7310e2d9bc170e8ed412ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb0f79e15c8dab0d370b3fb48ca592b7"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2C__Exported__Functions__Group2.html#gaeb0f79e15c8dab0d370b3fb48ca592b7">HAL_I2C_Slave_Seq_Receive_DMA</a> (<a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *hi2c, uint8_t *pData, uint16_t Size, uint32_t XferOptions)</td></tr>
<tr class="memdesc:gaeb0f79e15c8dab0d370b3fb48ca592b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sequential receive in slave/device I2C mode an amount of data in non-blocking mode with DMA.  <a href="group__I2C__Exported__Functions__Group2.html#gaeb0f79e15c8dab0d370b3fb48ca592b7">More...</a><br /></td></tr>
<tr class="separator:gaeb0f79e15c8dab0d370b3fb48ca592b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Data transfers functions. </p>
<pre class="fragment"> ===============================================================================
                      ##### IO operation functions #####
 ===============================================================================
    [..]
    This subsection provides a set of functions allowing to manage the I2C data
    transfers.

    (#) There are two modes of transfer:
       (++) Blocking mode : The communication is performed in the polling mode.
            The status of all data processing is returned by the same function
            after finishing transfer.
       (++) No-Blocking mode : The communication is performed using Interrupts
            or DMA. These functions return the status of the transfer startup.
            The end of the data processing will be indicated through the
            dedicated I2C IRQ when using Interrupt mode or the DMA IRQ when
            using DMA mode.

    (#) Blocking mode functions are :
        (++) HAL_I2C_Master_Transmit()
        (++) HAL_I2C_Master_Receive()
        (++) HAL_I2C_Slave_Transmit()
        (++) HAL_I2C_Slave_Receive()
        (++) HAL_I2C_Mem_Write()
        (++) HAL_I2C_Mem_Read()
        (++) HAL_I2C_IsDeviceReady()

    (#) No-Blocking mode functions with Interrupt are :
        (++) HAL_I2C_Master_Transmit_IT()
        (++) HAL_I2C_Master_Receive_IT()
        (++) HAL_I2C_Slave_Transmit_IT()
        (++) HAL_I2C_Slave_Receive_IT()
        (++) HAL_I2C_Mem_Write_IT()
        (++) HAL_I2C_Mem_Read_IT()
        (++) HAL_I2C_Master_Seq_Transmit_IT()
        (++) HAL_I2C_Master_Seq_Receive_IT()
        (++) HAL_I2C_Slave_Seq_Transmit_IT()
        (++) HAL_I2C_Slave_Seq_Receive_IT()
        (++) HAL_I2C_EnableListen_IT()
        (++) HAL_I2C_DisableListen_IT()
        (++) HAL_I2C_Master_Abort_IT()

    (#) No-Blocking mode functions with DMA are :
        (++) HAL_I2C_Master_Transmit_DMA()
        (++) HAL_I2C_Master_Receive_DMA()
        (++) HAL_I2C_Slave_Transmit_DMA()
        (++) HAL_I2C_Slave_Receive_DMA()
        (++) HAL_I2C_Mem_Write_DMA()
        (++) HAL_I2C_Mem_Read_DMA()
        (++) HAL_I2C_Master_Seq_Transmit_DMA()
        (++) HAL_I2C_Master_Seq_Receive_DMA()
        (++) HAL_I2C_Slave_Seq_Transmit_DMA()
        (++) HAL_I2C_Slave_Seq_Receive_DMA()

    (#) A set of Transfer Complete Callbacks are provided in non Blocking mode:
        (++) HAL_I2C_MasterTxCpltCallback()
        (++) HAL_I2C_MasterRxCpltCallback()
        (++) HAL_I2C_SlaveTxCpltCallback()
        (++) HAL_I2C_SlaveRxCpltCallback()
        (++) HAL_I2C_MemTxCpltCallback()
        (++) HAL_I2C_MemRxCpltCallback()
        (++) HAL_I2C_AddrCallback()
        (++) HAL_I2C_ListenCpltCallback()
        (++) HAL_I2C_ErrorCallback()
        (++) HAL_I2C_AbortCpltCallback()</pre> <h2 class="groupheader">Function Documentation</h2>
<a id="gafd49a2b08bc6e30989c420a9c679b65e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd49a2b08bc6e30989c420a9c679b65e">&#9670;&nbsp;</a></span>HAL_I2C_DisableListen_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_DisableListen_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the Address listen mode with Interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l04214">4214</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;{</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;  <span class="comment">/* Declaration of tmp to prevent undefined behavior of volatile usage */</span></div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;  uint32_t tmp;</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160; </div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;  <span class="comment">/* Disable Address listen mode only if a transfer is not ongoing */</span></div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>)</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;  {</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;    tmp = (uint32_t)(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>) &amp; I2C_STATE_MSK;</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a028d3e824c01ccc6c9a23bb5802e3313">PreviousState</a> = tmp | (uint32_t)(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>);</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a> = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a> = NULL;</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160; </div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;    <span class="comment">/* Disable the Address Match interrupt */</span></div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_LISTEN_IT);</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160; </div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;  }</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;  {</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;  }</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gad8c3b67e4430bc8def0c885af769f3ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad8c3b67e4430bc8def0c885af769f3ab">&#9670;&nbsp;</a></span>HAL_I2C_EnableListen_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_EnableListen_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable the Address listen mode with Interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l04190">4190</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;{</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;  {</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>;</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a> = <a class="code" href="group__I2C__Private__Functions.html#ga739b78fb8b3a7d1524dc0fb52b6069a5">I2C_Slave_ISR_IT</a>;</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160; </div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;    <span class="comment">/* Enable the Address Match interrupt */</span></div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_LISTEN_IT);</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160; </div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;  }</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;  {</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;  }</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gade6a669a25f0e99ef7fd52724acb3dec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gade6a669a25f0e99ef7fd52724acb3dec">&#9670;&nbsp;</a></span>HAL_I2C_IsDeviceReady()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_IsDeviceReady </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Trials</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if target device is ready for communication. </p>
<dl class="section note"><dt>Note</dt><dd>This function is used with Memory devices </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">Trials</td><td>Number of trials </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout duration </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l03014">3014</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;{</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160; </div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;  __IO uint32_t I2C_Trials = 0UL;</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160; </div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;  FlagStatus tmp1;</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  FlagStatus tmp2;</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160; </div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;  {</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_BUSY) == SET)</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;    {</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    }</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160; </div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160; </div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a0c503d6c0388f0d872b368557e278b5a">HAL_I2C_STATE_BUSY</a>;</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160; </div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    {</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;      <span class="comment">/* Generate Start */</span></div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 = I2C_GENERATE_START(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a8e665bc833889975a33b10bebeab5db2">Init</a>.<a class="code" href="group__I2C__Configuration__Structure__definition.html#a5c39c41a5ee892c1bce69a579cc017ca">AddressingMode</a>, DevAddress);</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160; </div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;      <span class="comment">/* No need to Check TC flag, with AUTOEND mode the stop is automatically generated */</span></div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;      <span class="comment">/* Wait until STOPF flag is set or a NACK flag is set*/</span></div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;      tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160; </div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;      tmp1 = __HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      tmp2 = __HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_AF);</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160; </div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;      <span class="keywordflow">while</span> ((tmp1 == RESET) &amp;&amp; (tmp2 == RESET))</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;      {</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;        <span class="keywordflow">if</span> (Timeout != HAL_MAX_DELAY)</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;        {</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;          <span class="keywordflow">if</span> (((<a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>() - tickstart) &gt; Timeout) || (Timeout == 0U))</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;          {</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;            <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;            hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160; </div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;            <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;            hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_TIMEOUT;</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160; </div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;            <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;            <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160; </div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;            <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;          }</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;        }</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160; </div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;        tmp1 = __HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;        tmp2 = __HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_AF);</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;      }</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160; </div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;      <span class="comment">/* Check if the NACKF flag has not been set */</span></div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;      <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_AF) == RESET)</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;      {</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;        <span class="comment">/* Wait until STOPF flag is reset */</span></div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_STOPF, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;        {</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;          <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;        }</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160; </div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;        <span class="comment">/* Clear STOP Flag */</span></div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;        __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160; </div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;        <span class="comment">/* Device is ready */</span></div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160; </div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160; </div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      }</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;      {</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;        <span class="comment">/* Wait until STOPF flag is reset */</span></div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_STOPF, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;        {</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;          <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;        }</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160; </div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;        <span class="comment">/* Clear NACK Flag */</span></div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;        __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_AF);</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160; </div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;        <span class="comment">/* Clear STOP Flag, auto generated with autoend*/</span></div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;        __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;      }</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160; </div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;      <span class="comment">/* Check if the maximum allowed number of trials has been reached */</span></div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;      <span class="keywordflow">if</span> (I2C_Trials == Trials)</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      {</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        <span class="comment">/* Generate Stop */</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_STOP;</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160; </div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;        <span class="comment">/* Wait until STOPF flag is reset */</span></div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_STOPF, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;        {</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;          <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        }</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160; </div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;        <span class="comment">/* Clear STOP Flag */</span></div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;      }</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160; </div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;      <span class="comment">/* Increment Trials */</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      I2C_Trials++;</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    }</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;    <span class="keywordflow">while</span> (I2C_Trials &lt; Trials);</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160; </div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160; </div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;    <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_TIMEOUT;</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160; </div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160; </div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;  }</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;  {</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;  }</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gad001e42b424fc0d85a8e94380b9c7513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad001e42b424fc0d85a8e94380b9c7513">&#9670;&nbsp;</a></span>HAL_I2C_Master_Abort_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Abort_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Abort a master I2C IT or DMA process communication with Interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l04247">4247</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;{</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a> == <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>)</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;  {</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160; </div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;    <span class="comment">/* Disable Interrupts */</span></div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_RX_IT);</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_TX_IT);</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160; </div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;    <span class="comment">/* Set State at HAL_I2C_STATE_ABORT */</span></div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a2c6f6d1fef0847f9da51153b5c295249">HAL_I2C_STATE_ABORT</a>;</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160; </div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;    <span class="comment">/* Set NBYTES to 1 to generate a dummy read on I2C peripheral */</span></div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;    <span class="comment">/* Set AUTOEND mode, this will generate a NACK then STOP condition to abort the current transfer */</span></div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, 1, I2C_AUTOEND_MODE, I2C_GENERATE_STOP);</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160; </div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160; </div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;<span class="comment">              to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;<span class="comment">              process unlock */</span></div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_CPLT_IT);</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160; </div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;  }</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;  {</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;    <span class="comment">/* Wrong usage of abort function */</span></div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;    <span class="comment">/* This function should be used only in case of abort monitored by master device */</span></div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;    <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;  }</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6b3cef8c309e88ed6d3b8deba149aac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6b3cef8c309e88ed6d3b8deba149aac9">&#9670;&nbsp;</a></span>HAL_I2C_Master_Receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives in master mode an amount of data in blocking mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout duration </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l01174">1174</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;{</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="comment">/* Init tickstart for timeout management*/</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_BUSY, SET, I2C_TIMEOUT_BUSY, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    }</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>  = pData;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> = Size;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>   = NULL;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE and generate RESTART */</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_RELOAD_MODE, I2C_GENERATE_START_READ);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_GENERATE_START_READ);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">while</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; 0U)</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="comment">/* Wait until RXNE flag is set */</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#gaf2e7d2762e4ee3d41a8a18cd7ee7dc4f">I2C_WaitOnRXNEFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="comment">/* Read data from RXDR */</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      *hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a> = (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;RXDR;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="comment">/* Increment Buffer pointer */</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>++;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>--;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>--;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <a class="code" href="group__LPUART__LL__EF__Configuration.html#ga3278356e8f771edc00843def4920f76c">if</a> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> != 0U) &amp;&amp; (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> == 0U))</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="comment">/* Wait until TCR flag is set */</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_TCR, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        {</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;          <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        }</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;          <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_RELOAD_MODE, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        }</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;          <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        }</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="comment">/* No need to Check TC flag, with AUTOEND mode the stop is automatically generated */</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="comment">/* Wait until STOPF flag is set */</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga783b1f588b859516225ec7067a235a5b">I2C_WaitOnSTOPFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">/* Clear STOP Flag */</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="comment">/* Clear Configuration Register 2 */</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    I2C_RESET_CR2(hi2c);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>  = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  }</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  }</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga299f5e16a92826b9856c60265bc22cf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga299f5e16a92826b9856c60265bc22cf2">&#9670;&nbsp;</a></span>HAL_I2C_Master_Receive_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Receive_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive in master mode an amount of data in non-blocking mode with DMA. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l01929">1929</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;{</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  HAL_StatusTypeDef dmaxferstatus;</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_BUSY) == SET)</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    }</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160; </div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160; </div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gabfdc904b76d58aaac9cb270b43b2b0bc">I2C_Master_ISR_DMA</a>;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    {</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    }</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    {</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      xfermode = I2C_AUTOEND_MODE;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    }</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> &gt; 0U)</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a> != NULL)</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      {</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        <span class="comment">/* Set the I2C DMA transfer complete callback */</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">XferCpltCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gac9229c7ec0d72ce74586339f7fe0eb90">I2C_DMAMasterReceiveCplt</a>;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;        <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">XferErrorCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a>;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        <span class="comment">/* Set the unused DMA callbacks to NULL */</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">XferHalfCpltCallback</a> = NULL;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = NULL;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160; </div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <span class="comment">/* Enable the DMA channel */</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        dmaxferstatus = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>, (uint32_t)&amp;hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;RXDR, (uint32_t)pData, hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>);</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      {</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160; </div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA_PARAM;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160; </div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160; </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      }</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160; </div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      <span class="keywordflow">if</span> (dmaxferstatus == <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      {</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        <span class="comment">/* Set NBYTES to read and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE and generate RESTART */</span></div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, I2C_GENERATE_START_READ);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <span class="comment">/* Update XferCount value */</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> -= hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>;</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160; </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;        <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="comment">                  to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="comment">                  process unlock */</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        <span class="comment">/* Enable ERR and NACK interrupts */</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_ERROR_IT);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160; </div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        <span class="comment">/* Enable DMA Request */</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 |= I2C_CR1_RXDMAEN;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;      }</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA;</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160; </div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160; </div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;      }</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    {</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      <span class="comment">/* Update Transfer ISR function pointer */</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a> = <a class="code" href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a>;</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160; </div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      <span class="comment">/* Set NBYTES to read and generate START condition */</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_GENERATE_START_READ);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160; </div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160; </div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="comment">                to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="comment">                process unlock */</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <span class="comment">/* Enable ERR, TC, STOP, NACK, TXI interrupt */</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      <span class="comment">/* possible to enable all of these */</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;      <span class="comment">/* I2C_IT_ERRI | I2C_IT_TCI| I2C_IT_STOPI| I2C_IT_NACKI | I2C_IT_ADDRI | I2C_IT_RXI | I2C_IT_TXI */</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_TX_IT);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  }</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  }</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2aebdb302ffc0a4dff28dc2c8b59e1e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2aebdb302ffc0a4dff28dc2c8b59e1e9">&#9670;&nbsp;</a></span>HAL_I2C_Master_Receive_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Receive_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive in master mode an amount of data in non-blocking mode with Interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l01619">1619</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;{</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_BUSY) == SET)</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    }</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160; </div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160; </div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160; </div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a>;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    }</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    {</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      xfermode = I2C_AUTOEND_MODE;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    }</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160; </div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE */</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, I2C_GENERATE_START_READ);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160; </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160; </div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment">              to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">              process unlock */</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160; </div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="comment">/* Enable ERR, TC, STOP, NACK, RXI interrupt */</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="comment">/* possible to enable all of these */</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="comment">/* I2C_IT_ERRI | I2C_IT_TCI| I2C_IT_STOPI| I2C_IT_NACKI | I2C_IT_ADDRI | I2C_IT_RXI | I2C_IT_TXI */</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_RX_IT);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  }</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  {</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  }</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga83c1c311ce7822081cfca9aeef9ad632"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga83c1c311ce7822081cfca9aeef9ad632">&#9670;&nbsp;</a></span>HAL_I2C_Master_Seq_Receive_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Seq_Receive_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>XferOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sequential receive in master I2C mode an amount of data in non-blocking mode with DMA. </p>
<dl class="section note"><dt>Note</dt><dd>This interface allow to manage repeated start condition when a direction change during transfer </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">XferOptions</td><td>Options of Transfer, value of <a class="el" href="group__I2C__XFEROPTIONS.html">I2C Sequential Transfer Options</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l03486">3486</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;{</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;  uint32_t xferrequest = I2C_GENERATE_START_READ;</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;  HAL_StatusTypeDef dmaxferstatus;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160; </div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_TRANSFER_OPTIONS_REQUEST(XferOptions));</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160; </div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;  {</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160; </div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>;</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160; </div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = XferOptions;</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gabfdc904b76d58aaac9cb270b43b2b0bc">I2C_Master_ISR_DMA</a>;</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160; </div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <span class="comment">/* If hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE, use reload mode */</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;    {</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    }</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;    {</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;      xfermode = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a>;</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;    }</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160; </div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;    <span class="comment">/* If transfer direction not change and there is no request to start another frame, do not generate Restart Condition */</span></div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;    <span class="comment">/* Mean Previous state is same as current state */</span></div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;    <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a028d3e824c01ccc6c9a23bb5802e3313">PreviousState</a> == I2C_STATE_MASTER_BUSY_RX) &amp;&amp; (IS_I2C_TRANSFER_OTHER_OPTIONS_REQUEST(XferOptions) == 0))</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;    {</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;      xferrequest = I2C_NO_STARTSTOP;</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    }</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;    {</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;      <span class="comment">/* Convert OTHER_xxx XferOptions if any */</span></div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#gab175ae4207b9677b4020dcff061fc65c">I2C_ConvertOtherXferOptions</a>(hi2c);</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160; </div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;      <span class="comment">/* Update xfermode accordingly if no reload is necessary */</span></div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;      <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &lt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;      {</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;        xfermode = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a>;</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;      }</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;    }</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160; </div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> &gt; 0U)</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    {</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;      <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a> != NULL)</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;      {</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;        <span class="comment">/* Set the I2C DMA transfer complete callback */</span></div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">XferCpltCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gac9229c7ec0d72ce74586339f7fe0eb90">I2C_DMAMasterReceiveCplt</a>;</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160; </div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;        <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">XferErrorCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a>;</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160; </div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;        <span class="comment">/* Set the unused DMA callbacks to NULL */</span></div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">XferHalfCpltCallback</a> = NULL;</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = NULL;</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160; </div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;        <span class="comment">/* Enable the DMA channel */</span></div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;        dmaxferstatus = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>, (uint32_t)&amp;hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;RXDR, (uint32_t)pData, hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>);</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;      }</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;      {</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;        <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160; </div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;        <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA_PARAM;</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160; </div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160; </div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;      }</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160; </div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;      <span class="keywordflow">if</span> (dmaxferstatus == <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;      {</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;        <span class="comment">/* Send Slave Address and set NBYTES to read */</span></div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;        <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, xferrequest);</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160; </div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;        <span class="comment">/* Update XferCount value */</span></div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> -= hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>;</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160; </div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160; </div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;        <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;<span class="comment">                  to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;<span class="comment">                  process unlock */</span></div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;        <span class="comment">/* Enable ERR and NACK interrupts */</span></div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;        <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_ERROR_IT);</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160; </div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;        <span class="comment">/* Enable DMA Request */</span></div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 |= I2C_CR1_RXDMAEN;</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;      }</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;      {</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;        <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160; </div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;        <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA;</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160; </div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160; </div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;      }</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    }</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;    {</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;      <span class="comment">/* Update Transfer ISR function pointer */</span></div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a> = <a class="code" href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a>;</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160; </div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;      <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;      <span class="comment">/* Set NBYTES to read and generate START condition */</span></div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_GENERATE_START_READ);</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160; </div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160; </div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;      <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;<span class="comment">                to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;<span class="comment">                process unlock */</span></div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;      <span class="comment">/* Enable ERR, TC, STOP, NACK, TXI interrupt */</span></div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;      <span class="comment">/* possible to enable all of these */</span></div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;      <span class="comment">/* I2C_IT_ERRI | I2C_IT_TCI| I2C_IT_STOPI| I2C_IT_NACKI | I2C_IT_ADDRI | I2C_IT_RXI | I2C_IT_TXI */</span></div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_TX_IT);</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;    }</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160; </div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;  }</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;  {</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;  }</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga0caa34de50971b2bd5b953ee12af94f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0caa34de50971b2bd5b953ee12af94f1">&#9670;&nbsp;</a></span>HAL_I2C_Master_Seq_Receive_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Seq_Receive_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>XferOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sequential receive in master I2C mode an amount of data in non-blocking mode with Interrupt. </p>
<dl class="section note"><dt>Note</dt><dd>This interface allow to manage repeated start condition when a direction change during transfer </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">XferOptions</td><td>Options of Transfer, value of <a class="el" href="group__I2C__XFEROPTIONS.html">I2C Sequential Transfer Options</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l03402">3402</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;{</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;  uint32_t xferrequest = I2C_GENERATE_START_READ;</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160; </div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_TRANSFER_OPTIONS_REQUEST(XferOptions));</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160; </div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;  {</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160; </div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>;</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160; </div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = XferOptions;</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a>;</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160; </div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <span class="comment">/* If hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE, use reload mode */</span></div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    {</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    }</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    {</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;      xfermode = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a>;</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;    }</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160; </div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;    <span class="comment">/* If transfer direction not change and there is no request to start another frame, do not generate Restart Condition */</span></div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <span class="comment">/* Mean Previous state is same as current state */</span></div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a028d3e824c01ccc6c9a23bb5802e3313">PreviousState</a> == I2C_STATE_MASTER_BUSY_RX) &amp;&amp; (IS_I2C_TRANSFER_OTHER_OPTIONS_REQUEST(XferOptions) == 0))</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;    {</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;      xferrequest = I2C_NO_STARTSTOP;</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;    }</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;    {</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;      <span class="comment">/* Convert OTHER_xxx XferOptions if any */</span></div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#gab175ae4207b9677b4020dcff061fc65c">I2C_ConvertOtherXferOptions</a>(hi2c);</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160; </div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;      <span class="comment">/* Update xfermode accordingly if no reload is necessary */</span></div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;      <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &lt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      {</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;        xfermode = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a>;</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;      }</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    }</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160; </div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    <span class="comment">/* Send Slave Address and set NBYTES to read */</span></div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, xferrequest);</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160; </div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160; </div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;<span class="comment">              to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;<span class="comment">              process unlock */</span></div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_RX_IT);</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160; </div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;  }</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;  {</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;  }</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gace04b5c76cbe9b8f2293199df5cbebe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace04b5c76cbe9b8f2293199df5cbebe7">&#9670;&nbsp;</a></span>HAL_I2C_Master_Seq_Transmit_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Seq_Transmit_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>XferOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sequential transmit in master I2C mode an amount of data in non-blocking mode with DMA. </p>
<dl class="section note"><dt>Note</dt><dd>This interface allow to manage repeated start condition when a direction change during transfer </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">XferOptions</td><td>Options of Transfer, value of <a class="el" href="group__I2C__XFEROPTIONS.html">I2C Sequential Transfer Options</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l03240">3240</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;{</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;  uint32_t xferrequest = I2C_GENERATE_START_WRITE;</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;  HAL_StatusTypeDef dmaxferstatus;</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160; </div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_TRANSFER_OPTIONS_REQUEST(XferOptions));</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160; </div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;  {</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160; </div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>;</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160; </div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = XferOptions;</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gabfdc904b76d58aaac9cb270b43b2b0bc">I2C_Master_ISR_DMA</a>;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160; </div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;    <span class="comment">/* If hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE, use reload mode */</span></div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    {</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    }</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    {</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;      xfermode = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a>;</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;    }</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160; </div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <span class="comment">/* If transfer direction not change and there is no request to start another frame, do not generate Restart Condition */</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    <span class="comment">/* Mean Previous state is same as current state */</span></div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a028d3e824c01ccc6c9a23bb5802e3313">PreviousState</a> == I2C_STATE_MASTER_BUSY_TX) &amp;&amp; (IS_I2C_TRANSFER_OTHER_OPTIONS_REQUEST(XferOptions) == 0))</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    {</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;      xferrequest = I2C_NO_STARTSTOP;</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    }</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    {</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      <span class="comment">/* Convert OTHER_xxx XferOptions if any */</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#gab175ae4207b9677b4020dcff061fc65c">I2C_ConvertOtherXferOptions</a>(hi2c);</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160; </div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;      <span class="comment">/* Update xfermode accordingly if no reload is necessary */</span></div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;      <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &lt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;      {</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        xfermode = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a>;</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      }</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    }</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160; </div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> &gt; 0U)</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    {</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;      <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a> != NULL)</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      {</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;        <span class="comment">/* Set the I2C DMA transfer complete callback */</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">XferCpltCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#ga013001f068aba4f167905c9b69e7b954">I2C_DMAMasterTransmitCplt</a>;</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160; </div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;        <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">XferErrorCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a>;</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160; </div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        <span class="comment">/* Set the unused DMA callbacks to NULL */</span></div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">XferHalfCpltCallback</a> = NULL;</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = NULL;</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160; </div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;        <span class="comment">/* Enable the DMA channel */</span></div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;        dmaxferstatus = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>, (uint32_t)pData, (uint32_t)&amp;hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;TXDR, hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>);</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;      }</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;      {</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;        <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160; </div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;        <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA_PARAM;</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160; </div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160; </div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;      }</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160; </div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;      <span class="keywordflow">if</span> (dmaxferstatus == <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;      {</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;        <span class="comment">/* Send Slave Address and set NBYTES to write */</span></div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;        <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, xferrequest);</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160; </div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;        <span class="comment">/* Update XferCount value */</span></div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> -= hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160; </div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160; </div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;        <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;<span class="comment">                  to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;<span class="comment">                  process unlock */</span></div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        <span class="comment">/* Enable ERR and NACK interrupts */</span></div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_ERROR_IT);</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160; </div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;        <span class="comment">/* Enable DMA Request */</span></div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 |= I2C_CR1_TXDMAEN;</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;      }</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;      {</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;        <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160; </div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;        <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA;</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160; </div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160; </div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;      }</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    }</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    {</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;      <span class="comment">/* Update Transfer ISR function pointer */</span></div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a> = <a class="code" href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a>;</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160; </div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;      <span class="comment">/* Set NBYTES to write and generate START condition */</span></div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_GENERATE_START_WRITE);</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160; </div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160; </div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;      <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;<span class="comment">                to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;<span class="comment">                process unlock */</span></div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      <span class="comment">/* Enable ERR, TC, STOP, NACK, TXI interrupt */</span></div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;      <span class="comment">/* possible to enable all of these */</span></div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;      <span class="comment">/* I2C_IT_ERRI | I2C_IT_TCI| I2C_IT_STOPI| I2C_IT_NACKI | I2C_IT_ADDRI | I2C_IT_RXI | I2C_IT_TXI */</span></div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_TX_IT);</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;    }</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160; </div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;  }</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;  {</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;  }</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6a55d04a460664f6b2039b2a7b56a9de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6a55d04a460664f6b2039b2a7b56a9de">&#9670;&nbsp;</a></span>HAL_I2C_Master_Seq_Transmit_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Seq_Transmit_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>XferOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sequential transmit in master I2C mode an amount of data in non-blocking mode with Interrupt. </p>
<dl class="section note"><dt>Note</dt><dd>This interface allow to manage repeated start condition when a direction change during transfer </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">XferOptions</td><td>Options of Transfer, value of <a class="el" href="group__I2C__XFEROPTIONS.html">I2C Sequential Transfer Options</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l03156">3156</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;{</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;  uint32_t xferrequest = I2C_GENERATE_START_WRITE;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160; </div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_TRANSFER_OPTIONS_REQUEST(XferOptions));</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160; </div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  {</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160; </div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>;</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160; </div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = XferOptions;</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a>;</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160; </div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    <span class="comment">/* If hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE, use reload mode */</span></div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    {</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    }</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    {</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;      xfermode = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a>;</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    }</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160; </div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    <span class="comment">/* If transfer direction not change and there is no request to start another frame, do not generate Restart Condition */</span></div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <span class="comment">/* Mean Previous state is same as current state */</span></div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a028d3e824c01ccc6c9a23bb5802e3313">PreviousState</a> == I2C_STATE_MASTER_BUSY_TX) &amp;&amp; (IS_I2C_TRANSFER_OTHER_OPTIONS_REQUEST(XferOptions) == 0))</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    {</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      xferrequest = I2C_NO_STARTSTOP;</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    }</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    {</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;      <span class="comment">/* Convert OTHER_xxx XferOptions if any */</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#gab175ae4207b9677b4020dcff061fc65c">I2C_ConvertOtherXferOptions</a>(hi2c);</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160; </div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;      <span class="comment">/* Update xfermode accordingly if no reload is necessary */</span></div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;      <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &lt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;      {</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;        xfermode = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a>;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;      }</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    }</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160; </div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    <span class="comment">/* Send Slave Address and set NBYTES to write */</span></div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, xferrequest);</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160; </div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160; </div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;<span class="comment">              to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;<span class="comment">              process unlock */</span></div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_TX_IT);</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160; </div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  }</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;  {</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  }</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9440a306e25c7bd038cfa8619ec9a830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9440a306e25c7bd038cfa8619ec9a830">&#9670;&nbsp;</a></span>HAL_I2C_Master_Transmit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Transmit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmits in master mode an amount of data in blocking mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout duration </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l01060">1060</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;{</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160; </div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="comment">/* Init tickstart for timeout management*/</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_BUSY, SET, I2C_TIMEOUT_BUSY, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    }</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>  = pData;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> = Size;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>   = NULL;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE and generate RESTART */</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_RELOAD_MODE, I2C_GENERATE_START_WRITE);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_GENERATE_START_WRITE);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">while</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; 0U)</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <span class="comment">/* Wait until TXIS flag is set */</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga358386d4dbbb66da2b4822843f247582">I2C_WaitOnTXISFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <span class="comment">/* Write data to TXDR */</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;TXDR = *hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="comment">/* Increment Buffer pointer */</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>++;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>--;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>--;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> != 0U) &amp;&amp; (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> == 0U))</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="comment">/* Wait until TCR flag is set */</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_TCR, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;          <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        {</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;          <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_RELOAD_MODE, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;          <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="comment">/* No need to Check TC flag, with AUTOEND mode the stop is automatically generated */</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="comment">/* Wait until STOPF flag is set */</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga783b1f588b859516225ec7067a235a5b">I2C_WaitOnSTOPFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="comment">/* Clear STOP Flag */</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="comment">/* Clear Configuration Register 2 */</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    I2C_RESET_CR2(hi2c);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>  = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  }</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga978126d41a3a67384f4cb2fe3e6e7e8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga978126d41a3a67384f4cb2fe3e6e7e8f">&#9670;&nbsp;</a></span>HAL_I2C_Master_Transmit_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Transmit_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit in master mode an amount of data in non-blocking mode with DMA. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l01786">1786</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;{</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  HAL_StatusTypeDef dmaxferstatus;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_BUSY) == SET)</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    {</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    }</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160; </div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160; </div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160; </div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gabfdc904b76d58aaac9cb270b43b2b0bc">I2C_Master_ISR_DMA</a>;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    {</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    }</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      xfermode = I2C_AUTOEND_MODE;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    }</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> &gt; 0U)</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    {</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a> != NULL)</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="comment">/* Set the I2C DMA transfer complete callback */</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">XferCpltCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#ga013001f068aba4f167905c9b69e7b954">I2C_DMAMasterTransmitCplt</a>;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160; </div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">XferErrorCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a>;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        <span class="comment">/* Set the unused DMA callbacks to NULL */</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">XferHalfCpltCallback</a> = NULL;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = NULL;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160; </div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <span class="comment">/* Enable the DMA channel */</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        dmaxferstatus = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>, (uint32_t)pData, (uint32_t)&amp;hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;TXDR, hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      }</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      {</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160; </div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA_PARAM;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160; </div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160; </div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      }</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160; </div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      <span class="keywordflow">if</span> (dmaxferstatus == <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE and generate RESTART */</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, I2C_GENERATE_START_WRITE);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="comment">/* Update XferCount value */</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> -= hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160; </div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160; </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="comment">                  to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="comment">                  process unlock */</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <span class="comment">/* Enable ERR and NACK interrupts */</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_ERROR_IT);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160; </div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        <span class="comment">/* Enable DMA Request */</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 |= I2C_CR1_TXDMAEN;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      }</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      {</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160; </div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160; </div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      }</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    }</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <span class="comment">/* Update Transfer ISR function pointer */</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a> = <a class="code" href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a>;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="comment">/* Set NBYTES to write and generate START condition */</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_GENERATE_START_WRITE);</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment">                to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="comment">                process unlock */</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <span class="comment">/* Enable ERR, TC, STOP, NACK, TXI interrupt */</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <span class="comment">/* possible to enable all of these */</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      <span class="comment">/* I2C_IT_ERRI | I2C_IT_TCI| I2C_IT_STOPI| I2C_IT_NACKI | I2C_IT_ADDRI | I2C_IT_RXI | I2C_IT_TXI */</span></div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_TX_IT);</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160; </div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga48b84e0cff0e44d10e10bf9cc5a6726d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga48b84e0cff0e44d10e10bf9cc5a6726d">&#9670;&nbsp;</a></span>HAL_I2C_Master_Transmit_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Master_Transmit_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit in master mode an amount of data in non-blocking mode with Interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l01550">1550</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;{</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160; </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_BUSY) == SET)</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160; </div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a>;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a>;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    {</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      xfermode = I2C_AUTOEND_MODE;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    }</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160; </div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE */</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, I2C_GENERATE_START_WRITE);</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160; </div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160; </div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">              to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="comment">              process unlock */</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160; </div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="comment">/* Enable ERR, TC, STOP, NACK, TXI interrupt */</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="comment">/* possible to enable all of these */</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="comment">/* I2C_IT_ERRI | I2C_IT_TCI| I2C_IT_STOPI| I2C_IT_NACKI | I2C_IT_ADDRI | I2C_IT_RXI | I2C_IT_TXI */</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_TX_IT);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160; </div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  }</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  }</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga7b593a1b85bd989dd002ee209eae4ad2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7b593a1b85bd989dd002ee209eae4ad2">&#9670;&nbsp;</a></span>HAL_I2C_Mem_Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Mem_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an amount of data in blocking mode from a specific memory address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">MemAddress</td><td>Internal memory address </td></tr>
    <tr><td class="paramname">MemAddSize</td><td>Size of internal memory address </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout duration </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l02415">2415</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;{</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160; </div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_MEMADD_SIZE(MemAddSize));</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160; </div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  {</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    {</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    }</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160; </div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160; </div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    <span class="comment">/* Init tickstart for timeout management*/</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160; </div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_BUSY, SET, I2C_TIMEOUT_BUSY, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    }</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160; </div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a3f592bd942f973242aac6b7df79f3f1e">HAL_I2C_MODE_MEM</a>;</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160; </div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>  = pData;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> = Size;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>   = NULL;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160; </div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="comment">/* Send Slave Address and Memory Address */</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga31af1d4f5f1dfad50b53958bd50400cd">I2C_RequestMemoryRead</a>(hi2c, DevAddress, MemAddress, MemAddSize, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    {</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    }</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160; </div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE and generate RESTART */</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    {</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_RELOAD_MODE, I2C_GENERATE_START_READ);</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    }</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    {</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_GENERATE_START_READ);</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    }</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160; </div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    {</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;      <span class="comment">/* Wait until RXNE flag is set */</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_RXNE, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;      {</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;      }</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160; </div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      <span class="comment">/* Read data from RXDR */</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      *hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a> = (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;RXDR;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160; </div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;      <span class="comment">/* Increment Buffer pointer */</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>++;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160; </div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>--;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>--;</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160; </div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;      <a class="code" href="group__LPUART__LL__EF__Configuration.html#ga3278356e8f771edc00843def4920f76c">if</a> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> != 0U) &amp;&amp; (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> == 0U))</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;      {</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        <span class="comment">/* Wait until TCR flag is set */</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_TCR, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        {</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;          <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        }</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; </div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        {</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;          <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t) hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_RELOAD_MODE, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        }</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        {</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;          <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        }</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      }</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    }</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">while</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; 0U);</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160; </div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="comment">/* No need to Check TC flag, with AUTOEND mode the stop is automatically generated */</span></div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    <span class="comment">/* Wait until STOPF flag is reset */</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga783b1f588b859516225ec7067a235a5b">I2C_WaitOnSTOPFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    {</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    }</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160; </div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    <span class="comment">/* Clear STOP Flag */</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160; </div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <span class="comment">/* Clear Configuration Register 2 */</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    I2C_RESET_CR2(hi2c);</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160; </div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>  = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160; </div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160; </div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  }</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  {</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  }</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gab25b99552182d2486d8eb441fffdd0a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab25b99552182d2486d8eb441fffdd0a4">&#9670;&nbsp;</a></span>HAL_I2C_Mem_Read_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Mem_Read_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads an amount of data in non-blocking mode with DMA from a specific memory address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">MemAddress</td><td>Internal memory address </td></tr>
    <tr><td class="paramname">MemAddSize</td><td>Size of internal memory address </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be read </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l02873">2873</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;{</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  HAL_StatusTypeDef dmaxferstatus;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160; </div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_MEMADD_SIZE(MemAddSize));</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160; </div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  {</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    {</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    }</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160; </div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;    <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_BUSY) == SET)</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    {</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;      <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    }</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160; </div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160; </div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <span class="comment">/* Init tickstart for timeout management*/</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160; </div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a3f592bd942f973242aac6b7df79f3f1e">HAL_I2C_MODE_MEM</a>;</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160; </div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gabfdc904b76d58aaac9cb270b43b2b0bc">I2C_Master_ISR_DMA</a>;</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160; </div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;    {</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    }</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    {</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;      xfermode = I2C_AUTOEND_MODE;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    }</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160; </div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="comment">/* Send Slave Address and Memory Address */</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga31af1d4f5f1dfad50b53958bd50400cd">I2C_RequestMemoryRead</a>(hi2c, DevAddress, MemAddress, MemAddSize, I2C_TIMEOUT_FLAG, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    {</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    }</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160; </div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a> != NULL)</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    {</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;      <span class="comment">/* Set the I2C DMA transfer complete callback */</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">XferCpltCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gac9229c7ec0d72ce74586339f7fe0eb90">I2C_DMAMasterReceiveCplt</a>;</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160; </div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;      <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">XferErrorCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a>;</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160; </div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;      <span class="comment">/* Set the unused DMA callbacks to NULL */</span></div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">XferHalfCpltCallback</a> = NULL;</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = NULL;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160; </div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;      <span class="comment">/* Enable the DMA channel */</span></div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      dmaxferstatus = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>, (uint32_t)&amp;hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;RXDR, (uint32_t)pData, hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>);</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    }</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    {</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160; </div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA_PARAM;</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160; </div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160; </div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    }</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160; </div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <span class="keywordflow">if</span> (dmaxferstatus == <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    {</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE and generate RESTART */</span></div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, I2C_GENERATE_START_READ);</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160; </div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;      <span class="comment">/* Update XferCount value */</span></div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> -= hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160; </div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160; </div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;      <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;<span class="comment">                to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;<span class="comment">                process unlock */</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <span class="comment">/* Enable ERR and NACK interrupts */</span></div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_ERROR_IT);</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160; </div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;      <span class="comment">/* Enable DMA Request */</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 |= I2C_CR1_RXDMAEN;</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;    }</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    {</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160; </div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA;</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160; </div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160; </div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    }</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160; </div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;  }</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  {</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;  }</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2274a9d894a1dc783bc647f937200f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2274a9d894a1dc783bc647f937200f65">&#9670;&nbsp;</a></span>HAL_I2C_Mem_Read_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Mem_Read_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an amount of data in non-blocking mode with Interrupt from a specific memory address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">MemAddress</td><td>Internal memory address </td></tr>
    <tr><td class="paramname">MemAddSize</td><td>Size of internal memory address </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l02639">2639</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;{</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160; </div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_MEMADD_SIZE(MemAddSize));</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160; </div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;  {</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    {</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    }</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160; </div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_BUSY) == SET)</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    {</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    }</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160; </div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160; </div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <span class="comment">/* Init tickstart for timeout management*/</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160; </div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a3f592bd942f973242aac6b7df79f3f1e">HAL_I2C_MODE_MEM</a>;</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160; </div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a>;</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160; </div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    {</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    }</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    {</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;      xfermode = I2C_AUTOEND_MODE;</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    }</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160; </div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="comment">/* Send Slave Address and Memory Address */</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga31af1d4f5f1dfad50b53958bd50400cd">I2C_RequestMemoryRead</a>(hi2c, DevAddress, MemAddress, MemAddSize, I2C_TIMEOUT_FLAG, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    {</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    }</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160; </div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE and generate RESTART */</span></div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, I2C_GENERATE_START_READ);</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160; </div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160; </div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;<span class="comment">              to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;<span class="comment">              process unlock */</span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160; </div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    <span class="comment">/* Enable ERR, TC, STOP, NACK, RXI interrupt */</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <span class="comment">/* possible to enable all of these */</span></div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="comment">/* I2C_IT_ERRI | I2C_IT_TCI| I2C_IT_STOPI| I2C_IT_NACKI | I2C_IT_ADDRI | I2C_IT_RXI | I2C_IT_TXI */</span></div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_RX_IT);</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160; </div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  }</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  {</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  }</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga33e725a824eb672f9f999d9d5ce088fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga33e725a824eb672f9f999d9d5ce088fb">&#9670;&nbsp;</a></span>HAL_I2C_Mem_Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Mem_Write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write an amount of data in blocking mode to a specific memory address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">MemAddress</td><td>Internal memory address </td></tr>
    <tr><td class="paramname">MemAddSize</td><td>Size of internal memory address </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout duration </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l02280">2280</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;{</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_MEMADD_SIZE(MemAddSize));</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160; </div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  {</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    {</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    }</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160; </div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <span class="comment">/* Init tickstart for timeout management*/</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_BUSY, SET, I2C_TIMEOUT_BUSY, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    {</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    }</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160; </div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a3f592bd942f973242aac6b7df79f3f1e">HAL_I2C_MODE_MEM</a>;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160; </div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>  = pData;</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> = Size;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>   = NULL;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160; </div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <span class="comment">/* Send Slave Address and Memory Address */</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga353afee454a18bdfcd90cb9187bc0f57">I2C_RequestMemoryWrite</a>(hi2c, DevAddress, MemAddress, MemAddSize, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    {</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    }</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160; </div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE */</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_RELOAD_MODE, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    }</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    {</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    }</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160; </div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    {</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <span class="comment">/* Wait until TXIS flag is set */</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga358386d4dbbb66da2b4822843f247582">I2C_WaitOnTXISFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      {</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      }</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160; </div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      <span class="comment">/* Write data to TXDR */</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;TXDR = *hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160; </div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;      <span class="comment">/* Increment Buffer pointer */</span></div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>++;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160; </div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>--;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>--;</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> != 0U) &amp;&amp; (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> == 0U))</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      {</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        <span class="comment">/* Wait until TCR flag is set */</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_TCR, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;          <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;        }</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160; </div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        {</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;          <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_RELOAD_MODE, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        }</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        {</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;          <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, I2C_AUTOEND_MODE, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        }</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      }</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160; </div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    }</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <span class="keywordflow">while</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; 0U);</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160; </div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="comment">/* No need to Check TC flag, with AUTOEND mode the stop is automatically generated */</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="comment">/* Wait until STOPF flag is reset */</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga783b1f588b859516225ec7067a235a5b">I2C_WaitOnSTOPFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    {</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    }</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="comment">/* Clear STOP Flag */</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="comment">/* Clear Configuration Register 2 */</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    I2C_RESET_CR2(hi2c);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160; </div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>  = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160; </div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160; </div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  }</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;  {</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  }</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga12a2a86be393359534f630cdd090d8bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga12a2a86be393359534f630cdd090d8bb">&#9670;&nbsp;</a></span>HAL_I2C_Mem_Write_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Mem_Write_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write an amount of data in non-blocking mode with DMA to a specific memory address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">MemAddress</td><td>Internal memory address </td></tr>
    <tr><td class="paramname">MemAddSize</td><td>Size of internal memory address </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l02729">2729</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;{</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  HAL_StatusTypeDef dmaxferstatus;</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_MEMADD_SIZE(MemAddSize));</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160; </div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;  {</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    {</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    }</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160; </div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_BUSY) == SET)</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    {</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;      <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    }</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160; </div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160; </div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    <span class="comment">/* Init tickstart for timeout management*/</span></div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160; </div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a3f592bd942f973242aac6b7df79f3f1e">HAL_I2C_MODE_MEM</a>;</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160; </div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gabfdc904b76d58aaac9cb270b43b2b0bc">I2C_Master_ISR_DMA</a>;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160; </div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    }</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    {</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      xfermode = I2C_AUTOEND_MODE;</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    }</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160; </div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <span class="comment">/* Send Slave Address and Memory Address */</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga353afee454a18bdfcd90cb9187bc0f57">I2C_RequestMemoryWrite</a>(hi2c, DevAddress, MemAddress, MemAddSize, I2C_TIMEOUT_FLAG, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    {</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    }</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160; </div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160; </div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a> != NULL)</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    {</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;      <span class="comment">/* Set the I2C DMA transfer complete callback */</span></div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">XferCpltCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#ga013001f068aba4f167905c9b69e7b954">I2C_DMAMasterTransmitCplt</a>;</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160; </div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;      <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">XferErrorCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a>;</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160; </div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;      <span class="comment">/* Set the unused DMA callbacks to NULL */</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">XferHalfCpltCallback</a> = NULL;</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = NULL;</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160; </div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;      <span class="comment">/* Enable the DMA channel */</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;      dmaxferstatus = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>, (uint32_t)pData, (uint32_t)&amp;hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;TXDR, hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>);</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    }</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    {</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160; </div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA_PARAM;</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160; </div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    }</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160; </div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <span class="keywordflow">if</span> (dmaxferstatus == <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    {</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;      <span class="comment">/* Send Slave Address */</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;      <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE and generate RESTART */</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;      <span class="comment">/* Update XferCount value */</span></div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> -= hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160; </div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160; </div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;      <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;<span class="comment">                to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;<span class="comment">                process unlock */</span></div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;      <span class="comment">/* Enable ERR and NACK interrupts */</span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_ERROR_IT);</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160; </div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      <span class="comment">/* Enable DMA Request */</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 |= I2C_CR1_TXDMAEN;</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    }</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    {</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160; </div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA;</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160; </div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160; </div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    }</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160; </div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;  }</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  {</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  }</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gab57ffc32b01392d8bcce3c7ec32b3120"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab57ffc32b01392d8bcce3c7ec32b3120">&#9670;&nbsp;</a></span>HAL_I2C_Mem_Write_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Mem_Write_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>DevAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>MemAddSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write an amount of data in non-blocking mode with Interrupt to a specific memory address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">DevAddress</td><td>Target device address: The device 7 bits address value in datasheet must be shifted to the left before calling the interface </td></tr>
    <tr><td class="paramname">MemAddress</td><td>Internal memory address </td></tr>
    <tr><td class="paramname">MemAddSize</td><td>Size of internal memory address </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l02548">2548</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;{</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  uint32_t xfermode;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160; </div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_MEMADD_SIZE(MemAddSize));</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  {</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    {</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    }</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160; </div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;    <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_BUSY) == SET)</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    {</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    }</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160; </div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160; </div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    <span class="comment">/* Init tickstart for timeout management*/</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160; </div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a3f592bd942f973242aac6b7df79f3f1e">HAL_I2C_MODE_MEM</a>;</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160; </div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a>;</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160; </div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; MAX_NBYTE_SIZE)</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    {</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = MAX_NBYTE_SIZE;</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;      xfermode = I2C_RELOAD_MODE;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    }</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      xfermode = I2C_AUTOEND_MODE;</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    }</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160; </div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <span class="comment">/* Send Slave Address and Memory Address */</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga353afee454a18bdfcd90cb9187bc0f57">I2C_RequestMemoryWrite</a>(hi2c, DevAddress, MemAddress, MemAddSize, I2C_TIMEOUT_FLAG, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    {</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    }</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160; </div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="comment">/* Set NBYTES to write and reload if hi2c-&gt;XferCount &gt; MAX_NBYTE_SIZE and generate RESTART */</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a>(hi2c, DevAddress, (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>, xfermode, I2C_NO_STARTSTOP);</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160; </div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160; </div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="comment">              to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<span class="comment">              process unlock */</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160; </div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <span class="comment">/* Enable ERR, TC, STOP, NACK, TXI interrupt */</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    <span class="comment">/* possible to enable all of these */</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    <span class="comment">/* I2C_IT_ERRI | I2C_IT_TCI| I2C_IT_STOPI| I2C_IT_NACKI | I2C_IT_ADDRI | I2C_IT_RXI | I2C_IT_TXI */</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_TX_IT);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160; </div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  }</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;  {</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  }</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga92b445a5ca4f5b8195f1c10ebdc41687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga92b445a5ca4f5b8195f1c10ebdc41687">&#9670;&nbsp;</a></span>HAL_I2C_Slave_Receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Slave_Receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive in slave mode an amount of data in blocking mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout duration </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l01424">1424</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;{</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    {</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160; </div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="comment">/* Init tickstart for timeout management*/</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160; </div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>  = pData;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> = Size;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>   = NULL;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="comment">/* Enable Address Acknowledge */</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 &amp;= ~I2C_CR2_NACK;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160; </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="comment">/* Wait until ADDR flag is set */</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_ADDR, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="comment">/* Clear ADDR flag */</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_ADDR);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160; </div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="comment">/* Wait until DIR flag is reset Receiver mode */</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_DIR, SET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    }</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">while</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; 0U)</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <span class="comment">/* Wait until RXNE flag is set */</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#gaf2e7d2762e4ee3d41a8a18cd7ee7dc4f">I2C_WaitOnRXNEFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      {</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; </div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        <span class="comment">/* Store Last receive data if any */</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <span class="keywordflow">if</span> (__HAL_I2C_GET_FLAG(hi2c, I2C_FLAG_RXNE) == SET)</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        {</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;          <span class="comment">/* Read data from RXDR */</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;          *hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a> = (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;RXDR;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;          <span class="comment">/* Increment Buffer pointer */</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>++;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>--;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <span class="comment">/* Read data from RXDR */</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      *hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a> = (uint8_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;RXDR;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160; </div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      <span class="comment">/* Increment Buffer pointer */</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>++;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>--;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160; </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="comment">/* Wait until STOP flag is set */</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga783b1f588b859516225ec7067a235a5b">I2C_WaitOnSTOPFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="comment">/* Clear STOP flag */</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="comment">/* Wait until BUSY flag is reset */</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_BUSY, SET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    {</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    }</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160; </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>  = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160; </div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160; </div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  }</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  }</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gad9dd42a10e5c108e30e6546cb64639c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad9dd42a10e5c108e30e6546cb64639c2">&#9670;&nbsp;</a></span>HAL_I2C_Slave_Receive_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Slave_Receive_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive in slave mode an amount of data in non-blocking mode with DMA. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l02173">2173</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;{</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  HAL_StatusTypeDef dmaxferstatus;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160; </div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  {</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    }</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160; </div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a>;</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160; </div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>    = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#ga137332bbe63a349856bec71c814cae6c">I2C_Slave_ISR_DMA</a>;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160; </div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a> != NULL)</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    {</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;      <span class="comment">/* Set the I2C DMA transfer complete callback */</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">XferCpltCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#ga4d8884ddbff87c30c7863baf4fced26f">I2C_DMASlaveReceiveCplt</a>;</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160; </div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">XferErrorCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a>;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;      <span class="comment">/* Set the unused DMA callbacks to NULL */</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">XferHalfCpltCallback</a> = NULL;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = NULL;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      <span class="comment">/* Enable the DMA channel */</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      dmaxferstatus = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>, (uint32_t)&amp;hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;RXDR, (uint32_t)pData, hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>);</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    }</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    {</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160; </div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA_PARAM;</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160; </div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160; </div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    }</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160; </div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    <span class="keywordflow">if</span> (dmaxferstatus == <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    {</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      <span class="comment">/* Enable Address Acknowledge */</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 &amp;= ~I2C_CR2_NACK;</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160; </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="comment">                to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;<span class="comment">                process unlock */</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      <span class="comment">/* Enable ERR, STOP, NACK, ADDR interrupts */</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_LISTEN_IT);</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160; </div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      <span class="comment">/* Enable DMA Request */</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 |= I2C_CR1_RXDMAEN;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    }</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    {</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>;</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160; </div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA;</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160; </div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160; </div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    }</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160; </div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  }</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  {</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  }</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga48113a4abed4b32ac19da51babb530eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga48113a4abed4b32ac19da51babb530eb">&#9670;&nbsp;</a></span>HAL_I2C_Slave_Receive_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Slave_Receive_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive in slave mode an amount of data in non-blocking mode with Interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l01735">1735</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;{</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160; </div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a>;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; </div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="comment">/* Enable Address Acknowledge */</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 &amp;= ~I2C_CR2_NACK;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160; </div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>    = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#ga739b78fb8b3a7d1524dc0fb52b6069a5">I2C_Slave_ISR_IT</a>;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160; </div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;<span class="comment">              to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="comment">              process unlock */</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160; </div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="comment">/* Enable ERR, TC, STOP, NACK, RXI interrupt */</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="comment">/* possible to enable all of these */</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="comment">/* I2C_IT_ERRI | I2C_IT_TCI| I2C_IT_STOPI| I2C_IT_NACKI | I2C_IT_ADDRI | I2C_IT_RXI | I2C_IT_TXI */</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_RX_IT | I2C_XFER_LISTEN_IT);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160; </div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  {</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  }</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gaeb0f79e15c8dab0d370b3fb48ca592b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeb0f79e15c8dab0d370b3fb48ca592b7">&#9670;&nbsp;</a></span>HAL_I2C_Slave_Seq_Receive_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Slave_Seq_Receive_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>XferOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sequential receive in slave/device I2C mode an amount of data in non-blocking mode with DMA. </p>
<dl class="section note"><dt>Note</dt><dd>This interface allow to manage repeated start condition when a direction change during transfer </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">XferOptions</td><td>Options of Transfer, value of <a class="el" href="group__I2C__XFEROPTIONS.html">I2C Sequential Transfer Options</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l04015">4015</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;{</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;  HAL_StatusTypeDef dmaxferstatus;</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160; </div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_TRANSFER_OPTIONS_REQUEST(XferOptions));</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160; </div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;  <span class="keywordflow">if</span> (((uint32_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> &amp; (uint32_t)<a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>) == (uint32_t)<a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>)</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;  {</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    {</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;    }</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160; </div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;    <span class="comment">/* Disable Interrupts, to prevent preemption during treatment in case of multicall */</span></div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_LISTEN_IT | I2C_XFER_RX_IT);</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160; </div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160; </div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;    <span class="comment">/* I2C cannot manage full duplex exchange so disable previous IT enabled if any */</span></div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;    <span class="comment">/* and then toggle the HAL slave TX state to RX state */</span></div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a14d22553a60819b276582e08459f30b0">HAL_I2C_STATE_BUSY_TX_LISTEN</a>)</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;    {</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;      <span class="comment">/* Disable associated Interrupts */</span></div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_TX_IT);</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160; </div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;      <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp; I2C_CR1_TXDMAEN) == I2C_CR1_TXDMAEN)</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;      {</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;        <span class="comment">/* Abort DMA Xfer if any */</span></div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;        <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a> != NULL)</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;        {</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp;= ~I2C_CR1_TXDMAEN;</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160; </div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;          <span class="comment">/* Set the I2C DMA Abort callback :</span></div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;<span class="comment">           will lead to call HAL_I2C_ErrorCallback() at end of DMA abort procedure */</span></div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gaa8f2cea33acf144476d1b6582e63752d">I2C_DMAAbort</a>;</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160; </div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;          <span class="comment">/* Abort DMA TX */</span></div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="group__DMA__Exported__Functions__Group2.html#ga6677d7e614747341a58ffd7a048fd390">HAL_DMA_Abort_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;          {</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;            <span class="comment">/* Call Directly XferAbortCallback function in case of error */</span></div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;            hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>);</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;          }</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;        }</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;      }</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;    }</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a8aec2547eedf1c9924f8efed33e3b5c5">HAL_I2C_STATE_BUSY_RX_LISTEN</a>)</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    {</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;      <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp; I2C_CR1_RXDMAEN) == I2C_CR1_RXDMAEN)</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;      {</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp;= ~I2C_CR1_RXDMAEN;</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160; </div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;        <span class="comment">/* Abort DMA Xfer if any */</span></div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;        <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a> != NULL)</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;        {</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;          <span class="comment">/* Set the I2C DMA Abort callback :</span></div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;<span class="comment">           will lead to call HAL_I2C_ErrorCallback() at end of DMA abort procedure */</span></div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gaa8f2cea33acf144476d1b6582e63752d">I2C_DMAAbort</a>;</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160; </div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;          <span class="comment">/* Abort DMA RX */</span></div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="group__DMA__Exported__Functions__Group2.html#ga6677d7e614747341a58ffd7a048fd390">HAL_DMA_Abort_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;          {</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;            <span class="comment">/* Call Directly XferAbortCallback function in case of error */</span></div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;            hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>);</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;          }</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;        }</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;      }</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;    }</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;    {</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;      <span class="comment">/* Nothing to do */</span></div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;    }</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160; </div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a8aec2547eedf1c9924f8efed33e3b5c5">HAL_I2C_STATE_BUSY_RX_LISTEN</a>;</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a>;</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160; </div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;    <span class="comment">/* Enable Address Acknowledge */</span></div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 &amp;= ~I2C_CR2_NACK;</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160; </div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>    = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = XferOptions;</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#ga137332bbe63a349856bec71c814cae6c">I2C_Slave_ISR_DMA</a>;</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160; </div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a> != NULL)</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;    {</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;      <span class="comment">/* Set the I2C DMA transfer complete callback */</span></div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">XferCpltCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#ga4d8884ddbff87c30c7863baf4fced26f">I2C_DMASlaveReceiveCplt</a>;</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160; </div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;      <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">XferErrorCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a>;</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160; </div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;      <span class="comment">/* Set the unused DMA callbacks to NULL */</span></div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">XferHalfCpltCallback</a> = NULL;</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = NULL;</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160; </div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;      <span class="comment">/* Enable the DMA channel */</span></div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;      dmaxferstatus = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>, (uint32_t)&amp;hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;RXDR, (uint32_t)pData, hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>);</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;    }</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;    {</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>;</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160; </div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA_PARAM;</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160; </div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160; </div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;    }</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160; </div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;    <span class="keywordflow">if</span> (dmaxferstatus == <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;    {</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;      <span class="comment">/* Update XferCount value */</span></div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> -= hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>;</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160; </div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;      <span class="comment">/* Reset XferSize */</span></div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = 0;</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    }</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;    {</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>;</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160; </div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA;</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160; </div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160; </div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;    }</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160; </div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;    <span class="keywordflow">if</span> (I2C_GET_DIR(hi2c) == I2C_DIRECTION_TRANSMIT)</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;    {</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;      <span class="comment">/* Clear ADDR flag after prepare the transfer parameters */</span></div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;      <span class="comment">/* This action will generate an acknowledge to the Master */</span></div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;      __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_ADDR);</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;    }</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160; </div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160; </div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;<span class="comment">    to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;<span class="comment">    process unlock */</span></div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;    <span class="comment">/* REnable ADDR interrupt */</span></div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_RX_IT | I2C_XFER_LISTEN_IT);</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160; </div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;    <span class="comment">/* Enable DMA Request */</span></div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 |= I2C_CR1_RXDMAEN;</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160; </div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;  }</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;  {</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;    <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;  }</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1e782a3b10d12e4368eb489ad728e735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1e782a3b10d12e4368eb489ad728e735">&#9670;&nbsp;</a></span>HAL_I2C_Slave_Seq_Receive_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Slave_Seq_Receive_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>XferOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sequential receive in slave/device I2C mode an amount of data in non-blocking mode with Interrupt. </p>
<dl class="section note"><dt>Note</dt><dd>This interface allow to manage repeated start condition when a direction change during transfer </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">XferOptions</td><td>Options of Transfer, value of <a class="el" href="group__I2C__XFEROPTIONS.html">I2C Sequential Transfer Options</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l03920">3920</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;{</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_TRANSFER_OPTIONS_REQUEST(XferOptions));</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160; </div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;  <span class="keywordflow">if</span> (((uint32_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> &amp; (uint32_t)<a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>) == (uint32_t)<a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>)</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;  {</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;    {</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;    }</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160; </div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;    <span class="comment">/* Disable Interrupts, to prevent preemption during treatment in case of multicall */</span></div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_LISTEN_IT | I2C_XFER_RX_IT);</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160; </div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160; </div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    <span class="comment">/* I2C cannot manage full duplex exchange so disable previous IT enabled if any */</span></div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;    <span class="comment">/* and then toggle the HAL slave TX state to RX state */</span></div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a14d22553a60819b276582e08459f30b0">HAL_I2C_STATE_BUSY_TX_LISTEN</a>)</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;    {</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;      <span class="comment">/* Disable associated Interrupts */</span></div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_TX_IT);</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160; </div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;      <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp; I2C_CR1_TXDMAEN) == I2C_CR1_TXDMAEN)</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;      {</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp;= ~I2C_CR1_TXDMAEN;</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160; </div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;        <span class="comment">/* Abort DMA Xfer if any */</span></div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;        <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a> != NULL)</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;        {</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;          <span class="comment">/* Set the I2C DMA Abort callback :</span></div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;<span class="comment">           will lead to call HAL_I2C_ErrorCallback() at end of DMA abort procedure */</span></div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gaa8f2cea33acf144476d1b6582e63752d">I2C_DMAAbort</a>;</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160; </div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;          <span class="comment">/* Abort DMA TX */</span></div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="group__DMA__Exported__Functions__Group2.html#ga6677d7e614747341a58ffd7a048fd390">HAL_DMA_Abort_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;          {</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;            <span class="comment">/* Call Directly XferAbortCallback function in case of error */</span></div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;            hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>);</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;          }</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;        }</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;      }</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;    }</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160; </div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a8aec2547eedf1c9924f8efed33e3b5c5">HAL_I2C_STATE_BUSY_RX_LISTEN</a>;</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a>;</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160; </div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;    <span class="comment">/* Enable Address Acknowledge */</span></div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 &amp;= ~I2C_CR2_NACK;</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160; </div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>    = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = XferOptions;</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#ga739b78fb8b3a7d1524dc0fb52b6069a5">I2C_Slave_ISR_IT</a>;</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160; </div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;    <span class="keywordflow">if</span> (I2C_GET_DIR(hi2c) == I2C_DIRECTION_TRANSMIT)</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;    {</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;      <span class="comment">/* Clear ADDR flag after prepare the transfer parameters */</span></div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;      <span class="comment">/* This action will generate an acknowledge to the Master */</span></div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;      __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_ADDR);</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;    }</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160; </div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160; </div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;<span class="comment">    to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;<span class="comment">    process unlock */</span></div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;    <span class="comment">/* REnable ADDR interrupt */</span></div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_RX_IT | I2C_XFER_LISTEN_IT);</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160; </div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  }</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;  {</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;    <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;  }</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga105b8f6d6d7310e2d9bc170e8ed412ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga105b8f6d6d7310e2d9bc170e8ed412ae">&#9670;&nbsp;</a></span>HAL_I2C_Slave_Seq_Transmit_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Slave_Seq_Transmit_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>XferOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sequential transmit in slave/device I2C mode an amount of data in non-blocking mode with DMA. </p>
<dl class="section note"><dt>Note</dt><dd>This interface allow to manage repeated start condition when a direction change during transfer </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">XferOptions</td><td>Options of Transfer, value of <a class="el" href="group__I2C__XFEROPTIONS.html">I2C Sequential Transfer Options</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l03741">3741</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;{</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  HAL_StatusTypeDef dmaxferstatus;</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160; </div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_TRANSFER_OPTIONS_REQUEST(XferOptions));</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160; </div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  <span class="keywordflow">if</span> (((uint32_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> &amp; (uint32_t)<a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>) == (uint32_t)<a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>)</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;  {</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    {</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    }</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160; </div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160; </div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    <span class="comment">/* Disable Interrupts, to prevent preemption during treatment in case of multicall */</span></div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_LISTEN_IT | I2C_XFER_TX_IT);</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160; </div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;    <span class="comment">/* I2C cannot manage full duplex exchange so disable previous IT enabled if any */</span></div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;    <span class="comment">/* and then toggle the HAL slave RX state to TX state */</span></div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a8aec2547eedf1c9924f8efed33e3b5c5">HAL_I2C_STATE_BUSY_RX_LISTEN</a>)</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;    {</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;      <span class="comment">/* Disable associated Interrupts */</span></div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_RX_IT);</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160; </div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;      <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp; I2C_CR1_RXDMAEN) == I2C_CR1_RXDMAEN)</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;      {</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;        <span class="comment">/* Abort DMA Xfer if any */</span></div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;        <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a> != NULL)</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;        {</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp;= ~I2C_CR1_RXDMAEN;</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160; </div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;          <span class="comment">/* Set the I2C DMA Abort callback :</span></div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;<span class="comment">           will lead to call HAL_I2C_ErrorCallback() at end of DMA abort procedure */</span></div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gaa8f2cea33acf144476d1b6582e63752d">I2C_DMAAbort</a>;</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160; </div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;          <span class="comment">/* Abort DMA RX */</span></div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="group__DMA__Exported__Functions__Group2.html#ga6677d7e614747341a58ffd7a048fd390">HAL_DMA_Abort_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;          {</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;            <span class="comment">/* Call Directly XferAbortCallback function in case of error */</span></div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;            hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>);</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;          }</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;        }</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;      }</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;    }</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a14d22553a60819b276582e08459f30b0">HAL_I2C_STATE_BUSY_TX_LISTEN</a>)</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;    {</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;      <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp; I2C_CR1_TXDMAEN) == I2C_CR1_TXDMAEN)</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;      {</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp;= ~I2C_CR1_TXDMAEN;</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160; </div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;        <span class="comment">/* Abort DMA Xfer if any */</span></div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;        <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a> != NULL)</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;        {</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;          <span class="comment">/* Set the I2C DMA Abort callback :</span></div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;<span class="comment">           will lead to call HAL_I2C_ErrorCallback() at end of DMA abort procedure */</span></div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gaa8f2cea33acf144476d1b6582e63752d">I2C_DMAAbort</a>;</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160; </div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;          <span class="comment">/* Abort DMA TX */</span></div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="group__DMA__Exported__Functions__Group2.html#ga6677d7e614747341a58ffd7a048fd390">HAL_DMA_Abort_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;          {</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;            <span class="comment">/* Call Directly XferAbortCallback function in case of error */</span></div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;            hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>);</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;          }</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;        }</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;      }</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;    }</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    {</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;      <span class="comment">/* Nothing to do */</span></div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;    }</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160; </div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a14d22553a60819b276582e08459f30b0">HAL_I2C_STATE_BUSY_TX_LISTEN</a>;</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a>;</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160; </div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;    <span class="comment">/* Enable Address Acknowledge */</span></div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 &amp;= ~I2C_CR2_NACK;</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160; </div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>    = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = XferOptions;</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#ga137332bbe63a349856bec71c814cae6c">I2C_Slave_ISR_DMA</a>;</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160; </div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a> != NULL)</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    {</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;      <span class="comment">/* Set the I2C DMA transfer complete callback */</span></div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">XferCpltCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gae61741cc9c4f1cf7c0edf9695efe6551">I2C_DMASlaveTransmitCplt</a>;</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160; </div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;      <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">XferErrorCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a>;</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160; </div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;      <span class="comment">/* Set the unused DMA callbacks to NULL */</span></div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">XferHalfCpltCallback</a> = NULL;</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = NULL;</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160; </div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;      <span class="comment">/* Enable the DMA channel */</span></div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;      dmaxferstatus = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>, (uint32_t)pData, (uint32_t)&amp;hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;TXDR, hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>);</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    }</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    {</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>;</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160; </div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA_PARAM;</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160; </div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160; </div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;    }</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160; </div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;    <span class="keywordflow">if</span> (dmaxferstatus == <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;    {</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;      <span class="comment">/* Update XferCount value */</span></div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> -= hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>;</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160; </div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;      <span class="comment">/* Reset XferSize */</span></div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a> = 0;</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;    }</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;    {</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>;</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160; </div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA;</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160; </div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160; </div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;    }</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160; </div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;    <span class="keywordflow">if</span> (I2C_GET_DIR(hi2c) == I2C_DIRECTION_RECEIVE)</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;    {</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;      <span class="comment">/* Clear ADDR flag after prepare the transfer parameters */</span></div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;      <span class="comment">/* This action will generate an acknowledge to the Master */</span></div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;      __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_ADDR);</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;    }</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160; </div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160; </div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;<span class="comment">    to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;<span class="comment">    process unlock */</span></div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;    <span class="comment">/* Enable ERR, STOP, NACK, ADDR interrupts */</span></div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_LISTEN_IT);</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160; </div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;    <span class="comment">/* Enable DMA Request */</span></div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 |= I2C_CR1_TXDMAEN;</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160; </div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;  }</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;  {</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;    <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;  }</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6d4024eb28117e0836c2477a855d7531"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d4024eb28117e0836c2477a855d7531">&#9670;&nbsp;</a></span>HAL_I2C_Slave_Seq_Transmit_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Slave_Seq_Transmit_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>XferOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sequential transmit in slave/device I2C mode an amount of data in non-blocking mode with Interrupt. </p>
<dl class="section note"><dt>Note</dt><dd>This interface allow to manage repeated start condition when a direction change during transfer </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">XferOptions</td><td>Options of Transfer, value of <a class="el" href="group__I2C__XFEROPTIONS.html">I2C Sequential Transfer Options</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l03646">3646</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;{</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;  <span class="comment">/* Check the parameters */</span></div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_I2C_TRANSFER_OPTIONS_REQUEST(XferOptions));</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160; </div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;  <span class="keywordflow">if</span> (((uint32_t)hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> &amp; (uint32_t)<a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>) == (uint32_t)<a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>)</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;  {</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;    {</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    }</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160; </div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;    <span class="comment">/* Disable Interrupts, to prevent preemption during treatment in case of multicall */</span></div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_LISTEN_IT | I2C_XFER_TX_IT);</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160; </div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160; </div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;    <span class="comment">/* I2C cannot manage full duplex exchange so disable previous IT enabled if any */</span></div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;    <span class="comment">/* and then toggle the HAL slave RX state to TX state */</span></div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a8aec2547eedf1c9924f8efed33e3b5c5">HAL_I2C_STATE_BUSY_RX_LISTEN</a>)</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;    {</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;      <span class="comment">/* Disable associated Interrupts */</span></div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a>(hi2c, I2C_XFER_RX_IT);</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160; </div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;      <span class="comment">/* Abort DMA Xfer if any */</span></div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;      <span class="keywordflow">if</span> ((hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp; I2C_CR1_RXDMAEN) == I2C_CR1_RXDMAEN)</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;      {</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 &amp;= ~I2C_CR1_RXDMAEN;</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160; </div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;        <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a> != NULL)</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;        {</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;          <span class="comment">/* Set the I2C DMA Abort callback :</span></div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;<span class="comment">           will lead to call HAL_I2C_ErrorCallback() at end of DMA abort procedure */</span></div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;          hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gaa8f2cea33acf144476d1b6582e63752d">I2C_DMAAbort</a>;</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160; </div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;          <span class="comment">/* Abort DMA RX */</span></div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="group__DMA__Exported__Functions__Group2.html#ga6677d7e614747341a58ffd7a048fd390">HAL_DMA_Abort_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;          {</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;            <span class="comment">/* Call Directly XferAbortCallback function in case of error */</span></div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;            hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">hdmarx</a>);</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;          }</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;        }</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;      }</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;    }</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160; </div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a14d22553a60819b276582e08459f30b0">HAL_I2C_STATE_BUSY_TX_LISTEN</a>;</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a>;</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160; </div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    <span class="comment">/* Enable Address Acknowledge */</span></div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 &amp;= ~I2C_CR2_NACK;</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160; </div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>    = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = XferOptions;</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#ga739b78fb8b3a7d1524dc0fb52b6069a5">I2C_Slave_ISR_IT</a>;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160; </div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;    <span class="keywordflow">if</span> (I2C_GET_DIR(hi2c) == I2C_DIRECTION_RECEIVE)</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;    {</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;      <span class="comment">/* Clear ADDR flag after prepare the transfer parameters */</span></div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;      <span class="comment">/* This action will generate an acknowledge to the Master */</span></div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;      __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_ADDR);</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;    }</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160; </div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160; </div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;<span class="comment">    to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;<span class="comment">    process unlock */</span></div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;    <span class="comment">/* REnable ADDR interrupt */</span></div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_TX_IT | I2C_XFER_LISTEN_IT);</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160; </div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;  }</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;  {</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;  }</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9128c5f01406d0da061a2bce00b6866e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9128c5f01406d0da061a2bce00b6866e">&#9670;&nbsp;</a></span>HAL_I2C_Slave_Transmit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Slave_Transmit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmits in slave mode an amount of data in blocking mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout duration </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l01287">1287</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;{</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  uint32_t tickstart;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160; </div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="comment">/* Init tickstart for timeout management*/</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>  = pData;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> = Size;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>   = NULL;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="comment">/* Enable Address Acknowledge */</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 &amp;= ~I2C_CR2_NACK;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="comment">/* Wait until ADDR flag is set */</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_ADDR, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160; </div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="comment">/* Clear ADDR flag */</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_ADDR);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="comment">/* If 10bit addressing mode is selected */</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a8e665bc833889975a33b10bebeab5db2">Init</a>.<a class="code" href="group__I2C__Configuration__Structure__definition.html#a5c39c41a5ee892c1bce69a579cc017ca">AddressingMode</a> == I2C_ADDRESSINGMODE_10BIT)</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <span class="comment">/* Wait until ADDR flag is set */</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_ADDR, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      {</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160; </div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      <span class="comment">/* Clear ADDR flag */</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_ADDR);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    }</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="comment">/* Wait until DIR flag is set Transmitter mode */</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_DIR, RESET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    {</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    }</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160; </div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">while</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a> &gt; 0U)</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="comment">/* Wait until TXIS flag is set */</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga358386d4dbbb66da2b4822843f247582">I2C_WaitOnTXISFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160; </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <span class="comment">/* Write data to TXDR */</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;TXDR = *hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160; </div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <span class="comment">/* Increment Buffer pointer */</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>++;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>--;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    }</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="comment">/* Wait until STOP flag is set */</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga783b1f588b859516225ec7067a235a5b">I2C_WaitOnSTOPFlagUntilTimeout</a>(hi2c, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> == HAL_I2C_ERROR_AF)</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <span class="comment">/* Normal use case for Transmitter mode */</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="comment">/* A NACK is generated to confirm the end of transfer */</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      {</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      }</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    }</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160; </div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="comment">/* Clear STOP flag */</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    __HAL_I2C_CLEAR_FLAG(hi2c, I2C_FLAG_STOPF);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160; </div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="comment">/* Wait until BUSY flag is reset */</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a>(hi2c, I2C_FLAG_BUSY, SET, Timeout, tickstart) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    {</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    }</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160; </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">/* Disable Address Acknowledge */</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 |= I2C_CR2_NACK;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160; </div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>  = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  }</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga59e69e0da57150f980deea0d235f0397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59e69e0da57150f980deea0d235f0397">&#9670;&nbsp;</a></span>HAL_I2C_Slave_Transmit_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Slave_Transmit_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit in slave mode an amount of data in non-blocking mode with DMA. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l02070">2070</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;{</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  HAL_StatusTypeDef dmaxferstatus;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160; </div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  {</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">if</span> ((pData == NULL) || (Size == 0U))</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    {</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> = HAL_I2C_ERROR_INVALID_PARAM;</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    }</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160; </div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a>;</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160; </div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>    = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#ga137332bbe63a349856bec71c814cae6c">I2C_Slave_ISR_DMA</a>;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160; </div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a> != NULL)</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    {</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <span class="comment">/* Set the I2C DMA transfer complete callback */</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">XferCpltCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gae61741cc9c4f1cf7c0edf9695efe6551">I2C_DMASlaveTransmitCplt</a>;</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160; </div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">XferErrorCallback</a> = <a class="code" href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a>;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160; </div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <span class="comment">/* Set the unused DMA callbacks to NULL */</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">XferHalfCpltCallback</a> = NULL;</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>-&gt;<a class="code" href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">XferAbortCallback</a> = NULL;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160; </div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      <span class="comment">/* Enable the DMA channel */</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      dmaxferstatus = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">hdmatx</a>, (uint32_t)pData, (uint32_t)&amp;hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;TXDR, hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    }</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    {</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA_PARAM;</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160; </div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; </div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    }</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <span class="keywordflow">if</span> (dmaxferstatus == <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    {</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;      <span class="comment">/* Enable Address Acknowledge */</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 &amp;= ~I2C_CR2_NACK;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160; </div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;      <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;<span class="comment">                to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;<span class="comment">                process unlock */</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      <span class="comment">/* Enable ERR, STOP, NACK, ADDR interrupts */</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_LISTEN_IT);</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160; </div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <span class="comment">/* Enable DMA Request */</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR1 |= I2C_CR1_TXDMAEN;</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    }</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    {</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      <span class="comment">/* Update I2C state */</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>     = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a>;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>      = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a>;</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      <span class="comment">/* Update I2C error code */</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a> |= HAL_I2C_ERROR_DMA;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160; </div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160; </div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    }</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160; </div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  }</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  {</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  }</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gabb5814408402b2e9d07c0b414e64fc9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb5814408402b2e9d07c0b414e64fc9d">&#9670;&nbsp;</a></span>HAL_I2C_Slave_Transmit_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HAL_I2C_Slave_Transmit_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__I2C__handle__Structure__definition.html#ga68e9f45c2fd2161fb827ccdeabb55ea5">I2C_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit in slave mode an amount of data in non-blocking mode with Interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>Pointer to a I2C_HandleTypeDef structure that contains the configuration information for the specified I2C. </td></tr>
    <tr><td class="paramname">pData</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramname">Size</td><td>Amount of data to be sent </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__i2c_8c_source.html#l01686">1686</a> of file <a class="el" href="stm32l4xx__hal__i2c_8c_source.html">stm32l4xx_hal_i2c.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;{</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <span class="keywordflow">if</span> (hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a> == <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a>)</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hi2c);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160; </div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">State</a>       = <a class="code" href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a>;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">Mode</a>        = <a class="code" href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a>;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">ErrorCode</a>   = HAL_I2C_ERROR_NONE;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="comment">/* Enable Address Acknowledge */</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">Instance</a>-&gt;CR2 &amp;= ~I2C_CR2_NACK;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="comment">/* Prepare transfer parameters */</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">pBuffPtr</a>    = pData;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>   = Size;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">XferSize</a>    = hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">XferCount</a>;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">XferOptions</a> = I2C_NO_OPTION_FRAME;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    hi2c-&gt;<a class="code" href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">XferISR</a>     = <a class="code" href="group__I2C__Private__Functions.html#ga739b78fb8b3a7d1524dc0fb52b6069a5">I2C_Slave_ISR_IT</a>;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hi2c);</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="comment">/* Note : The I2C interrupts must be enabled after unlocking current process</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment">              to avoid the risk of I2C interrupt handle execution before current</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment">              process unlock */</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160; </div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="comment">/* Enable ERR, TC, STOP, NACK, TXI interrupt */</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="comment">/* possible to enable all of these */</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="comment">/* I2C_IT_ERRI | I2C_IT_TCI| I2C_IT_STOPI| I2C_IT_NACKI | I2C_IT_ADDRI | I2C_IT_RXI | I2C_IT_TXI */</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <a class="code" href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a>(hi2c, I2C_XFER_TX_IT | I2C_XFER_LISTEN_IT);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160; </div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  }</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__LPUART__LL__EF__Configuration_html_ga3278356e8f771edc00843def4920f76c"><div class="ttname"><a href="group__LPUART__LL__EF__Configuration.html#ga3278356e8f771edc00843def4920f76c">if</a></div><div class="ttdeci">if(lpuartdiv &gt;=LPUART_BRR_MIN_VALUE)</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__ll__lpuart_8h_source.html#l01479">stm32l4xx_ll_lpuart.h:1479</a></div></div>
<div class="ttc" id="agroup__HAL__state__structure__definition_html_ggaef355af8eab251ae2a19ee164ad81c37a14d22553a60819b276582e08459f30b0"><div class="ttname"><a href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a14d22553a60819b276582e08459f30b0">HAL_I2C_STATE_BUSY_TX_LISTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00116">stm32l4xx_hal_i2c.h:116</a></div></div>
<div class="ttc" id="agroup__HAL__state__structure__definition_html_ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170"><div class="ttname"><a href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a4ea4ecc2dc3cb64c4877c123d9d73170">HAL_I2C_STATE_BUSY_RX</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00114">stm32l4xx_hal_i2c.h:114</a></div></div>
<div class="ttc" id="agroup__I2C__Configuration__Structure__definition_html_a5c39c41a5ee892c1bce69a579cc017ca"><div class="ttname"><a href="group__I2C__Configuration__Structure__definition.html#a5c39c41a5ee892c1bce69a579cc017ca">I2C_InitTypeDef::AddressingMode</a></div><div class="ttdeci">uint32_t AddressingMode</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00057">stm32l4xx_hal_i2c.h:57</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga3feac430acb1b5e74ad139639f3af9ca"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a></div><div class="ttdeci">__HAL_UNLOCK(hrtc)</div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga739b78fb8b3a7d1524dc0fb52b6069a5"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga739b78fb8b3a7d1524dc0fb52b6069a5">I2C_Slave_ISR_IT</a></div><div class="ttdeci">static HAL_StatusTypeDef I2C_Slave_ISR_IT(struct __I2C_HandleTypeDef *hi2c, uint32_t ITFlags, uint32_t ITSources)</div><div class="ttdoc">Interrupt Sub-Routine which handle the Interrupt Flags Slave Mode with Interrupt.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l04732">stm32l4xx_hal_i2c.c:4732</a></div></div>
<div class="ttc" id="astruct____DMA__HandleTypeDef_html_a5866f59e3a12760e559c4547ebf19d37"><div class="ttname"><a href="struct____DMA__HandleTypeDef.html#a5866f59e3a12760e559c4547ebf19d37">__DMA_HandleTypeDef::XferAbortCallback</a></div><div class="ttdeci">void(* XferAbortCallback)(struct __DMA_HandleTypeDef *hdma)</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dma_8h_source.html#l00131">stm32l4xx_hal_dma.h:131</a></div></div>
<div class="ttc" id="agroup__DMA__Exported__Functions__Group2_html_ga6677d7e614747341a58ffd7a048fd390"><div class="ttname"><a href="group__DMA__Exported__Functions__Group2.html#ga6677d7e614747341a58ffd7a048fd390">HAL_DMA_Abort_IT</a></div><div class="ttdeci">HAL_StatusTypeDef HAL_DMA_Abort_IT(DMA_HandleTypeDef *hdma)</div><div class="ttdoc">Aborts the DMA Transfer in Interrupt mode.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dma_8c_source.html#l00608">stm32l4xx_hal_dma.c:608</a></div></div>
<div class="ttc" id="astruct____DMA__HandleTypeDef_html_a4f323d8234b3f5f454a639e9df3cba23"><div class="ttname"><a href="struct____DMA__HandleTypeDef.html#a4f323d8234b3f5f454a639e9df3cba23">__DMA_HandleTypeDef::XferCpltCallback</a></div><div class="ttdeci">void(* XferCpltCallback)(struct __DMA_HandleTypeDef *hdma)</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dma_8h_source.html#l00125">stm32l4xx_hal_dma.h:125</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a3421cd62d9e34c4a5ff1706916c8ae7a"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a3421cd62d9e34c4a5ff1706916c8ae7a">__I2C_HandleTypeDef::State</a></div><div class="ttdeci">__IO HAL_I2C_StateTypeDef State</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00211">stm32l4xx_hal_i2c.h:211</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_gae9556fd7e7e58c27ad6bc4a0cb22512c"><div class="ttname"><a href="group__I2C__Private__Functions.html#gae9556fd7e7e58c27ad6bc4a0cb22512c">I2C_Master_ISR_IT</a></div><div class="ttdeci">static HAL_StatusTypeDef I2C_Master_ISR_IT(struct __I2C_HandleTypeDef *hi2c, uint32_t ITFlags, uint32_t ITSources)</div><div class="ttdoc">Interrupt Sub-Routine which handle the Interrupt Flags Master Mode with Interrupt.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l04595">stm32l4xx_hal_i2c.c:4595</a></div></div>
<div class="ttc" id="agroup__HAL__Exported__Functions__Group2_html_gac9b3a85a73735ac840d0dcb59bc0fdd6"><div class="ttname"><a href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a></div><div class="ttdeci">uint32_t HAL_GetTick(void)</div><div class="ttdoc">Provide a tick value in millisecond.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal_8c_source.html#l00337">stm32l4xx_hal.c:337</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_af699cc26b19f28b9215d3d4a167f068e"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#af699cc26b19f28b9215d3d4a167f068e">__I2C_HandleTypeDef::pBuffPtr</a></div><div class="ttdeci">uint8_t * pBuffPtr</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00192">stm32l4xx_hal_i2c.h:192</a></div></div>
<div class="ttc" id="astruct____DMA__HandleTypeDef_html_a5905bba1de7dc9d803a50dfb44d0a9e8"><div class="ttname"><a href="struct____DMA__HandleTypeDef.html#a5905bba1de7dc9d803a50dfb44d0a9e8">__DMA_HandleTypeDef::XferErrorCallback</a></div><div class="ttdeci">void(* XferErrorCallback)(struct __DMA_HandleTypeDef *hdma)</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dma_8h_source.html#l00129">stm32l4xx_hal_dma.h:129</a></div></div>
<div class="ttc" id="astruct____DMA__HandleTypeDef_html_a2e343c6a9135222a8efb8ca5bb5dad8c"><div class="ttname"><a href="struct____DMA__HandleTypeDef.html#a2e343c6a9135222a8efb8ca5bb5dad8c">__DMA_HandleTypeDef::XferHalfCpltCallback</a></div><div class="ttdeci">void(* XferHalfCpltCallback)(struct __DMA_HandleTypeDef *hdma)</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dma_8h_source.html#l00127">stm32l4xx_hal_dma.h:127</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga0e79caab7992ff991e31411c86fd1290"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga0e79caab7992ff991e31411c86fd1290">I2C_Disable_IRQ</a></div><div class="ttdeci">static void I2C_Disable_IRQ(I2C_HandleTypeDef *hi2c, uint16_t InterruptRequest)</div><div class="ttdoc">Manage the disabling of Interrupts.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l06403">stm32l4xx_hal_i2c.c:6403</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a314305a14bb912531cfc3c5f87291777"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a314305a14bb912531cfc3c5f87291777">__I2C_HandleTypeDef::XferCount</a></div><div class="ttdeci">__IO uint16_t XferCount</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00196">stm32l4xx_hal_i2c.h:196</a></div></div>
<div class="ttc" id="agroup__HAL__mode__structure__definition_html_ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53"><div class="ttname"><a href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a817358d19d278261f2047a5ec8ec6b53">HAL_I2C_MODE_SLAVE</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00152">stm32l4xx_hal_i2c.h:152</a></div></div>
<div class="ttc" id="agroup__HAL__state__structure__definition_html_ggaef355af8eab251ae2a19ee164ad81c37a0c503d6c0388f0d872b368557e278b5a"><div class="ttname"><a href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a0c503d6c0388f0d872b368557e278b5a">HAL_I2C_STATE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00112">stm32l4xx_hal_i2c.h:112</a></div></div>
<div class="ttc" id="agroup__HAL__state__structure__definition_html_ggaef355af8eab251ae2a19ee164ad81c37a8aec2547eedf1c9924f8efed33e3b5c5"><div class="ttname"><a href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a8aec2547eedf1c9924f8efed33e3b5c5">HAL_I2C_STATE_BUSY_RX_LISTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00118">stm32l4xx_hal_i2c.h:118</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_gadd39e76429b7d50282a17886670f5c4d"><div class="ttname"><a href="group__I2C__Private__Functions.html#gadd39e76429b7d50282a17886670f5c4d">I2C_DMAError</a></div><div class="ttdeci">static void I2C_DMAError(DMA_HandleTypeDef *hdma)</div><div class="ttdoc">DMA I2C communication error callback.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l06023">stm32l4xx_hal_i2c.c:6023</a></div></div>
<div class="ttc" id="agroup__HAL__state__structure__definition_html_ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1"><div class="ttname"><a href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37af859ce60c5e462b0bfde3a5010bc72d1">HAL_I2C_STATE_READY</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00111">stm32l4xx_hal_i2c.h:111</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga22e4eb7ce4fb2c10dffd69a8587c3867"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga22e4eb7ce4fb2c10dffd69a8587c3867">I2C_Enable_IRQ</a></div><div class="ttdeci">static void I2C_Enable_IRQ(I2C_HandleTypeDef *hi2c, uint16_t InterruptRequest)</div><div class="ttdoc">Manage the enabling of Interrupts.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l06332">stm32l4xx_hal_i2c.c:6332</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga358386d4dbbb66da2b4822843f247582"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga358386d4dbbb66da2b4822843f247582">I2C_WaitOnTXISFlagUntilTimeout</a></div><div class="ttdeci">static HAL_StatusTypeDef I2C_WaitOnTXISFlagUntilTimeout(I2C_HandleTypeDef *hi2c, uint32_t Timeout, uint32_t Tickstart)</div><div class="ttdoc">This function handles I2C Communication Timeout for specific usage of TXIS flag.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l06111">stm32l4xx_hal_i2c.c:6111</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a5d3ace2bbb83f44d4fe3df47fa42bb90"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a5d3ace2bbb83f44d4fe3df47fa42bb90">__I2C_HandleTypeDef::XferOptions</a></div><div class="ttdeci">__IO uint32_t XferOptions</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00198">stm32l4xx_hal_i2c.h:198</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_gac9229c7ec0d72ce74586339f7fe0eb90"><div class="ttname"><a href="group__I2C__Private__Functions.html#gac9229c7ec0d72ce74586339f7fe0eb90">I2C_DMAMasterReceiveCplt</a></div><div class="ttdeci">static void I2C_DMAMasterReceiveCplt(DMA_HandleTypeDef *hdma)</div><div class="ttdoc">DMA I2C master receive process complete callback.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l05948">stm32l4xx_hal_i2c.c:5948</a></div></div>
<div class="ttc" id="agroup__HAL__state__structure__definition_html_ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc"><div class="ttname"><a href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37acb3a9e3d4d1076e0f4e65f91ca0161bc">HAL_I2C_STATE_BUSY_TX</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00113">stm32l4xx_hal_i2c.h:113</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga31af1d4f5f1dfad50b53958bd50400cd"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga31af1d4f5f1dfad50b53958bd50400cd">I2C_RequestMemoryRead</a></div><div class="ttdeci">static HAL_StatusTypeDef I2C_RequestMemoryRead(I2C_HandleTypeDef *hi2c, uint16_t DevAddress, uint16_t MemAddress, uint16_t MemAddSize, uint32_t Timeout, uint32_t Tickstart)</div><div class="ttdoc">Master sends target device address followed by internal memory address for read request.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l05176">stm32l4xx_hal_i2c.c:5176</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga05dcbf41f5c5e42a592e9ad9e351391e"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a></div><div class="ttdeci">return HAL_OK</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__rtc__ex_8c_source.html#l00885">stm32l4xx_hal_rtc_ex.c:885</a></div></div>
<div class="ttc" id="agroup__DMA__Exported__Functions__Group2_html_ga7eddc0931ac8a3d77b23d6d5e68407c7"><div class="ttname"><a href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a></div><div class="ttdeci">HAL_StatusTypeDef HAL_DMA_Start_IT(DMA_HandleTypeDef *hdma, uint32_t SrcAddress, uint32_t DstAddress, uint32_t DataLength)</div><div class="ttdoc">Start the DMA Transfer with interrupt enabled.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dma_8c_source.html#l00473">stm32l4xx_hal_dma.c:473</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga137332bbe63a349856bec71c814cae6c"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga137332bbe63a349856bec71c814cae6c">I2C_Slave_ISR_DMA</a></div><div class="ttdeci">static HAL_StatusTypeDef I2C_Slave_ISR_DMA(struct __I2C_HandleTypeDef *hi2c, uint32_t ITFlags, uint32_t ITSources)</div><div class="ttdoc">Interrupt Sub-Routine which handle the Interrupt Flags Slave Mode with DMA.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l05003">stm32l4xx_hal_i2c.c:5003</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga21fdc449167466f3292f9caf6400e609"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga21fdc449167466f3292f9caf6400e609">I2C_WaitOnFlagUntilTimeout</a></div><div class="ttdeci">static HAL_StatusTypeDef I2C_WaitOnFlagUntilTimeout(I2C_HandleTypeDef *hi2c, uint32_t Flag, FlagStatus Status, uint32_t Timeout, uint32_t Tickstart)</div><div class="ttdoc">This function handles I2C Communication Timeout.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l06081">stm32l4xx_hal_i2c.c:6081</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a9e1687f431eaba605b2ae49c1e3ff641"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a9e1687f431eaba605b2ae49c1e3ff641">__I2C_HandleTypeDef::Mode</a></div><div class="ttdeci">__IO HAL_I2C_ModeTypeDef Mode</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00213">stm32l4xx_hal_i2c.h:213</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_gab175ae4207b9677b4020dcff061fc65c"><div class="ttname"><a href="group__I2C__Private__Functions.html#gab175ae4207b9677b4020dcff061fc65c">I2C_ConvertOtherXferOptions</a></div><div class="ttdeci">static void I2C_ConvertOtherXferOptions(I2C_HandleTypeDef *hi2c)</div><div class="ttdoc">Convert I2Cx OTHER_xxx XferOptions to functionnal XferOptions.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l06466">stm32l4xx_hal_i2c.c:6466</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_gabfdc904b76d58aaac9cb270b43b2b0bc"><div class="ttname"><a href="group__I2C__Private__Functions.html#gabfdc904b76d58aaac9cb270b43b2b0bc">I2C_Master_ISR_DMA</a></div><div class="ttdeci">static HAL_StatusTypeDef I2C_Master_ISR_DMA(struct __I2C_HandleTypeDef *hi2c, uint32_t ITFlags, uint32_t ITSources)</div><div class="ttdoc">Interrupt Sub-Routine which handle the Interrupt Flags Master Mode with DMA.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l04868">stm32l4xx_hal_i2c.c:4868</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga013001f068aba4f167905c9b69e7b954"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga013001f068aba4f167905c9b69e7b954">I2C_DMAMasterTransmitCplt</a></div><div class="ttdeci">static void I2C_DMAMasterTransmitCplt(DMA_HandleTypeDef *hdma)</div><div class="ttdoc">DMA I2C master transmit process complete callback.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l05873">stm32l4xx_hal_i2c.c:5873</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a52dcaac577eef13388d209f3f5a6a4b9"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a52dcaac577eef13388d209f3f5a6a4b9">__I2C_HandleTypeDef::hdmarx</a></div><div class="ttdeci">DMA_HandleTypeDef * hdmarx</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00207">stm32l4xx_hal_i2c.h:207</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a028d3e824c01ccc6c9a23bb5802e3313"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a028d3e824c01ccc6c9a23bb5802e3313">__I2C_HandleTypeDef::PreviousState</a></div><div class="ttdeci">__IO uint32_t PreviousState</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00201">stm32l4xx_hal_i2c.h:201</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_ad8f3153daebc780294797b448decb190"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#ad8f3153daebc780294797b448decb190">__I2C_HandleTypeDef::hdmatx</a></div><div class="ttdeci">DMA_HandleTypeDef * hdmatx</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00205">stm32l4xx_hal_i2c.h:205</a></div></div>
<div class="ttc" id="agroup__HAL__mode__structure__definition_html_ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2"><div class="ttname"><a href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a1eea98660a170dd7b191c9dfe46da6d2">HAL_I2C_MODE_MASTER</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00151">stm32l4xx_hal_i2c.h:151</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a824099e364465827123cda831284f643"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a824099e364465827123cda831284f643">__I2C_HandleTypeDef::ErrorCode</a></div><div class="ttdeci">__IO uint32_t ErrorCode</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00215">stm32l4xx_hal_i2c.h:215</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_gae61741cc9c4f1cf7c0edf9695efe6551"><div class="ttname"><a href="group__I2C__Private__Functions.html#gae61741cc9c4f1cf7c0edf9695efe6551">I2C_DMASlaveTransmitCplt</a></div><div class="ttdeci">static void I2C_DMASlaveTransmitCplt(DMA_HandleTypeDef *hdma)</div><div class="ttdoc">DMA I2C slave transmit process complete callback.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l05921">stm32l4xx_hal_i2c.c:5921</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a27f4f768395d68659c29ba55727182a2"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a27f4f768395d68659c29ba55727182a2">__I2C_HandleTypeDef::XferISR</a></div><div class="ttdeci">HAL_StatusTypeDef(* XferISR)(struct __I2C_HandleTypeDef *hi2c, uint32_t ITFlags, uint32_t ITSources)</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00203">stm32l4xx_hal_i2c.h:203</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga783b1f588b859516225ec7067a235a5b"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga783b1f588b859516225ec7067a235a5b">I2C_WaitOnSTOPFlagUntilTimeout</a></div><div class="ttdeci">static HAL_StatusTypeDef I2C_WaitOnSTOPFlagUntilTimeout(I2C_HandleTypeDef *hi2c, uint32_t Timeout, uint32_t Tickstart)</div><div class="ttdoc">This function handles I2C Communication Timeout for specific usage of STOP flag.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l06148">stm32l4xx_hal_i2c.c:6148</a></div></div>
<div class="ttc" id="agroup__HAL__state__structure__definition_html_ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779"><div class="ttname"><a href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a13518f06f54c7515100e86bb8d6e0779">HAL_I2C_STATE_LISTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00115">stm32l4xx_hal_i2c.h:115</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_gaa8f2cea33acf144476d1b6582e63752d"><div class="ttname"><a href="group__I2C__Private__Functions.html#gaa8f2cea33acf144476d1b6582e63752d">I2C_DMAAbort</a></div><div class="ttdeci">static void I2C_DMAAbort(DMA_HandleTypeDef *hdma)</div><div class="ttdoc">DMA I2C communication abort callback (To be called at end of DMA Abort procedure).</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l06040">stm32l4xx_hal_i2c.c:6040</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga88b8891e30e4b1c54fecb1235c95870d"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a></div><div class="ttdeci">__HAL_LOCK(hrtc)</div></div>
<div class="ttc" id="agroup__HAL__state__structure__definition_html_ggaef355af8eab251ae2a19ee164ad81c37a2c6f6d1fef0847f9da51153b5c295249"><div class="ttname"><a href="group__HAL__state__structure__definition.html#ggaef355af8eab251ae2a19ee164ad81c37a2c6f6d1fef0847f9da51153b5c295249">HAL_I2C_STATE_ABORT</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00120">stm32l4xx_hal_i2c.h:120</a></div></div>
<div class="ttc" id="agroup__HAL__mode__structure__definition_html_ggabcbb7b844f2ffd63c4e530c117882062a3f592bd942f973242aac6b7df79f3f1e"><div class="ttname"><a href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a3f592bd942f973242aac6b7df79f3f1e">HAL_I2C_MODE_MEM</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00153">stm32l4xx_hal_i2c.h:153</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_gaf2e7d2762e4ee3d41a8a18cd7ee7dc4f"><div class="ttname"><a href="group__I2C__Private__Functions.html#gaf2e7d2762e4ee3d41a8a18cd7ee7dc4f">I2C_WaitOnRXNEFlagUntilTimeout</a></div><div class="ttdeci">static HAL_StatusTypeDef I2C_WaitOnRXNEFlagUntilTimeout(I2C_HandleTypeDef *hi2c, uint32_t Timeout, uint32_t Tickstart)</div><div class="ttdoc">This function handles I2C Communication Timeout for specific usage of RXNE flag.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l06182">stm32l4xx_hal_i2c.c:6182</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga353afee454a18bdfcd90cb9187bc0f57"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga353afee454a18bdfcd90cb9187bc0f57">I2C_RequestMemoryWrite</a></div><div class="ttdeci">static HAL_StatusTypeDef I2C_RequestMemoryWrite(I2C_HandleTypeDef *hi2c, uint16_t DevAddress, uint16_t MemAddress, uint16_t MemAddSize, uint32_t Timeout, uint32_t Tickstart)</div><div class="ttdoc">Master sends target device address followed by internal memory address for write request.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l05123">stm32l4xx_hal_i2c.c:5123</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga2b23ae77e9ce099e35aaa5e9e0daba7b"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a></div><div class="ttdeci">assert_param(IS_RTC_WAKEUP_CLOCK(WakeUpClock))</div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga2536f90a4eb756afb8f882f0b40f589d"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga2536f90a4eb756afb8f882f0b40f589d">I2C_TransferConfig</a></div><div class="ttdeci">static void I2C_TransferConfig(I2C_HandleTypeDef *hi2c, uint16_t DevAddress, uint8_t Size, uint32_t Mode, uint32_t Request)</div><div class="ttdoc">Handles I2Cx communication when starting transfer or during transfer (TC or TCR flag are set).</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l06313">stm32l4xx_hal_i2c.c:6313</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a1b8a62241b4c22d97af542186cef0c39"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a1b8a62241b4c22d97af542186cef0c39">__I2C_HandleTypeDef::XferSize</a></div><div class="ttdeci">uint16_t XferSize</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00194">stm32l4xx_hal_i2c.h:194</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a080380e6051dd88c3a88c24aad4b10c0"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a080380e6051dd88c3a88c24aad4b10c0">__I2C_HandleTypeDef::Instance</a></div><div class="ttdeci">I2C_TypeDef * Instance</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00188">stm32l4xx_hal_i2c.h:188</a></div></div>
<div class="ttc" id="agroup__HAL__mode__structure__definition_html_ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71"><div class="ttname"><a href="group__HAL__mode__structure__definition.html#ggabcbb7b844f2ffd63c4e530c117882062a98c8fd642b7ac45a23479bd597fc7a71">HAL_I2C_MODE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00150">stm32l4xx_hal_i2c.h:150</a></div></div>
<div class="ttc" id="agroup__I2C__handle__Structure__definition_html_a8e665bc833889975a33b10bebeab5db2"><div class="ttname"><a href="group__I2C__handle__Structure__definition.html#a8e665bc833889975a33b10bebeab5db2">__I2C_HandleTypeDef::Init</a></div><div class="ttdeci">I2C_InitTypeDef Init</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8h_source.html#l00190">stm32l4xx_hal_i2c.h:190</a></div></div>
<div class="ttc" id="agroup__I2C__Private__Functions_html_ga4d8884ddbff87c30c7863baf4fced26f"><div class="ttname"><a href="group__I2C__Private__Functions.html#ga4d8884ddbff87c30c7863baf4fced26f">I2C_DMASlaveReceiveCplt</a></div><div class="ttdeci">static void I2C_DMASlaveReceiveCplt(DMA_HandleTypeDef *hdma)</div><div class="ttdoc">DMA I2C slave receive process complete callback.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__i2c_8c_source.html#l05996">stm32l4xx_hal_i2c.c:5996</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
