<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32L4xx_HAL_Driver: DCMI Private Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32L4xx_HAL_Driver
   &#160;<span id="projectnumber">1.14.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__DCMI__Private__Functions.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DCMI Private Functions<div class="ingroups"><a class="el" href="group__STM32L4xx__HAL__Driver.html">STM32L4xx_HAL_Driver</a> &raquo; <a class="el" href="group__DCMI.html">DCMI</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga406e08e8924a5306163ddebe2c47fca5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DCMI__Private__Functions.html#ga406e08e8924a5306163ddebe2c47fca5">DCMI_DMAXferCplt</a> (<a class="el" href="stm32l4xx__hal__dma_8h.html#a41b754a906b86bce54dc79938970138b">DMA_HandleTypeDef</a> *hdma)</td></tr>
<tr class="memdesc:ga406e08e8924a5306163ddebe2c47fca5"><td class="mdescLeft">&#160;</td><td class="mdescRight">DMA conversion complete callback.  <a href="group__DCMI__Private__Functions.html#ga406e08e8924a5306163ddebe2c47fca5">More...</a><br /></td></tr>
<tr class="separator:ga406e08e8924a5306163ddebe2c47fca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b22a9aff744008e302c56acc072e9b9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DCMI__Private__Functions.html#ga2b22a9aff744008e302c56acc072e9b9">DCMI_DMAHalfXferCplt</a> (<a class="el" href="stm32l4xx__hal__dma_8h.html#a41b754a906b86bce54dc79938970138b">DMA_HandleTypeDef</a> *hdma)</td></tr>
<tr class="memdesc:ga2b22a9aff744008e302c56acc072e9b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">DMA Half Transfer complete callback.  <a href="group__DCMI__Private__Functions.html#ga2b22a9aff744008e302c56acc072e9b9">More...</a><br /></td></tr>
<tr class="separator:ga2b22a9aff744008e302c56acc072e9b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16af48be52f4190472b4f4c3dc9b4969"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DCMI__Private__Functions.html#ga16af48be52f4190472b4f4c3dc9b4969">DCMI_DMAError</a> (<a class="el" href="stm32l4xx__hal__dma_8h.html#a41b754a906b86bce54dc79938970138b">DMA_HandleTypeDef</a> *hdma)</td></tr>
<tr class="memdesc:ga16af48be52f4190472b4f4c3dc9b4969"><td class="mdescLeft">&#160;</td><td class="mdescRight">DMA error callback.  <a href="group__DCMI__Private__Functions.html#ga16af48be52f4190472b4f4c3dc9b4969">More...</a><br /></td></tr>
<tr class="separator:ga16af48be52f4190472b4f4c3dc9b4969"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87a69af72a9446930e21f6e93f8c7cde"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DCMI__Private__Functions.html#ga87a69af72a9446930e21f6e93f8c7cde">DCMI_TransferSize</a> (uint32_t InputSize)</td></tr>
<tr class="memdesc:ga87a69af72a9446930e21f6e93f8c7cde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sub-buffers transfer size computation.  <a href="group__DCMI__Private__Functions.html#ga87a69af72a9446930e21f6e93f8c7cde">More...</a><br /></td></tr>
<tr class="separator:ga87a69af72a9446930e21f6e93f8c7cde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga16af48be52f4190472b4f4c3dc9b4969"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16af48be52f4190472b4f4c3dc9b4969">&#9670;&nbsp;</a></span>DCMI_DMAError()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void DCMI_DMAError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__dma_8h.html#a41b754a906b86bce54dc79938970138b">DMA_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hdma</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>DMA error callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdma</td><td>pointer to a DMA_HandleTypeDef structure that contains the configuration information for the specified DMA module. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__dcmi_8c_source.html#l01407">1407</a> of file <a class="el" href="stm32l4xx__hal__dcmi_8c_source.html">stm32l4xx_hal_dcmi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;{</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <a class="code" href="struct____DCMI__HandleTypeDef.html">DCMI_HandleTypeDef</a>* hdcmi = ( <a class="code" href="struct____DCMI__HandleTypeDef.html">DCMI_HandleTypeDef</a>* )((<a class="code" href="struct____DMA__HandleTypeDef.html">DMA_HandleTypeDef</a>* )hdma)-&gt;Parent;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160; </div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="comment">/* Update error code */</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#acf86ec607622559c317db5eab82f1f60">ErrorCode</a> |= HAL_DCMI_ERROR_DMA;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="comment">/* Change DCMI state */</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#ab5c92e3b5a158655d25b5c24ce6cb15e">State</a> = <a class="code" href="stm32l4xx__hal__dcmi_8h.html#ad6cefe1fb862d769f711f2fccb305e4fa13566a4f7201a3d35128b0ccf8b52fcb">HAL_DCMI_STATE_READY</a>;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="comment">/* DCMI error Callback */</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="preprocessor">#if (USE_HAL_DCMI_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <span class="comment">/*Call registered DCMI error callback*/</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a422975a3a7fb794a548317813f5ed68e">ErrorCallback</a>(hdcmi);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <a class="code" href="group__DCMI__Exported__Functions__Group2.html#gad6bc5814938fa96578b0e61dbaa8a518">HAL_DCMI_ErrorCallback</a>(hdcmi);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_DCMI_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2b22a9aff744008e302c56acc072e9b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b22a9aff744008e302c56acc072e9b9">&#9670;&nbsp;</a></span>DCMI_DMAHalfXferCplt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void DCMI_DMAHalfXferCplt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__dma_8h.html#a41b754a906b86bce54dc79938970138b">DMA_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hdma</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>DMA Half Transfer complete callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdma</td><td>pointer to a DMA_HandleTypeDef structure that contains the configuration information for the specified DMA module. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>When the size of the frame being captured by the DCMI peripheral is larger than 0xFFFF (DMA maximum transfer length), this API initiates another DMA transfer to copy the first half of the work buffer associated to the DCMI handle to the final destination buffer. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__dcmi_8c_source.html#l01349">1349</a> of file <a class="el" href="stm32l4xx__hal__dcmi_8c_source.html">stm32l4xx_hal_dcmi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;{</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  uint32_t loop_length;     <span class="comment">/* transfer length  */</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  uint32_t * tmpBuffer_Dest;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  uint32_t * tmpBuffer_Orig;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <a class="code" href="struct____DCMI__HandleTypeDef.html">DCMI_HandleTypeDef</a>* hdcmi = ( <a class="code" href="struct____DCMI__HandleTypeDef.html">DCMI_HandleTypeDef</a>* )((<a class="code" href="struct____DMA__HandleTypeDef.html">DMA_HandleTypeDef</a>* )hdma)-&gt;Parent;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160; </div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="keywordflow">if</span>(hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a95265288bfe65216fcd40d81185aadb4">XferCount</a> != 0U)</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="comment">/* Manage first half buffer copy in case of big transfer */</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160; </div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="comment">/* Decrement half-copies counter */</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a95265288bfe65216fcd40d81185aadb4">XferCount</a>--;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160; </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="comment">/* Point at DCMI final destination */</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    tmpBuffer_Dest = (uint32_t *)hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a04ed76f384b6db53acd48b58741a491e">pBuffPtr</a>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="comment">/* Point at DCMI circular buffer start */</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    tmpBuffer_Orig = (uint32_t *)hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a1a4095b0131b945af7050ca89669dba1">pCircularBuffer</a>;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="comment">/* copy half the buffer size */</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    loop_length = hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a39737bcac751eb45c08a45c35610fc1a">HalfCopyLength</a>;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="comment">/* Save next entry to write at next DMA transfer interruption */</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a04ed76f384b6db53acd48b58741a491e">pBuffPtr</a> += (uint32_t) loop_length*4U;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a8348e4570357664b85d4ed7711744f33">XferSize</a> -= hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a39737bcac751eb45c08a45c35610fc1a">HalfCopyLength</a>;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="comment">/* Data copy from work buffer to final destination buffer */</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="comment">/* Enable the DMA Channel */</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a3c522a10a4eabf6cc8243c224cf3ef96">DMAM2M_Handle</a>, (uint32_t) tmpBuffer_Orig, (uint32_t) tmpBuffer_Dest, loop_length) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="comment">/* Update error code */</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#acf86ec607622559c317db5eab82f1f60">ErrorCode</a> |= HAL_DCMI_ERROR_DMA;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="comment">/* Change DCMI state */</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#ab5c92e3b5a158655d25b5c24ce6cb15e">State</a> = <a class="code" href="stm32l4xx__hal__dcmi_8h.html#ad6cefe1fb862d769f711f2fccb305e4fa13566a4f7201a3d35128b0ccf8b52fcb">HAL_DCMI_STATE_READY</a>;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160; </div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hdcmi);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160; </div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <span class="comment">/* DCMI error Callback */</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="preprocessor">#if (USE_HAL_DCMI_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <span class="comment">/*Call registered DCMI error callback*/</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a422975a3a7fb794a548317813f5ed68e">ErrorCallback</a>(hdcmi);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      <a class="code" href="group__DCMI__Exported__Functions__Group2.html#gad6bc5814938fa96578b0e61dbaa8a518">HAL_DCMI_ErrorCallback</a>(hdcmi);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_DCMI_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    }</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga406e08e8924a5306163ddebe2c47fca5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga406e08e8924a5306163ddebe2c47fca5">&#9670;&nbsp;</a></span>DCMI_DMAXferCplt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void DCMI_DMAXferCplt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__dma_8h.html#a41b754a906b86bce54dc79938970138b">DMA_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hdma</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>DMA conversion complete callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdma</td><td>pointer to a DMA_HandleTypeDef structure that contains the configuration information for the specified DMA module. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>When the size of the frame being captured by the DCMI peripheral is larger than 0xFFFF (DMA maximum transfer length), this API initiates another DMA transfer to copy the second half of the work buffer associated to the DCMI handle to the final destination buffer. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__dcmi_8c_source.html#l01248">1248</a> of file <a class="el" href="stm32l4xx__hal__dcmi_8c_source.html">stm32l4xx_hal_dcmi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;{</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  uint32_t loop_length;     <span class="comment">/* transfer length  */</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  uint32_t * tmpBuffer_Dest;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  uint32_t * tmpBuffer_Orig;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  uint32_t temp;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <a class="code" href="struct____DCMI__HandleTypeDef.html">DCMI_HandleTypeDef</a>* hdcmi = ( <a class="code" href="struct____DCMI__HandleTypeDef.html">DCMI_HandleTypeDef</a>* )((<a class="code" href="struct____DMA__HandleTypeDef.html">DMA_HandleTypeDef</a>* )hdma)-&gt;Parent;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordflow">if</span>(hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a95265288bfe65216fcd40d81185aadb4">XferCount</a> != 0U)</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <span class="comment">/* Manage second half buffer copy in case of big transfer */</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="comment">/* Decrement half-copies counter */</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a95265288bfe65216fcd40d81185aadb4">XferCount</a>--;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="comment">/* Point at DCMI final destination */</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    tmpBuffer_Dest = (uint32_t *)hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a04ed76f384b6db53acd48b58741a491e">pBuffPtr</a>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="comment">/* Point at DCMI circular buffer mid-location */</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    tmpBuffer_Orig = (uint32_t *)hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a1a4095b0131b945af7050ca89669dba1">pCircularBuffer</a>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    temp = (uint32_t) (tmpBuffer_Orig);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    temp += hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a39737bcac751eb45c08a45c35610fc1a">HalfCopyLength</a>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    tmpBuffer_Orig = (uint32_t *) temp;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="comment">/* copy half the buffer size */</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    loop_length = hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a39737bcac751eb45c08a45c35610fc1a">HalfCopyLength</a>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="comment">/* Save next entry to write at next half DMA transfer interruption */</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a04ed76f384b6db53acd48b58741a491e">pBuffPtr</a> += (uint32_t) loop_length*4U;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a8348e4570357664b85d4ed7711744f33">XferSize</a> -= hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a39737bcac751eb45c08a45c35610fc1a">HalfCopyLength</a>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="comment">/* Data copy from work buffer to final destination buffer */</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="comment">/* Enable the DMA Channel */</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a3c522a10a4eabf6cc8243c224cf3ef96">DMAM2M_Handle</a>, (uint32_t) tmpBuffer_Orig, (uint32_t) tmpBuffer_Dest, loop_length) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    {</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="comment">/* Update error code */</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#acf86ec607622559c317db5eab82f1f60">ErrorCode</a> |= HAL_DCMI_ERROR_DMA;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160; </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <span class="comment">/* Change DCMI state */</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#ab5c92e3b5a158655d25b5c24ce6cb15e">State</a> = <a class="code" href="stm32l4xx__hal__dcmi_8h.html#ad6cefe1fb862d769f711f2fccb305e4fa13566a4f7201a3d35128b0ccf8b52fcb">HAL_DCMI_STATE_READY</a>;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hdcmi);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="comment">/* DCMI error Callback */</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="preprocessor">#if (USE_HAL_DCMI_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="comment">/*Call registered DCMI error callback*/</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a422975a3a7fb794a548317813f5ed68e">ErrorCallback</a>(hdcmi);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <a class="code" href="group__DCMI__Exported__Functions__Group2.html#gad6bc5814938fa96578b0e61dbaa8a518">HAL_DCMI_ErrorCallback</a>(hdcmi);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_DCMI_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    }</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="comment">/* if End of frame IT is disabled */</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">if</span>((hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a37da5da740fb55705686c6b2c0f812b2">Instance</a>-&gt;IER &amp; DCMI_IT_FRAME) == 0x0U)</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="comment">/* If End of Frame flag is set */</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="keywordflow">if</span>(__HAL_DCMI_GET_FLAG(hdcmi, (uint32_t)DCMI_FLAG_FRAMERI) != 0x0UL)</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="comment">/* Clear the End of Frame flag */</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        __HAL_DCMI_CLEAR_FLAG(hdcmi, DCMI_FLAG_FRAMERI);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160; </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="comment">/* When snapshot mode, disable Vsync, Error and Overrun interrupts */</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">if</span>((hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a37da5da740fb55705686c6b2c0f812b2">Instance</a>-&gt;CR &amp; DCMI_CR_CM) == DCMI_MODE_SNAPSHOT)</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;          <span class="comment">/* Disable the Vsync, Error and Overrun interrupts */</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;          __HAL_DCMI_DISABLE_IT(hdcmi, DCMI_IT_LINE | DCMI_IT_VSYNC | DCMI_IT_ERR | DCMI_IT_OVR);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;          hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#ab5c92e3b5a158655d25b5c24ce6cb15e">State</a> = <a class="code" href="stm32l4xx__hal__dcmi_8h.html#ad6cefe1fb862d769f711f2fccb305e4fa13566a4f7201a3d35128b0ccf8b52fcb">HAL_DCMI_STATE_READY</a>;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;          <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;          <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hdcmi);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <span class="comment">/* Frame Event Callback */</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="preprocessor">#if (USE_HAL_DCMI_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="comment">/*Call registered DCMI frame event callback*/</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        hdcmi-&gt;<a class="code" href="struct____DCMI__HandleTypeDef.html#a015469d895da907dacabc2e240644835">FrameEventCallback</a>(hdcmi);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <a class="code" href="group__DCMI__Exported__Functions__Group2.html#gafd05b99a90e255299ce7fd834b5862b7">HAL_DCMI_FrameEventCallback</a>(hdcmi);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_DCMI_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    }</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  }</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga87a69af72a9446930e21f6e93f8c7cde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87a69af72a9446930e21f6e93f8c7cde">&#9670;&nbsp;</a></span>DCMI_TransferSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t DCMI_TransferSize </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>InputSize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sub-buffers transfer size computation. </p>
<dl class="section note"><dt>Note</dt><dd>In the case of a frame size larger than the maximum DMA transfer length (0xFFFF), the tranfer from DCMI DR register to the final output buffer is carried out by a sequence of intermediate sub-copies to temporary buffers of size less than 0xFFFF. To optimize the number of DMA transfers, the API computes the temporary buffer size so that the latter is an even number less than 0xFFFF, that divides the final buffer size and is as high as possible. The API implements a sub-optimum solution for complexity's sake. </dd>
<dd>
InputSize MUST be even. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">InputSize</td><td>full buffer size (in 32-bit words) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Transfer</td><td>size (in 32-bit words) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__dcmi_8c_source.html#l01439">1439</a> of file <a class="el" href="stm32l4xx__hal__dcmi_8c_source.html">stm32l4xx_hal_dcmi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;{</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  uint32_t j = 1;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  uint32_t temp = InputSize;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  uint32_t aPrime[NPRIME] = {0};</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  uint32_t output = 2; <span class="comment">/* Want a result which is an even number */</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  uint32_t PrimeArray[NPRIME] = { 1UL,  2UL,  3UL,  5UL,</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                                7UL, 11UL, 13UL, 17UL,</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                               19UL, 23UL, 29UL, 31UL,</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                               37UL, 41UL, 43UL, 47UL};</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160; </div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="comment">/* Develop InputSize in product of prime numbers */</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160; </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="keywordflow">while</span> (j &lt; NPRIME)</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">if</span> (temp &lt; PrimeArray[j])</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    }</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordflow">while</span> ((temp % PrimeArray[j]) == 0U)</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      aPrime[j]++;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      temp /= PrimeArray[j];</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    j++;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  }</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">/*  Search for the biggest even divisor less or equal to 0xFFFE = 65534 */</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  aPrime[1] -= 1U; <span class="comment">/* output is initialized to 2, so don&#39;t count dividor 2 twice */</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;   <span class="comment">/*  The algorithm below yields a sub-optimal solution</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment">       but in an acceptable time.  */</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    j =  NPRIME-1U;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">while</span> ((j &gt; 0U) &amp;&amp;  (output &lt;= 0xFFFEU))</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  {</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">while</span> (aPrime[j] &gt; 0U)</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    {</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      <span class="keywordflow">if</span> ((output * PrimeArray[j]) &gt; 0xFFFEU)</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      {</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      }</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      {</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        output *= PrimeArray[j];</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        aPrime[j]--;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    }</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    j--;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  }</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160; </div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="keywordflow">return</span> output;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__DCMI__Exported__Functions__Group2_html_gafd05b99a90e255299ce7fd834b5862b7"><div class="ttname"><a href="group__DCMI__Exported__Functions__Group2.html#gafd05b99a90e255299ce7fd834b5862b7">HAL_DCMI_FrameEventCallback</a></div><div class="ttdeci">void HAL_DCMI_FrameEventCallback(DCMI_HandleTypeDef *hdcmi)</div><div class="ttdoc">Frame Event callback.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8c_source.html#l00861">stm32l4xx_hal_dcmi.c:861</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga3feac430acb1b5e74ad139639f3af9ca"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a></div><div class="ttdeci">__HAL_UNLOCK(hrtc)</div></div>
<div class="ttc" id="astruct____DMA__HandleTypeDef_html"><div class="ttname"><a href="struct____DMA__HandleTypeDef.html">__DMA_HandleTypeDef</a></div><div class="ttdoc">DMA handle Structure definition.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dma_8h_source.html#l00113">stm32l4xx_hal_dma.h:113</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_acf86ec607622559c317db5eab82f1f60"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#acf86ec607622559c317db5eab82f1f60">__DCMI_HandleTypeDef::ErrorCode</a></div><div class="ttdeci">__IO uint32_t ErrorCode</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00151">stm32l4xx_hal_dcmi.h:151</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_a1a4095b0131b945af7050ca89669dba1"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#a1a4095b0131b945af7050ca89669dba1">__DCMI_HandleTypeDef::pCircularBuffer</a></div><div class="ttdeci">uint32_t pCircularBuffer</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00153">stm32l4xx_hal_dcmi.h:153</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_a8348e4570357664b85d4ed7711744f33"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#a8348e4570357664b85d4ed7711744f33">__DCMI_HandleTypeDef::XferSize</a></div><div class="ttdeci">__IO uint32_t XferSize</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00142">stm32l4xx_hal_dcmi.h:142</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga05dcbf41f5c5e42a592e9ad9e351391e"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a></div><div class="ttdeci">return HAL_OK</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__rtc__ex_8c_source.html#l00885">stm32l4xx_hal_rtc_ex.c:885</a></div></div>
<div class="ttc" id="agroup__DMA__Exported__Functions__Group2_html_ga7eddc0931ac8a3d77b23d6d5e68407c7"><div class="ttname"><a href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a></div><div class="ttdeci">HAL_StatusTypeDef HAL_DMA_Start_IT(DMA_HandleTypeDef *hdma, uint32_t SrcAddress, uint32_t DstAddress, uint32_t DataLength)</div><div class="ttdoc">Start the DMA Transfer with interrupt enabled.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dma_8c_source.html#l00473">stm32l4xx_hal_dma.c:473</a></div></div>
<div class="ttc" id="agroup__DCMI__Exported__Functions__Group2_html_gad6bc5814938fa96578b0e61dbaa8a518"><div class="ttname"><a href="group__DCMI__Exported__Functions__Group2.html#gad6bc5814938fa96578b0e61dbaa8a518">HAL_DCMI_ErrorCallback</a></div><div class="ttdeci">void HAL_DCMI_ErrorCallback(DCMI_HandleTypeDef *hdcmi)</div><div class="ttdoc">Error DCMI callback.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8c_source.html#l00813">stm32l4xx_hal_dcmi.c:813</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html">__DCMI_HandleTypeDef</a></div><div class="ttdoc">DCMI handle Structure definition.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00130">stm32l4xx_hal_dcmi.h:130</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_a37da5da740fb55705686c6b2c0f812b2"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#a37da5da740fb55705686c6b2c0f812b2">__DCMI_HandleTypeDef::Instance</a></div><div class="ttdeci">DCMI_TypeDef * Instance</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00132">stm32l4xx_hal_dcmi.h:132</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_a422975a3a7fb794a548317813f5ed68e"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#a422975a3a7fb794a548317813f5ed68e">__DCMI_HandleTypeDef::ErrorCallback</a></div><div class="ttdeci">void(* ErrorCallback)(struct __DCMI_HandleTypeDef *hdcmi)</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00163">stm32l4xx_hal_dcmi.h:163</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_a04ed76f384b6db53acd48b58741a491e"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#a04ed76f384b6db53acd48b58741a491e">__DCMI_HandleTypeDef::pBuffPtr</a></div><div class="ttdeci">uint32_t pBuffPtr</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00144">stm32l4xx_hal_dcmi.h:144</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_a015469d895da907dacabc2e240644835"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#a015469d895da907dacabc2e240644835">__DCMI_HandleTypeDef::FrameEventCallback</a></div><div class="ttdeci">void(* FrameEventCallback)(struct __DCMI_HandleTypeDef *hdcmi)</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00160">stm32l4xx_hal_dcmi.h:160</a></div></div>
<div class="ttc" id="astm32l4xx__hal__dcmi_8h_html_ad6cefe1fb862d769f711f2fccb305e4fa13566a4f7201a3d35128b0ccf8b52fcb"><div class="ttname"><a href="stm32l4xx__hal__dcmi_8h.html#ad6cefe1fb862d769f711f2fccb305e4fa13566a4f7201a3d35128b0ccf8b52fcb">HAL_DCMI_STATE_READY</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00119">stm32l4xx_hal_dcmi.h:119</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_ab5c92e3b5a158655d25b5c24ce6cb15e"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#ab5c92e3b5a158655d25b5c24ce6cb15e">__DCMI_HandleTypeDef::State</a></div><div class="ttdeci">__IO HAL_DCMI_StateTypeDef State</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00138">stm32l4xx_hal_dcmi.h:138</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_a3c522a10a4eabf6cc8243c224cf3ef96"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#a3c522a10a4eabf6cc8243c224cf3ef96">__DCMI_HandleTypeDef::DMAM2M_Handle</a></div><div class="ttdeci">DMA_HandleTypeDef * DMAM2M_Handle</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00148">stm32l4xx_hal_dcmi.h:148</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_a39737bcac751eb45c08a45c35610fc1a"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#a39737bcac751eb45c08a45c35610fc1a">__DCMI_HandleTypeDef::HalfCopyLength</a></div><div class="ttdeci">uint32_t HalfCopyLength</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00156">stm32l4xx_hal_dcmi.h:156</a></div></div>
<div class="ttc" id="astruct____DCMI__HandleTypeDef_html_a95265288bfe65216fcd40d81185aadb4"><div class="ttname"><a href="struct____DCMI__HandleTypeDef.html#a95265288bfe65216fcd40d81185aadb4">__DCMI_HandleTypeDef::XferCount</a></div><div class="ttdeci">__IO uint32_t XferCount</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dcmi_8h_source.html#l00140">stm32l4xx_hal_dcmi.h:140</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
