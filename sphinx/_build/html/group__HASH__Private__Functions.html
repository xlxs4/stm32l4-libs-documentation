<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32L4xx_HAL_Driver: HASH Private Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32L4xx_HAL_Driver
   &#160;<span id="projectnumber">1.14.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__HASH__Private__Functions.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">HASH Private Functions<div class="ingroups"><a class="el" href="group__STM32L4xx__HAL__Driver.html">STM32L4xx_HAL_Driver</a> &raquo; <a class="el" href="group__HASH.html">HASH</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8aed245a16324ce32bf3bdb7325ab661"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#ga8aed245a16324ce32bf3bdb7325ab661">HASH_Start</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint8_t *pInBuffer, uint32_t Size, uint8_t *pOutBuffer, uint32_t Timeout, uint32_t Algorithm)</td></tr>
<tr class="memdesc:ga8aed245a16324ce32bf3bdb7325ab661"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the HASH peripheral, next process pInBuffer then read the computed digest.  <a href="group__HASH__Private__Functions.html#ga8aed245a16324ce32bf3bdb7325ab661">More...</a><br /></td></tr>
<tr class="separator:ga8aed245a16324ce32bf3bdb7325ab661"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a03d73310950512692fd0a298e44a8c"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#ga7a03d73310950512692fd0a298e44a8c">HASH_Accumulate</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint8_t *pInBuffer, uint32_t Size, uint32_t Algorithm)</td></tr>
<tr class="memdesc:ga7a03d73310950512692fd0a298e44a8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">If not already done, initialize the HASH peripheral then processes pInBuffer.  <a href="group__HASH__Private__Functions.html#ga7a03d73310950512692fd0a298e44a8c">More...</a><br /></td></tr>
<tr class="separator:ga7a03d73310950512692fd0a298e44a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac8850192de1c9b4b42b0c651d73eaec"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#gaac8850192de1c9b4b42b0c651d73eaec">HASH_Accumulate_IT</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint8_t *pInBuffer, uint32_t Size, uint32_t Algorithm)</td></tr>
<tr class="memdesc:gaac8850192de1c9b4b42b0c651d73eaec"><td class="mdescLeft">&#160;</td><td class="mdescRight">If not already done, initialize the HASH peripheral then processes pInBuffer in interruption mode.  <a href="group__HASH__Private__Functions.html#gaac8850192de1c9b4b42b0c651d73eaec">More...</a><br /></td></tr>
<tr class="separator:gaac8850192de1c9b4b42b0c651d73eaec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaafebb88589aacaaf93095c0f3463ea5f"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#gaafebb88589aacaaf93095c0f3463ea5f">HASH_Start_IT</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint8_t *pInBuffer, uint32_t Size, uint8_t *pOutBuffer, uint32_t Algorithm)</td></tr>
<tr class="memdesc:gaafebb88589aacaaf93095c0f3463ea5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the HASH peripheral, next process pInBuffer then read the computed digest in interruption mode.  <a href="group__HASH__Private__Functions.html#gaafebb88589aacaaf93095c0f3463ea5f">More...</a><br /></td></tr>
<tr class="separator:gaafebb88589aacaaf93095c0f3463ea5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8311acfb094828b3554c121c46e372c1"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#ga8311acfb094828b3554c121c46e372c1">HASH_Start_DMA</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint8_t *pInBuffer, uint32_t Size, uint32_t Algorithm)</td></tr>
<tr class="memdesc:ga8311acfb094828b3554c121c46e372c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the HASH peripheral then initiate a DMA transfer to feed the input buffer to the Peripheral.  <a href="group__HASH__Private__Functions.html#ga8311acfb094828b3554c121c46e372c1">More...</a><br /></td></tr>
<tr class="separator:ga8311acfb094828b3554c121c46e372c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa4e2c57d2a0df411ca64fec87b4bcd9b"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#gaa4e2c57d2a0df411ca64fec87b4bcd9b">HASH_Finish</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint8_t *pOutBuffer, uint32_t Timeout)</td></tr>
<tr class="memdesc:gaa4e2c57d2a0df411ca64fec87b4bcd9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the computed digest.  <a href="group__HASH__Private__Functions.html#gaa4e2c57d2a0df411ca64fec87b4bcd9b">More...</a><br /></td></tr>
<tr class="separator:gaa4e2c57d2a0df411ca64fec87b4bcd9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6cec06e5eb56b09e0fefe2fc54ffc819"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#ga6cec06e5eb56b09e0fefe2fc54ffc819">HMAC_Start</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint8_t *pInBuffer, uint32_t Size, uint8_t *pOutBuffer, uint32_t Timeout, uint32_t Algorithm)</td></tr>
<tr class="memdesc:ga6cec06e5eb56b09e0fefe2fc54ffc819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the HASH peripheral in HMAC mode, next process pInBuffer then read the computed digest.  <a href="group__HASH__Private__Functions.html#ga6cec06e5eb56b09e0fefe2fc54ffc819">More...</a><br /></td></tr>
<tr class="separator:ga6cec06e5eb56b09e0fefe2fc54ffc819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafcdc28a74ed5cc2649816d06f6443bac"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#gafcdc28a74ed5cc2649816d06f6443bac">HMAC_Start_IT</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint8_t *pInBuffer, uint32_t Size, uint8_t *pOutBuffer, uint32_t Algorithm)</td></tr>
<tr class="memdesc:gafcdc28a74ed5cc2649816d06f6443bac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the HASH peripheral in HMAC mode, next process pInBuffer then read the computed digest in interruption mode.  <a href="group__HASH__Private__Functions.html#gafcdc28a74ed5cc2649816d06f6443bac">More...</a><br /></td></tr>
<tr class="separator:gafcdc28a74ed5cc2649816d06f6443bac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac92bee79690b39d05bacf362ef1b7c81"><td class="memItemLeft" align="right" valign="top">HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#gac92bee79690b39d05bacf362ef1b7c81">HMAC_Start_DMA</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint8_t *pInBuffer, uint32_t Size, uint32_t Algorithm)</td></tr>
<tr class="memdesc:gac92bee79690b39d05bacf362ef1b7c81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the HASH peripheral in HMAC mode then initiate the required DMA transfers to feed the key and the input buffer to the Peripheral.  <a href="group__HASH__Private__Functions.html#gac92bee79690b39d05bacf362ef1b7c81">More...</a><br /></td></tr>
<tr class="separator:gac92bee79690b39d05bacf362ef1b7c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c83f5e68eebaad2703af4ccc4243ca9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#ga1c83f5e68eebaad2703af4ccc4243ca9">HASH_DMAXferCplt</a> (<a class="el" href="stm32l4xx__hal__dma_8h.html#a41b754a906b86bce54dc79938970138b">DMA_HandleTypeDef</a> *hdma)</td></tr>
<tr class="memdesc:ga1c83f5e68eebaad2703af4ccc4243ca9"><td class="mdescLeft">&#160;</td><td class="mdescRight">DMA HASH Input Data transfer completion callback.  <a href="group__HASH__Private__Functions.html#ga1c83f5e68eebaad2703af4ccc4243ca9">More...</a><br /></td></tr>
<tr class="separator:ga1c83f5e68eebaad2703af4ccc4243ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf56ba2cfed548146deed64cd67bba65"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#gabf56ba2cfed548146deed64cd67bba65">HASH_DMAError</a> (<a class="el" href="stm32l4xx__hal__dma_8h.html#a41b754a906b86bce54dc79938970138b">DMA_HandleTypeDef</a> *hdma)</td></tr>
<tr class="memdesc:gabf56ba2cfed548146deed64cd67bba65"><td class="mdescLeft">&#160;</td><td class="mdescRight">DMA HASH communication error callback.  <a href="group__HASH__Private__Functions.html#gabf56ba2cfed548146deed64cd67bba65">More...</a><br /></td></tr>
<tr class="separator:gabf56ba2cfed548146deed64cd67bba65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e645606af2ada5cc3c9ef7a37f3df5f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#ga2e645606af2ada5cc3c9ef7a37f3df5f">HASH_GetDigest</a> (uint8_t *pMsgDigest, uint8_t Size)</td></tr>
<tr class="memdesc:ga2e645606af2ada5cc3c9ef7a37f3df5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the message digest.  <a href="group__HASH__Private__Functions.html#ga2e645606af2ada5cc3c9ef7a37f3df5f">More...</a><br /></td></tr>
<tr class="separator:ga2e645606af2ada5cc3c9ef7a37f3df5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d26771f27ab8873c97479dcc7296b10"><td class="memItemLeft" align="right" valign="top">static HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#ga2d26771f27ab8873c97479dcc7296b10">HASH_WaitOnFlagUntilTimeout</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint32_t Flag, FlagStatus Status, uint32_t Timeout)</td></tr>
<tr class="memdesc:ga2d26771f27ab8873c97479dcc7296b10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle HASH processing Timeout.  <a href="group__HASH__Private__Functions.html#ga2d26771f27ab8873c97479dcc7296b10">More...</a><br /></td></tr>
<tr class="separator:ga2d26771f27ab8873c97479dcc7296b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga773e202be8d07bb74066061b1686bc24"><td class="memItemLeft" align="right" valign="top">static HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#ga773e202be8d07bb74066061b1686bc24">HASH_WriteData</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint8_t *pInBuffer, uint32_t Size)</td></tr>
<tr class="memdesc:ga773e202be8d07bb74066061b1686bc24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Feed the input buffer to the HASH Peripheral.  <a href="group__HASH__Private__Functions.html#ga773e202be8d07bb74066061b1686bc24">More...</a><br /></td></tr>
<tr class="separator:ga773e202be8d07bb74066061b1686bc24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa16c48ee23f4d0e7ae103a3ec2e8cb4e"><td class="memItemLeft" align="right" valign="top">static HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#gaa16c48ee23f4d0e7ae103a3ec2e8cb4e">HASH_IT</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash)</td></tr>
<tr class="memdesc:gaa16c48ee23f4d0e7ae103a3ec2e8cb4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">HASH processing in interruption mode.  <a href="group__HASH__Private__Functions.html#gaa16c48ee23f4d0e7ae103a3ec2e8cb4e">More...</a><br /></td></tr>
<tr class="separator:gaa16c48ee23f4d0e7ae103a3ec2e8cb4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18717c6def7b9e0cef0fa23c2d2ceff2"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#ga18717c6def7b9e0cef0fa23c2d2ceff2">HASH_Write_Block_Data</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash)</td></tr>
<tr class="memdesc:ga18717c6def7b9e0cef0fa23c2d2ceff2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a block of data in HASH Peripheral in interruption mode.  <a href="group__HASH__Private__Functions.html#ga18717c6def7b9e0cef0fa23c2d2ceff2">More...</a><br /></td></tr>
<tr class="separator:ga18717c6def7b9e0cef0fa23c2d2ceff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga625f50b7143fd5430f4eab8ce922168e"><td class="memItemLeft" align="right" valign="top">static HAL_StatusTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH__Private__Functions.html#ga625f50b7143fd5430f4eab8ce922168e">HMAC_Processing</a> (<a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *hhash, uint32_t Timeout)</td></tr>
<tr class="memdesc:ga625f50b7143fd5430f4eab8ce922168e"><td class="mdescLeft">&#160;</td><td class="mdescRight">HMAC processing in polling mode.  <a href="group__HASH__Private__Functions.html#ga625f50b7143fd5430f4eab8ce922168e">More...</a><br /></td></tr>
<tr class="separator:ga625f50b7143fd5430f4eab8ce922168e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga7a03d73310950512692fd0a298e44a8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7a03d73310950512692fd0a298e44a8c">&#9670;&nbsp;</a></span>HASH_Accumulate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HASH_Accumulate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pInBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Algorithm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If not already done, initialize the HASH peripheral then processes pInBuffer. </p>
<dl class="section note"><dt>Note</dt><dd>Field hhash-&gt;Phase of HASH handle is tested to check whether or not the Peripheral has already been initialized. </dd>
<dd>
The input buffer size (in bytes) must be a multiple of 4 otherwise, the HASH digest computation is corrupted. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">pInBuffer</td><td>pointer to the input buffer (buffer to be hashed). </td></tr>
    <tr><td class="paramname">Size</td><td>length of the input buffer in bytes, must be a multiple of 4. </td></tr>
    <tr><td class="paramname">Algorithm</td><td>HASH algorithm. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l02474">2474</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;{</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  uint8_t *pInBuffer_tmp;   <span class="comment">/* input data address, input parameter of HASH_WriteData()         */</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  uint32_t Size_tmp;  <span class="comment">/* input data size (in bytes), input parameter of HASH_WriteData() */</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188">HAL_HASH_StateTypeDef</a> State_tmp = hhash-&gt;State;</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160; </div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  <span class="comment">/* Make sure the input buffer size (in bytes) is a multiple of 4 */</span></div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="keywordflow">if</span> ((Size % 4U) != 0U)</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  {</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  }</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160; </div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <span class="comment">/* Initiate HASH processing in case of start or resumption */</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;<span class="keywordflow">if</span>((State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>) || (State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>))</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  {</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="comment">/* Check input parameters */</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <span class="keywordflow">if</span> ((pInBuffer == NULL) || (Size == 0U))</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    {</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    }</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; </div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;     <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hhash);</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160; </div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <span class="comment">/* If resuming the HASH processing */</span></div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;State == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>)</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    {</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160; </div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;      <span class="comment">/* Since this is resumption, pInBuffer_tmp and Size_tmp are not set</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="comment">         to the API input parameters but to those saved beforehand by HASH_WriteData()</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="comment">         when the processing was suspended */</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      pInBuffer_tmp = hhash-&gt;pHashInBuffPtr;  <span class="comment">/* pInBuffer_tmp is set to the input data address */</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      Size_tmp = hhash-&gt;HashInCount;          <span class="comment">/* Size_tmp contains the input data size in bytes */</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160; </div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    }</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    {</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160; </div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      <span class="comment">/* pInBuffer_tmp and Size_tmp are initialized to be used afterwards as</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;<span class="comment">         input parameters of HASH_WriteData() */</span></div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      pInBuffer_tmp = pInBuffer;    <span class="comment">/* pInBuffer_tmp is set to the input data address */</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;      Size_tmp = Size;              <span class="comment">/* Size_tmp contains the input data size in bytes */</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160; </div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;      <span class="comment">/* Check if initialization phase has already be performed */</span></div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;      <span class="keywordflow">if</span>(hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a>)</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;      {</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;        <span class="comment">/* Select the HASH algorithm, clear HMAC mode and long key selection bit, reset the HASH processor core */</span></div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_CR_INIT);</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      }</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160; </div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;      <span class="comment">/* Set the phase */</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;      hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a88c8f06870a194b274717cc285b56cb2">HAL_HASH_PHASE_PROCESS</a>;</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160; </div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    }</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160; </div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    <span class="comment">/* Write input buffer in Data register */</span></div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    hhash-&gt;Status = <a class="code" href="group__HASH__Private__Functions.html#ga773e202be8d07bb74066061b1686bc24">HASH_WriteData</a>(hhash, pInBuffer_tmp, Size_tmp);</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;Status != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    {</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;      <span class="keywordflow">return</span> hhash-&gt;Status;</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    }</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160; </div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    <span class="comment">/* If the process has not been suspended, move the state to Ready */</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;State != <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>)</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    {</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    }</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160; </div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160; </div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160; </div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  }</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  {</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  }</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160; </div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160; </div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gaac8850192de1c9b4b42b0c651d73eaec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac8850192de1c9b4b42b0c651d73eaec">&#9670;&nbsp;</a></span>HASH_Accumulate_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HASH_Accumulate_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pInBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Algorithm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If not already done, initialize the HASH peripheral then processes pInBuffer in interruption mode. </p>
<dl class="section note"><dt>Note</dt><dd>Field hhash-&gt;Phase of HASH handle is tested to check whether or not the Peripheral has already been initialized. </dd>
<dd>
The input buffer size (in bytes) must be a multiple of 4 otherwise, the HASH digest computation is corrupted. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">pInBuffer</td><td>pointer to the input buffer (buffer to be hashed). </td></tr>
    <tr><td class="paramname">Size</td><td>length of the input buffer in bytes, must be a multiple of 4. </td></tr>
    <tr><td class="paramname">Algorithm</td><td>HASH algorithm. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l02577">2577</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;{</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188">HAL_HASH_StateTypeDef</a> State_tmp = hhash-&gt;State;</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  __IO uint32_t inputaddr = (uint32_t) pInBuffer;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  uint32_t SizeVar = Size;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160; </div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;  <span class="comment">/* Make sure the input buffer size (in bytes) is a multiple of 4 */</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;  <span class="keywordflow">if</span> ((Size % 4U) != 0U)</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  {</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  }</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160; </div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <span class="comment">/* Initiate HASH processing in case of start or resumption */</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <span class="keywordflow">if</span>((State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>) || (State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>))</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    <span class="comment">/* Check input parameters */</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <span class="keywordflow">if</span> ((pInBuffer == NULL) || (Size == 0U))</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    {</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    }</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160; </div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;     <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hhash);</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160; </div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="comment">/* If resuming the HASH processing */</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;State == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>)</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    {</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    }</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    {</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160; </div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      <span class="comment">/* Check if initialization phase has already be performed */</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      <span class="keywordflow">if</span>(hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a>)</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;      {</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        <span class="comment">/* Select the HASH algorithm, clear HMAC mode and long key selection bit, reset the HASH processor core */</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_CR_INIT);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;        hhash-&gt;HashITCounter = 1;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;      }</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;      {</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;         hhash-&gt;HashITCounter = 3; <span class="comment">/* &#39;cruise-speed&#39; reached during a previous buffer processing */</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;      }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160; </div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;      <span class="comment">/* Set the phase */</span></div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;      hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a88c8f06870a194b274717cc285b56cb2">HAL_HASH_PHASE_PROCESS</a>;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160; </div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;      <span class="comment">/* If DINIS is equal to 0 (for example if an incomplete block has been previously</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;<span class="comment">       fed to the Peripheral), the DINIE interruption won&#39;t be triggered when DINIE is set.</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;<span class="comment">       Therefore, first words are manually entered until DINIS raises, or until there</span></div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="comment">       is not more data to enter. */</span></div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;      <span class="keywordflow">while</span>((!(__HAL_HASH_GET_FLAG(HASH_FLAG_DINIS))) &amp;&amp; (SizeVar &gt; 0U))</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;      {</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160; </div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;        <span class="comment">/* Write input data 4 bytes at a time */</span></div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;        HASH-&gt;DIN = *(uint32_t*)inputaddr;</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;        inputaddr+=4U;</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        SizeVar-=4U;</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      }</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160; </div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;      <span class="comment">/* If DINIS is still not set or if all the data have been fed, stop here */</span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;      <span class="keywordflow">if</span> ((!(__HAL_HASH_GET_FLAG(HASH_FLAG_DINIS))) || (SizeVar == 0U))</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;      {</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;        hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160; </div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        <span class="comment">/* Process Unlock */</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160; </div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;      }</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160; </div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;      <span class="comment">/* otherwise, carry on in interrupt-mode */</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;      hhash-&gt;HashInCount = SizeVar;               <span class="comment">/* Counter used to keep track of number of data</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;<span class="comment">                                                  to be fed to the Peripheral */</span></div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      hhash-&gt;pHashInBuffPtr = (uint8_t *)inputaddr;       <span class="comment">/* Points at data which will be fed to the Peripheral at</span></div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="comment">                                                  the next interruption */</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;     <span class="comment">/* In case of suspension, hhash-&gt;HashInCount and hhash-&gt;pHashInBuffPtr contain</span></div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="comment">        the information describing where the HASH process is stopped.</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;<span class="comment">        These variables are used later on to resume the HASH processing at the</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;<span class="comment">        correct location. */</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160; </div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    }</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160; </div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <span class="comment">/* Set multi buffers accumulation flag */</span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    hhash-&gt;Accumulation = 1U;</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160; </div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;    <span class="comment">/* Process Unlock */</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160; </div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="comment">/* Enable Data Input interrupt */</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    __HAL_HASH_ENABLE_IT(HASH_IT_DINI);</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160; </div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160; </div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;  }</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;  {</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;  }</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160; </div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gabf56ba2cfed548146deed64cd67bba65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf56ba2cfed548146deed64cd67bba65">&#9670;&nbsp;</a></span>HASH_DMAError()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HASH_DMAError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__dma_8h.html#a41b754a906b86bce54dc79938970138b">DMA_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hdma</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>DMA HASH communication error callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdma</td><td>DMA handle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="group__HASH__Private__Functions.html#gabf56ba2cfed548146deed64cd67bba65" title="DMA HASH communication error callback.">HASH_DMAError()</a> callback invokes <a class="el" href="group__HASH__Exported__Functions__Group1.html#gaf4f00ac21733c04343c230acce9227db" title="Error callback.">HAL_HASH_ErrorCallback()</a> that can contain user code to manage the error. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l01701">1701</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;{</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <a class="code" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a>* hhash = ( <a class="code" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a>* )((<a class="code" href="struct____DMA__HandleTypeDef.html">DMA_HandleTypeDef</a>* )hdma)-&gt;Parent;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160; </div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="keywordflow">if</span> (hhash-&gt;State != <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>)</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  {</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    hhash-&gt;ErrorCode |= HAL_HASH_ERROR_DMA;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="comment">/* Set HASH state to ready to prevent any blocking issue in user code</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment">       present in HAL_HASH_ErrorCallback() */</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    hhash-&gt;State= <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="comment">/* Set HASH handle status to error */</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    hhash-&gt;Status = HAL_ERROR;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="preprocessor">#if (USE_HAL_HASH_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    hhash-&gt;ErrorCallback(hhash);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <a class="code" href="group__HASH__Exported__Functions__Group1.html#gaf4f00ac21733c04343c230acce9227db">HAL_HASH_ErrorCallback</a>(hhash);</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_HASH_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="comment">/* After error handling by code user, reset HASH handle HAL status */</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    hhash-&gt;Status = <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1c83f5e68eebaad2703af4ccc4243ca9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c83f5e68eebaad2703af4ccc4243ca9">&#9670;&nbsp;</a></span>HASH_DMAXferCplt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HASH_DMAXferCplt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__dma_8h.html#a41b754a906b86bce54dc79938970138b">DMA_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hdma</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>DMA HASH Input Data transfer completion callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdma</td><td>DMA handle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>In case of HMAC processing, <a class="el" href="group__HASH__Private__Functions.html#ga1c83f5e68eebaad2703af4ccc4243ca9" title="DMA HASH Input Data transfer completion callback.">HASH_DMAXferCplt()</a> initiates the next DMA transfer for the following HMAC step. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l01561">1561</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;{</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <a class="code" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a>* hhash = ( <a class="code" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a>* )((<a class="code" href="struct____DMA__HandleTypeDef.html">DMA_HandleTypeDef</a>* )hdma)-&gt;Parent;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  uint32_t inputaddr;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  uint32_t buffersize;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  HAL_StatusTypeDef status ;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="keywordflow">if</span> (hhash-&gt;State != <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>)</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="comment">/* Disable the DMA transfer */</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga4734c37dd6682d79ce748b9bff126f66">CLEAR_BIT</a>(HASH-&gt;CR, HASH_CR_DMAE);</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keywordflow">if</span> (READ_BIT(HASH-&gt;CR, HASH_CR_MODE) == 0U)</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    {</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <span class="comment">/* If no HMAC processing, input data transfer is now over */</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      <span class="comment">/* Change the HASH state to ready */</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160; </div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <span class="comment">/* Call Input data transfer complete call back */</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="preprocessor">#if (USE_HAL_HASH_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      hhash-&gt;InCpltCallback(hhash);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <a class="code" href="group__HASH__Exported__Functions__Group1.html#gabd466076a4a45634a30e4bf76e1309fb">HAL_HASH_InCpltCallback</a>(hhash);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_HASH_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    }</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    {</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      <span class="comment">/* HMAC processing: depending on the current HMAC step and whether or</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment">      not multi-buffer processing is on-going, the next step is initiated</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">      and MDMAT bit is set.  */</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160; </div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a57feae8364971e1485bdfa943c8ddec1">HAL_HASH_PHASE_HMAC_STEP_3</a>)</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <span class="comment">/* This is the end of HMAC processing */</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <span class="comment">/* Change the HASH state to ready */</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="comment">/* Call Input data transfer complete call back</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment">        (note that the last DMA transfer was that of the key</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="comment">        for the outer HASH operation). */</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="preprocessor">#if (USE_HAL_HASH_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        hhash-&gt;InCpltCallback(hhash);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <a class="code" href="group__HASH__Exported__Functions__Group1.html#gabd466076a4a45634a30e4bf76e1309fb">HAL_HASH_InCpltCallback</a>(hhash);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_HASH_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      }</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf">HAL_HASH_PHASE_HMAC_STEP_1</a>)</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      {</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        inputaddr = (uint32_t)hhash-&gt;pHashMsgBuffPtr;     <span class="comment">/* DMA transfer start address */</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        buffersize = hhash-&gt;HashBuffSize;                 <span class="comment">/* DMA transfer size (in bytes) */</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1">HAL_HASH_PHASE_HMAC_STEP_2</a>;        <span class="comment">/* Move phase from Step 1 to Step 2 */</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160; </div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="comment">/* In case of suspension request, save the new starting parameters */</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        hhash-&gt;HashInCount = hhash-&gt;HashBuffSize;         <span class="comment">/* Initial DMA transfer size (in bytes) */</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        hhash-&gt;pHashInBuffPtr  = hhash-&gt;pHashMsgBuffPtr ; <span class="comment">/* DMA transfer start address           */</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160; </div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        hhash-&gt;NbWordsAlreadyPushed = 0U;                  <span class="comment">/* Reset number of words already pushed */</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="comment">/* Check whether or not digest calculation must be disabled (in case of multi-buffer HMAC processing) */</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <a class="code" href="group__LPUART__LL__EF__Configuration.html#ga3278356e8f771edc00843def4920f76c">if</a> (hhash-&gt;DigestCalculationDisable != RESET)</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        {</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;          <span class="comment">/* Digest calculation is disabled: Step 2 must start with MDMAT bit set,</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="comment">          no digest calculation will be triggered at the end of the input buffer feeding to the Peripheral */</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;          __HAL_HASH_SET_MDMAT();</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      }</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <span class="keywordflow">else</span>  <span class="comment">/*case (hhash-&gt;Phase == HAL_HASH_PHASE_HMAC_STEP_2)*/</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      {</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <span class="keywordflow">if</span> (hhash-&gt;DigestCalculationDisable != RESET)</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        {</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;          <span class="comment">/* No automatic move to Step 3 as a new message buffer will be fed to the Peripheral</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="comment">          (case of multi-buffer HMAC processing):</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="comment">          DCAL must not be set.</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">          Phase remains in Step 2, MDMAT remains set at this point.</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment">          Change the HASH state to ready and call Input data transfer complete call back. */</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;          hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="preprocessor">#if (USE_HAL_HASH_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;          hhash-&gt;InCpltCallback(hhash);</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;          <a class="code" href="group__HASH__Exported__Functions__Group1.html#gabd466076a4a45634a30e4bf76e1309fb">HAL_HASH_InCpltCallback</a>(hhash);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_HASH_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;          <a class="code" href="group__LPUART__LL__EF__Configuration.html#gade2e7de91276a335ce5818ba0bf57da2">return</a> ;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;          <span class="comment">/* Digest calculation is not disabled (case of single buffer input or last buffer</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment">          of multi-buffer HMAC processing) */</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;          inputaddr = (uint32_t)hhash-&gt;Init.pKey;       <span class="comment">/* DMA transfer start address */</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;          buffersize = hhash-&gt;Init.KeySize;             <span class="comment">/* DMA transfer size (in bytes) */</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;          hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a57feae8364971e1485bdfa943c8ddec1">HAL_HASH_PHASE_HMAC_STEP_3</a>;    <span class="comment">/* Move phase from Step 2 to Step 3 */</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;          <span class="comment">/* In case of suspension request, save the new starting parameters */</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;          hhash-&gt;HashInCount = hhash-&gt;Init.KeySize;     <span class="comment">/* Initial size for second DMA transfer (input data) */</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;          hhash-&gt;pHashInBuffPtr  = hhash-&gt;Init.pKey ;   <span class="comment">/* address passed to DMA, now entering data message */</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160; </div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;          hhash-&gt;NbWordsAlreadyPushed = 0U;              <span class="comment">/* Reset number of words already pushed */</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        }</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      }</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160; </div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="comment">/* Configure the Number of valid bits in last word of the message */</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    __HAL_HASH_SET_NBVALIDBITS(buffersize);</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <span class="comment">/* Set the HASH DMA transfert completion call back */</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      hhash-&gt;hdmain-&gt;XferCpltCallback = <a class="code" href="group__HASH__Private__Functions.html#ga1c83f5e68eebaad2703af4ccc4243ca9">HASH_DMAXferCplt</a>;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160; </div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="comment">/* Enable the DMA In DMA Stream */</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    status = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hhash-&gt;hdmain, inputaddr, (uint32_t)&amp;HASH-&gt;DIN, (((buffersize %4U)!=0U) ? ((buffersize+(4U-(buffersize %4U)))/4U):(buffersize/4U)));</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160; </div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="comment">/* Enable DMA requests */</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    SET_BIT(HASH-&gt;CR, HASH_CR_DMAE);</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160; </div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;          <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      <span class="keywordflow">if</span> (status != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      {</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        <span class="comment">/* Update DAC state machine to error */</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a9c10b41e87bb7b763cacb8e38bc4070b">HAL_HASH_STATE_ERROR</a>;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      }</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="comment">/* Change DAC state */</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      }</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  }</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  }</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160; </div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa4e2c57d2a0df411ca64fec87b4bcd9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa4e2c57d2a0df411ca64fec87b4bcd9b">&#9670;&nbsp;</a></span>HASH_Finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HASH_Finish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pOutBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the computed digest. </p>
<dl class="section note"><dt>Note</dt><dd>The API waits for DCIS to be set then reads the computed digest. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">pOutBuffer</td><td>pointer to the computed digest. </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l02969">2969</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;{</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160; </div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <span class="keywordflow">if</span>(hhash-&gt;State == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>)</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  {</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    <span class="comment">/* Check parameter */</span></div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <span class="keywordflow">if</span> (pOutBuffer == NULL)</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    {</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    }</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160; </div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hhash);</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160; </div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    <span class="comment">/* Change the HASH state to busy */</span></div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160; </div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <span class="comment">/* Wait for DCIS flag to be set */</span></div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__HASH__Private__Functions.html#ga2d26771f27ab8873c97479dcc7296b10">HASH_WaitOnFlagUntilTimeout</a>(hhash, HASH_FLAG_DCIS, RESET, Timeout) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    {</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <span class="keywordflow">return</span> HAL_TIMEOUT;</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;    }</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160; </div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    <span class="comment">/* Read the message digest */</span></div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <a class="code" href="group__HASH__Private__Functions.html#ga2e645606af2ada5cc3c9ef7a37f3df5f">HASH_GetDigest</a>(pOutBuffer, HASH_DIGEST_LENGTH());</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160; </div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <span class="comment">/* Change the HASH state to ready */</span></div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160; </div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    <span class="comment">/* Process UnLock */</span></div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160; </div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160; </div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;  }</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  {</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;  }</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160; </div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2e645606af2ada5cc3c9ef7a37f3df5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2e645606af2ada5cc3c9ef7a37f3df5f">&#9670;&nbsp;</a></span>HASH_GetDigest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HASH_GetDigest </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pMsgDigest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the message digest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pMsgDigest</td><td>pointer to the computed digest. </td></tr>
    <tr><td class="paramname">Size</td><td>message digest size in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l01799">1799</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;{</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  uint32_t msgdigest = (uint32_t)pMsgDigest;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="keywordflow">switch</span>(Size)</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="comment">/* Read the message digest */</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="keywordflow">case</span> 16:  <span class="comment">/* MD5 */</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[0]);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      msgdigest+=4U;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[1]);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;      msgdigest+=4U;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[2]);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      msgdigest+=4U;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[3]);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="keywordflow">case</span> 20:  <span class="comment">/* SHA1 */</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[0]);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      msgdigest+=4U;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[1]);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      msgdigest+=4U;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[2]);</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      msgdigest+=4U;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[3]);</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      msgdigest+=4U;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[4]);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="keywordflow">case</span> 28:  <span class="comment">/* SHA224 */</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[0]);</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[1]);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[2]);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[3]);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[4]);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH_DIGEST-&gt;HR[5]);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH_DIGEST-&gt;HR[6]);</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="keywordflow">case</span> 32:   <span class="comment">/* SHA256 */</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[0]);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[1]);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[2]);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[3]);</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH-&gt;HR[4]);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH_DIGEST-&gt;HR[5]);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH_DIGEST-&gt;HR[6]);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    msgdigest+=4U;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    *(uint32_t*)(msgdigest) = __REV(HASH_DIGEST-&gt;HR[7]);</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  }</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa16c48ee23f4d0e7ae103a3ec2e8cb4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa16c48ee23f4d0e7ae103a3ec2e8cb4e">&#9670;&nbsp;</a></span>HASH_IT()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HAL_StatusTypeDef HASH_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>HASH processing in interruption mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="group__HASH__Private__Functions.html#gaa16c48ee23f4d0e7ae103a3ec2e8cb4e" title="HASH processing in interruption mode.">HASH_IT()</a> regularly reads hhash-&gt;SuspendRequest to check whether or not the HASH processing must be suspended. If this is the case, the processing is suspended when possible and the Peripheral feeding point reached at suspension time is stored in the handle for resumption later on. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l01935">1935</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;{</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="keywordflow">if</span> (hhash-&gt;State == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>)</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  {</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="comment">/* ITCounter must not be equal to 0 at this point. Report an error if this is the case. */</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordflow">if</span>(hhash-&gt;HashITCounter == 0U)</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    {</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      <span class="comment">/* Disable Interrupts */</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      __HAL_HASH_DISABLE_IT(HASH_IT_DINI|HASH_IT_DCI);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <span class="comment">/* HASH state set back to Ready to prevent any issue in user code</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">         present in HAL_HASH_ErrorCallback() */</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    }</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hhash-&gt;HashITCounter == 1U)</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    {</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;     <span class="comment">/* This is the first call to HASH_IT, the first input data are about to be</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment">        entered in the Peripheral. A specific processing is carried out at this point to</span></div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="comment">        start-up the processing. */</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      hhash-&gt;HashITCounter = 2U;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    }</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    {</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      <span class="comment">/* Cruise speed reached, HashITCounter remains equal to 3 until the end of</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment">        the HASH processing or the end of the current step for HMAC processing. */</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;      hhash-&gt;HashITCounter = 3U;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    }</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160; </div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="comment">/* If digest is ready */</span></div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <span class="keywordflow">if</span> (__HAL_HASH_GET_FLAG(HASH_FLAG_DCIS))</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      <span class="comment">/* Read the digest */</span></div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <a class="code" href="group__HASH__Private__Functions.html#ga2e645606af2ada5cc3c9ef7a37f3df5f">HASH_GetDigest</a>(hhash-&gt;pHashOutBuffPtr, HASH_DIGEST_LENGTH());</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160; </div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      <span class="comment">/* Disable Interrupts */</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      __HAL_HASH_DISABLE_IT(HASH_IT_DINI|HASH_IT_DCI);</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      <span class="comment">/* Call digest computation complete call back */</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="preprocessor">#if (USE_HAL_HASH_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      hhash-&gt;DgstCpltCallback(hhash);</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <a class="code" href="group__HASH__Exported__Functions__Group1.html#ga5722be2b1d893fded21917cb054cc541">HAL_HASH_DgstCpltCallback</a>(hhash);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_HASH_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160; </div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160; </div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="comment">/* If Peripheral ready to accept new data */</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <span class="keywordflow">if</span> (__HAL_HASH_GET_FLAG(HASH_FLAG_DINIS))</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    {</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;      <span class="comment">/* If the suspension flag has been raised and if the processing is not about</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="comment">         to end, suspend processing */</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <span class="keywordflow">if</span> ( (hhash-&gt;HashInCount != 0U) &amp;&amp;  (hhash-&gt;SuspendRequest == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac921bf63635ada79302844569ffd2187a52352a2032b6796241997597dc1d583d">HAL_HASH_SUSPEND</a>))</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <span class="comment">/* Disable Interrupts */</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        __HAL_HASH_DISABLE_IT(HASH_IT_DINI|HASH_IT_DCI);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160; </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="comment">/* Reset SuspendRequest */</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        hhash-&gt;SuspendRequest = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac921bf63635ada79302844569ffd2187acd41d873585ae1f6ba973dc5f3eb05fe">HAL_HASH_SUSPEND_NONE</a>;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160; </div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>;</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160; </div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;      }</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="comment">/* Enter input data in the Peripheral thru HASH_Write_Block_Data() call and</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;<span class="comment">        check whether the digest calculation has been triggered */</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__HASH__Private__Functions.html#ga18717c6def7b9e0cef0fa23c2d2ceff2">HASH_Write_Block_Data</a>(hhash) == HASH_DIGEST_CALCULATION_STARTED)</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        <span class="comment">/* Call Input data transfer complete call back</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="comment">           (called at the end of each step for HMAC) */</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<span class="preprocessor">#if (USE_HAL_HASH_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        hhash-&gt;InCpltCallback(hhash);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        <a class="code" href="group__HASH__Exported__Functions__Group1.html#gabd466076a4a45634a30e4bf76e1309fb">HAL_HASH_InCpltCallback</a>(hhash);</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_HASH_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160; </div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf">HAL_HASH_PHASE_HMAC_STEP_1</a>)</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        {</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;          <span class="comment">/* Wait until Peripheral is not busy anymore */</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="group__HASH__Private__Functions.html#ga2d26771f27ab8873c97479dcc7296b10">HASH_WaitOnFlagUntilTimeout</a>(hhash, HASH_FLAG_BUSY, SET, HASH_TIMEOUTVALUE) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;          {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            <span class="comment">/* Disable Interrupts */</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            __HAL_HASH_DISABLE_IT(HASH_IT_DINI|HASH_IT_DCI);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;            <span class="keywordflow">return</span> HAL_TIMEOUT;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;          }</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;          <span class="comment">/* Initialization start for HMAC STEP 2 */</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;          hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1">HAL_HASH_PHASE_HMAC_STEP_2</a>;        <span class="comment">/* Move phase from Step 1 to Step 2 */</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;          __HAL_HASH_SET_NBVALIDBITS(hhash-&gt;HashBuffSize);  <span class="comment">/* Set NBLW for the input message */</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;          hhash-&gt;HashInCount = hhash-&gt;HashBuffSize;         <span class="comment">/* Set the input data size (in bytes) */</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;          hhash-&gt;pHashInBuffPtr = hhash-&gt;pHashMsgBuffPtr;   <span class="comment">/* Set the input data address */</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;          hhash-&gt;HashITCounter = 1;                         <span class="comment">/* Set ITCounter to 1 to indicate the start of a new phase */</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;          __HAL_HASH_ENABLE_IT(HASH_IT_DINI);               <span class="comment">/* Enable IT (was disabled in HASH_Write_Block_Data) */</span></div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        }</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1">HAL_HASH_PHASE_HMAC_STEP_2</a>)</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        {</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;          <span class="comment">/* Wait until Peripheral is not busy anymore */</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="group__HASH__Private__Functions.html#ga2d26771f27ab8873c97479dcc7296b10">HASH_WaitOnFlagUntilTimeout</a>(hhash, HASH_FLAG_BUSY, SET, HASH_TIMEOUTVALUE) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;          {</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            <span class="comment">/* Disable Interrupts */</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;            __HAL_HASH_DISABLE_IT(HASH_IT_DINI|HASH_IT_DCI);</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;            <span class="keywordflow">return</span> HAL_TIMEOUT;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;          }</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;          <span class="comment">/* Initialization start for HMAC STEP 3 */</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;          hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a57feae8364971e1485bdfa943c8ddec1">HAL_HASH_PHASE_HMAC_STEP_3</a>;         <span class="comment">/* Move phase from Step 2 to Step 3 */</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;          __HAL_HASH_SET_NBVALIDBITS(hhash-&gt;Init.KeySize);   <span class="comment">/* Set NBLW for the key */</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;          hhash-&gt;HashInCount = hhash-&gt;Init.KeySize;          <span class="comment">/* Set the key size (in bytes) */</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;          hhash-&gt;pHashInBuffPtr = hhash-&gt;Init.pKey;          <span class="comment">/* Set the key address */</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;          hhash-&gt;HashITCounter = 1;                          <span class="comment">/* Set ITCounter to 1 to indicate the start of a new phase */</span></div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;          __HAL_HASH_ENABLE_IT(HASH_IT_DINI);                <span class="comment">/* Enable IT (was disabled in HASH_Write_Block_Data) */</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        }</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;        {</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;          <span class="comment">/* Nothing to do */</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      } <span class="comment">/* if (HASH_Write_Block_Data(hhash) == HASH_DIGEST_CALCULATION_STARTED) */</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    }  <span class="comment">/* if (__HAL_HASH_GET_FLAG(HASH_FLAG_DINIS))*/</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160; </div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  }</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  }</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8aed245a16324ce32bf3bdb7325ab661"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8aed245a16324ce32bf3bdb7325ab661">&#9670;&nbsp;</a></span>HASH_Start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HASH_Start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pInBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pOutBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Algorithm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the HASH peripheral, next process pInBuffer then read the computed digest. </p>
<dl class="section note"><dt>Note</dt><dd>Digest is available in pOutBuffer. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">pInBuffer</td><td>pointer to the input buffer (buffer to be hashed). </td></tr>
    <tr><td class="paramname">Size</td><td>length of the input buffer in bytes. </td></tr>
    <tr><td class="paramname">pOutBuffer</td><td>pointer to the computed digest. </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout value. </td></tr>
    <tr><td class="paramname">Algorithm</td><td>HASH algorithm. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l02341">2341</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;{</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  uint8_t *pInBuffer_tmp;  <span class="comment">/* input data address, input parameter of HASH_WriteData()         */</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  uint32_t Size_tmp; <span class="comment">/* input data size (in bytes), input parameter of HASH_WriteData() */</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188">HAL_HASH_StateTypeDef</a> State_tmp = hhash-&gt;State;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160; </div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160; </div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="comment">/* Initiate HASH processing in case of start or resumption */</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="keywordflow">if</span>((State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>) || (State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>))</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="comment">/* Check input parameters */</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="keywordflow">if</span> ((pInBuffer == NULL) || (Size == 0U) || (pOutBuffer == NULL))</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    {</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    }</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160; </div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hhash);</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160; </div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="comment">/* Check if initialization phase has not been already performed */</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="keywordflow">if</span>(hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a>)</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    {</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160; </div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      <span class="comment">/* Select the HASH algorithm, clear HMAC mode and long key selection bit, reset the HASH processor core */</span></div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_CR_INIT);</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160; </div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      <span class="comment">/* Configure the number of valid bits in last word of the message */</span></div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;      __HAL_HASH_SET_NBVALIDBITS(Size);</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160; </div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <span class="comment">/* pInBuffer_tmp and Size_tmp are initialized to be used afterwards as</span></div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;<span class="comment">      input parameters of HASH_WriteData() */</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      pInBuffer_tmp = pInBuffer;   <span class="comment">/* pInBuffer_tmp is set to the input data address */</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      Size_tmp = Size;             <span class="comment">/* Size_tmp contains the input data size in bytes */</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160; </div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      <span class="comment">/* Set the phase */</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;      hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a88c8f06870a194b274717cc285b56cb2">HAL_HASH_PHASE_PROCESS</a>;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    }</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a88c8f06870a194b274717cc285b56cb2">HAL_HASH_PHASE_PROCESS</a>)</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    {</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      <span class="comment">/* if the Peripheral has already been initialized, two cases are possible */</span></div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      <span class="comment">/* Process resumption time ... */</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      <span class="keywordflow">if</span> (hhash-&gt;State == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>)</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        <span class="comment">/* Since this is resumption, pInBuffer_tmp and Size_tmp are not set</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="comment">        to the API input parameters but to those saved beforehand by HASH_WriteData()</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="comment">        when the processing was suspended */</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        pInBuffer_tmp = hhash-&gt;pHashInBuffPtr;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        Size_tmp = hhash-&gt;HashInCount;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      }</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      <span class="comment">/* ... or multi-buffer HASH processing end */</span></div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      {</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        <span class="comment">/* pInBuffer_tmp and Size_tmp are initialized to be used afterwards as</span></div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<span class="comment">        input parameters of HASH_WriteData() */</span></div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        pInBuffer_tmp = pInBuffer;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        Size_tmp = Size;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        <span class="comment">/* Configure the number of valid bits in last word of the message */</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        __HAL_HASH_SET_NBVALIDBITS(Size);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      }</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    }</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    {</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      <span class="comment">/* Phase error */</span></div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160; </div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160; </div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;      <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    }</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160; </div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160; </div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <span class="comment">/* Write input buffer in Data register */</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    hhash-&gt;Status = <a class="code" href="group__HASH__Private__Functions.html#ga773e202be8d07bb74066061b1686bc24">HASH_WriteData</a>(hhash, pInBuffer_tmp, Size_tmp);</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;Status != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    {</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <span class="keywordflow">return</span> hhash-&gt;Status;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    }</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160; </div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <span class="comment">/* If the process has not been suspended, carry on to digest calculation */</span></div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;State != <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>)</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    {</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      <span class="comment">/* Start the Digest calculation */</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      __HAL_HASH_START_DIGEST();</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160; </div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      <span class="comment">/* Wait for DCIS flag to be set */</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__HASH__Private__Functions.html#ga2d26771f27ab8873c97479dcc7296b10">HASH_WaitOnFlagUntilTimeout</a>(hhash, HASH_FLAG_DCIS, RESET, Timeout) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      {</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        <span class="keywordflow">return</span> HAL_TIMEOUT;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;      }</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160; </div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      <span class="comment">/* Read the message digest */</span></div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      <a class="code" href="group__HASH__Private__Functions.html#ga2e645606af2ada5cc3c9ef7a37f3df5f">HASH_GetDigest</a>(pOutBuffer, HASH_DIGEST_LENGTH());</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160; </div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    }</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160; </div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160; </div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160; </div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;  }</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  {</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;  }</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8311acfb094828b3554c121c46e372c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8311acfb094828b3554c121c46e372c1">&#9670;&nbsp;</a></span>HASH_Start_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HASH_Start_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pInBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Algorithm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the HASH peripheral then initiate a DMA transfer to feed the input buffer to the Peripheral. </p>
<dl class="section note"><dt>Note</dt><dd>If MDMAT bit is set before calling this function (multi-buffer HASH processing case), the input buffer size (in bytes) must be a multiple of 4 otherwise, the HASH digest computation is corrupted. For the processing of the last buffer of the thread, MDMAT bit must be reset and the buffer length (in bytes) doesn't have to be a multiple of 4. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">pInBuffer</td><td>pointer to the input buffer (buffer to be hashed). </td></tr>
    <tr><td class="paramname">Size</td><td>length of the input buffer in bytes. </td></tr>
    <tr><td class="paramname">Algorithm</td><td>HASH algorithm. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l02855">2855</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;{</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  uint32_t inputaddr;</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  uint32_t inputSize;</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  HAL_StatusTypeDef status ;</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;  <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188">HAL_HASH_StateTypeDef</a> State_tmp = hhash-&gt;State;</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160; </div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="preprocessor">#if defined (HASH_CR_MDMAT)</span></div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  <span class="comment">/* Make sure the input buffer size (in bytes) is a multiple of 4 when MDMAT bit is set</span></div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment">     (case of multi-buffer HASH processing) */</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_HASH_DMA_MULTIBUFFER_SIZE(Size));</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MDMA defined*/</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;   <span class="comment">/* If State is ready or suspended, start or resume polling-based HASH processing */</span></div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;<span class="keywordflow">if</span>((State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>) || (State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>))</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;  {</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    <span class="comment">/* Check input parameters */</span></div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="keywordflow">if</span> ( (pInBuffer == NULL ) || (Size == 0U) ||</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;    <span class="comment">/* Check phase coherency. Phase must be</span></div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;<span class="comment">       either READY (fresh start)</span></div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;<span class="comment">       or PROCESS (multi-buffer HASH management) */</span></div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;       ((hhash-&gt;Phase != <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a>) &amp;&amp; (!(IS_HASH_PROCESSING(hhash)))))</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    {</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    }</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160; </div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160; </div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hhash);</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160; </div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <span class="comment">/* If not a resumption case */</span></div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;State == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>)</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    {</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160; </div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      <span class="comment">/* Check if initialization phase has already been performed.</span></div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="comment">         If Phase is already set to HAL_HASH_PHASE_PROCESS, this means the</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="comment">         API is processing a new input data message in case of multi-buffer HASH</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="comment">         computation. */</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;      <span class="keywordflow">if</span>(hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a>)</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      {</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;        <span class="comment">/* Select the HASH algorithm, clear HMAC mode and long key selection bit, reset the HASH processor core */</span></div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_CR_INIT);</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160; </div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;        <span class="comment">/* Set the phase */</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a88c8f06870a194b274717cc285b56cb2">HAL_HASH_PHASE_PROCESS</a>;</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;      }</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160; </div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;      <span class="comment">/* Configure the Number of valid bits in last word of the message */</span></div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;      __HAL_HASH_SET_NBVALIDBITS(Size);</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160; </div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;      inputaddr = (uint32_t)pInBuffer;     <span class="comment">/* DMA transfer start address   */</span></div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      inputSize = Size;                    <span class="comment">/* DMA transfer size (in bytes) */</span></div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160; </div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;      <span class="comment">/* In case of suspension request, save the starting parameters */</span></div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;      hhash-&gt;pHashInBuffPtr =  pInBuffer;  <span class="comment">/* DMA transfer start address   */</span></div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;      hhash-&gt;HashInCount = Size;           <span class="comment">/* DMA transfer size (in bytes) */</span></div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160; </div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    }</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    <span class="comment">/* If resumption case */</span></div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    {</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160; </div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;      <span class="comment">/* Resumption case, inputaddr and inputSize are not set to the API input parameters</span></div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;<span class="comment">         but to those saved beforehand by HAL_HASH_DMAFeed_ProcessSuspend() when the</span></div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;<span class="comment">         processing was suspended */</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;      inputaddr = (uint32_t)hhash-&gt;pHashInBuffPtr;  <span class="comment">/* DMA transfer start address   */</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      inputSize = hhash-&gt;HashInCount;               <span class="comment">/* DMA transfer size (in bytes) */</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160; </div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    }</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160; </div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="comment">/* Set the HASH DMA transfert complete callback */</span></div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    hhash-&gt;hdmain-&gt;XferCpltCallback = <a class="code" href="group__HASH__Private__Functions.html#ga1c83f5e68eebaad2703af4ccc4243ca9">HASH_DMAXferCplt</a>;</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    hhash-&gt;hdmain-&gt;XferErrorCallback = <a class="code" href="group__HASH__Private__Functions.html#gabf56ba2cfed548146deed64cd67bba65">HASH_DMAError</a>;</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160; </div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <span class="comment">/* Store number of words already pushed to manage proper DMA processing suspension */</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    hhash-&gt;NbWordsAlreadyPushed = HASH_NBW_PUSHED();</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160; </div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="comment">/* Enable the DMA In DMA Stream */</span></div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    status = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hhash-&gt;hdmain, inputaddr, (uint32_t)&amp;HASH-&gt;DIN, (((inputSize %4U)!=0U) ? ((inputSize+(4U-(inputSize %4U)))/4U):(inputSize/4U)));</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160; </div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    <span class="comment">/* Enable DMA requests */</span></div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    SET_BIT(HASH-&gt;CR, HASH_CR_DMAE);</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160; </div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    <span class="comment">/* Process Unlock */</span></div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160; </div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    <span class="keywordflow">if</span> (status != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    {</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;      <span class="comment">/* Update HASH state machine to error */</span></div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a9c10b41e87bb7b763cacb8e38bc4070b">HAL_HASH_STATE_ERROR</a>;</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;    }</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160; </div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  }</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  {</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;  }</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gaafebb88589aacaaf93095c0f3463ea5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaafebb88589aacaaf93095c0f3463ea5f">&#9670;&nbsp;</a></span>HASH_Start_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HASH_Start_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pInBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pOutBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Algorithm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the HASH peripheral, next process pInBuffer then read the computed digest in interruption mode. </p>
<dl class="section note"><dt>Note</dt><dd>Digest is available in pOutBuffer. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">pInBuffer</td><td>pointer to the input buffer (buffer to be hashed). </td></tr>
    <tr><td class="paramname">Size</td><td>length of the input buffer in bytes. </td></tr>
    <tr><td class="paramname">pOutBuffer</td><td>pointer to the computed digest. </td></tr>
    <tr><td class="paramname">Algorithm</td><td>HASH algorithm. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l02699">2699</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;{</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;   <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188">HAL_HASH_StateTypeDef</a> State_tmp = hhash-&gt;State;</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;  __IO uint32_t inputaddr = (uint32_t) pInBuffer;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;  uint32_t polling_step = 0U;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  uint32_t initialization_skipped = 0U;</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  uint32_t SizeVar = Size;</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160; </div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;  <span class="comment">/* If State is ready or suspended, start or resume IT-based HASH processing */</span></div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="keywordflow">if</span>((State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>) || (State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>))</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  {</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="comment">/* Check input parameters */</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    <span class="keywordflow">if</span> ((pInBuffer == NULL) || (Size == 0U) || (pOutBuffer == NULL))</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    {</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    }</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160; </div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hhash);</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160; </div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160; </div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="comment">/* Initialize IT counter */</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    hhash-&gt;HashITCounter = 1;</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160; </div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    <span class="comment">/* Check if initialization phase has already be performed */</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <span class="keywordflow">if</span>(hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a>)</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    {</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;      <span class="comment">/* Select the HASH algorithm, clear HMAC mode and long key selection bit, reset the HASH processor core */</span></div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_CR_INIT);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160; </div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;      <span class="comment">/* Configure the number of valid bits in last word of the message */</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;     __HAL_HASH_SET_NBVALIDBITS(SizeVar);</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160; </div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      hhash-&gt;HashInCount = SizeVar;            <span class="comment">/* Counter used to keep track of number of data</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="comment">                                                  to be fed to the Peripheral */</span></div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;      hhash-&gt;pHashInBuffPtr = pInBuffer;       <span class="comment">/* Points at data which will be fed to the Peripheral at</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;<span class="comment">                                                  the next interruption */</span></div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;     <span class="comment">/* In case of suspension, hhash-&gt;HashInCount and hhash-&gt;pHashInBuffPtr contain</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;<span class="comment">        the information describing where the HASH process is stopped.</span></div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;<span class="comment">        These variables are used later on to resume the HASH processing at the</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;<span class="comment">        correct location. */</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160; </div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;      hhash-&gt;pHashOutBuffPtr = pOutBuffer;     <span class="comment">/* Points at the computed digest */</span></div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    }</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    {</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;      initialization_skipped = 1; <span class="comment">/* info user later on in case of multi-buffer */</span></div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    }</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160; </div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="comment">/* Set the phase */</span></div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a88c8f06870a194b274717cc285b56cb2">HAL_HASH_PHASE_PROCESS</a>;</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160; </div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;   <span class="comment">/* If DINIS is equal to 0 (for example if an incomplete block has been previously</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="comment">     fed to the Peripheral), the DINIE interruption won&#39;t be triggered when DINIE is set.</span></div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="comment">     Therefore, first words are manually entered until DINIS raises. */</span></div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <span class="keywordflow">while</span>((!(__HAL_HASH_GET_FLAG(HASH_FLAG_DINIS))) &amp;&amp; (SizeVar &gt; 3U))</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    {</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;      polling_step = 1U; <span class="comment">/* note that some words are entered before enabling the interrupt */</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160; </div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;      <span class="comment">/* Write input data 4 bytes at a time */</span></div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      HASH-&gt;DIN = *(uint32_t*)inputaddr;</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;      inputaddr+=4U;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      SizeVar-=4U;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    }</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160; </div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <span class="keywordflow">if</span> (polling_step == 1U)</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    {</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;      <span class="keywordflow">if</span> (SizeVar == 0U)</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;      {</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        <span class="comment">/* If all the data have been entered at this point, it only remains to</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;<span class="comment">         read the digest */</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        hhash-&gt;pHashOutBuffPtr = pOutBuffer;     <span class="comment">/* Points at the computed digest */</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160; </div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        <span class="comment">/* Start the Digest calculation */</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;         __HAL_HASH_START_DIGEST();</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;        <span class="comment">/* Process Unlock */</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160; </div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;        <span class="comment">/* Enable Interrupts */</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;        __HAL_HASH_ENABLE_IT(HASH_IT_DCI);</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160; </div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;        <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;      }</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (__HAL_HASH_GET_FLAG(HASH_FLAG_DINIS))</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;      {</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;        <span class="comment">/* It remains data to enter and the Peripheral is ready to trigger DINIE,</span></div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;<span class="comment">           carry on as usual.</span></div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;<span class="comment">           Update HashInCount and pHashInBuffPtr accordingly. */</span></div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;        hhash-&gt;HashInCount = SizeVar;</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;        hhash-&gt;pHashInBuffPtr = (uint8_t *)inputaddr;</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        __HAL_HASH_SET_NBVALIDBITS(SizeVar);  <span class="comment">/* Update the configuration of the number of valid bits in last word of the message */</span></div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;        hhash-&gt;pHashOutBuffPtr = pOutBuffer;  <span class="comment">/* Points at the computed digest */</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;        <span class="keywordflow">if</span> (initialization_skipped == 1U)</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;        {</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;          hhash-&gt;HashITCounter = 3; <span class="comment">/* &#39;cruise-speed&#39; reached during a previous buffer processing */</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;        }</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;      }</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;      {</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;        <span class="comment">/* DINIS is not set but it remains a few data to enter (not enough for a full word).</span></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;<span class="comment">           Manually enter the last bytes before enabling DCIE. */</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        __HAL_HASH_SET_NBVALIDBITS(SizeVar);</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;        HASH-&gt;DIN = *(uint32_t*)inputaddr;</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160; </div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;         <span class="comment">/* Start the Digest calculation */</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;        hhash-&gt;pHashOutBuffPtr = pOutBuffer;     <span class="comment">/* Points at the computed digest */</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;         __HAL_HASH_START_DIGEST();</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;        <span class="comment">/* Process Unlock */</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;        <span class="comment">/* Enable Interrupts */</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;        __HAL_HASH_ENABLE_IT(HASH_IT_DCI);</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160; </div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;        <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;      }</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    } <span class="comment">/*  if (polling_step == 1) */</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160; </div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    <span class="comment">/* Process Unlock */</span></div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160; </div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <span class="comment">/* Enable Interrupts */</span></div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    __HAL_HASH_ENABLE_IT(HASH_IT_DINI|HASH_IT_DCI);</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160; </div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;  }</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;  {</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  }</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160; </div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2d26771f27ab8873c97479dcc7296b10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d26771f27ab8873c97479dcc7296b10">&#9670;&nbsp;</a></span>HASH_WaitOnFlagUntilTimeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HAL_StatusTypeDef HASH_WaitOnFlagUntilTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FlagStatus&#160;</td>
          <td class="paramname"><em>Status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle HASH processing Timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">Flag</td><td>specifies the HASH flag to check. </td></tr>
    <tr><td class="paramname">Status</td><td>the Flag status (SET or RESET). </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout duration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l01873">1873</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;{</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  uint32_t tickstart = <a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>();</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160; </div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <span class="comment">/* Wait until flag is set */</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keywordflow">if</span>(Status == RESET)</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  {</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="keywordflow">while</span>(__HAL_HASH_GET_FLAG(Flag) == RESET)</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    {</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="comment">/* Check for the Timeout */</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      <span class="keywordflow">if</span>(Timeout != HAL_MAX_DELAY)</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <span class="keywordflow">if</span>(((<a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>()-tickstart) &gt; Timeout) || (Timeout == 0U))</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        {</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;          <span class="comment">/* Set State to Ready to be able to restart later on */</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;          hhash-&gt;State  = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;          <span class="comment">/* Store time out issue in handle status */</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;          hhash-&gt;Status = HAL_TIMEOUT;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160; </div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;          <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;          <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;          <span class="keywordflow">return</span> HAL_TIMEOUT;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        }</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      }</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    }</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  }</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keywordflow">while</span>(__HAL_HASH_GET_FLAG(Flag) != RESET)</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <span class="comment">/* Check for the Timeout */</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <span class="keywordflow">if</span>(Timeout != HAL_MAX_DELAY)</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      {</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        <span class="keywordflow">if</span>(((<a class="code" href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a>()-tickstart) &gt; Timeout) || (Timeout == 0U))</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        {</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;          <span class="comment">/* Set State to Ready to be able to restart later on */</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;          hhash-&gt;State  = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;          <span class="comment">/* Store time out issue in handle status */</span></div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;          hhash-&gt;Status = HAL_TIMEOUT;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;          <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;          <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160; </div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;          <span class="keywordflow">return</span> HAL_TIMEOUT;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        }</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;      }</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    }</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  }</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga18717c6def7b9e0cef0fa23c2d2ceff2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga18717c6def7b9e0cef0fa23c2d2ceff2">&#9670;&nbsp;</a></span>HASH_Write_Block_Data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t HASH_Write_Block_Data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write a block of data in HASH Peripheral in interruption mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="group__HASH__Private__Functions.html#ga18717c6def7b9e0cef0fa23c2d2ceff2" title="Write a block of data in HASH Peripheral in interruption mode.">HASH_Write_Block_Data()</a> is called under interruption by <a class="el" href="group__HASH__Private__Functions.html#gaa16c48ee23f4d0e7ae103a3ec2e8cb4e" title="HASH processing in interruption mode.">HASH_IT()</a>. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l02072">2072</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;{</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  uint32_t inputaddr;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  uint32_t buffercounter;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  uint32_t inputcounter;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  uint32_t ret = HASH_DIGEST_CALCULATION_NOT_STARTED;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160; </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  <span class="comment">/* If there are more than 64 bytes remaining to be entered */</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <span class="keywordflow">if</span>(hhash-&gt;HashInCount &gt; 64U)</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  {</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    inputaddr = (uint32_t)hhash-&gt;pHashInBuffPtr;</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <span class="comment">/* Write the Input block in the Data IN register</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="comment">      (16 32-bit words, or 64 bytes are entered) */</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <span class="keywordflow">for</span>(buffercounter = 0U; buffercounter &lt; 64U; buffercounter+=4U)</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;      HASH-&gt;DIN = *(uint32_t*)inputaddr;</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      inputaddr+=4U;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    }</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="comment">/* If this is the start of input data entering, an additional word</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="comment">      must be entered to start up the HASH processing */</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="keywordflow">if</span>(hhash-&gt;HashITCounter == 2U)</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    {</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      HASH-&gt;DIN = *(uint32_t*)inputaddr;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      <span class="keywordflow">if</span>(hhash-&gt;HashInCount &gt;= 68U)</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      {</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        <span class="comment">/* There are still data waiting to be entered in the Peripheral.</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="comment">           Decrement buffer counter and set pointer to the proper</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment">           memory location for the next data entering round. */</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        hhash-&gt;HashInCount -= 68U;</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        hhash-&gt;pHashInBuffPtr+= 68U;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      }</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      {</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        <span class="comment">/* All the input buffer has been fed to the HW. */</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        hhash-&gt;HashInCount = 0U;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      }</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    }</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    {</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      <span class="comment">/* 64 bytes have been entered and there are still some remaining:</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="comment">         Decrement buffer counter and set pointer to the proper</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="comment">        memory location for the next data entering round.*/</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      hhash-&gt;HashInCount -= 64U;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      hhash-&gt;pHashInBuffPtr+= 64U;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    }</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  }</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  {</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    <span class="comment">/* 64 or less bytes remain to be entered. This is the last</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<span class="comment">      data entering round. */</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160; </div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="comment">/* Get the buffer address */</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    inputaddr = (uint32_t)hhash-&gt;pHashInBuffPtr;</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <span class="comment">/* Get the buffer counter */</span></div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    inputcounter = hhash-&gt;HashInCount;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <span class="comment">/* Disable Interrupts */</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    __HAL_HASH_DISABLE_IT(HASH_IT_DINI);</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160; </div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="comment">/* Write the Input block in the Data IN register */</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    <span class="keywordflow">for</span>(buffercounter = 0U; buffercounter &lt; ((inputcounter+3U)/4U); buffercounter++)</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    {</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;      HASH-&gt;DIN = *(uint32_t*)inputaddr;</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      inputaddr+=4U;</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    }</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160; </div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;Accumulation == 1U)</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    {</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <span class="comment">/* Field accumulation is set, API only feeds data to the Peripheral and under interruption.</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;<span class="comment">         The digest computation will be started when the last buffer data are entered. */</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160; </div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="comment">/* Reset multi buffers accumulation flag */</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      hhash-&gt;Accumulation = 0U;</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <span class="comment">/* Call Input data transfer complete call back */</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="preprocessor">#if (USE_HAL_HASH_REGISTER_CALLBACKS == 1)</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        hhash-&gt;InCpltCallback(hhash);</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        <a class="code" href="group__HASH__Exported__Functions__Group1.html#gabd466076a4a45634a30e4bf76e1309fb">HAL_HASH_InCpltCallback</a>(hhash);</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_HAL_HASH_REGISTER_CALLBACKS */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    }</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    {</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      <span class="comment">/* Start the Digest calculation */</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      __HAL_HASH_START_DIGEST();</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="comment">/* Return indication that digest calculation has started:</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment">         this return value triggers the call to Input data transfer</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment">         complete call back as well as the proper transition from</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment">         one step to another in HMAC mode. */</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      ret = HASH_DIGEST_CALCULATION_STARTED;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    }</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="comment">/* Reset buffer counter */</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    hhash-&gt;HashInCount = 0;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  }</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160; </div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <span class="comment">/* Return whether or digest calculation has started */</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga773e202be8d07bb74066061b1686bc24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga773e202be8d07bb74066061b1686bc24">&#9670;&nbsp;</a></span>HASH_WriteData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HAL_StatusTypeDef HASH_WriteData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pInBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Feed the input buffer to the HASH Peripheral. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">pInBuffer</td><td>pointer to input buffer. </td></tr>
    <tr><td class="paramname">Size</td><td>the size of input buffer in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="group__HASH__Private__Functions.html#ga773e202be8d07bb74066061b1686bc24" title="Feed the input buffer to the HASH Peripheral.">HASH_WriteData()</a> regularly reads hhash-&gt;SuspendRequest to check whether or not the HASH processing must be suspended. If this is the case, the processing is suspended when possible and the Peripheral feeding point reached at suspension time is stored in the handle for resumption later on. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l01735">1735</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;{</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  uint32_t buffercounter;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  __IO uint32_t inputaddr = (uint32_t) pInBuffer;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160; </div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <span class="keywordflow">for</span>(buffercounter = 0U; buffercounter &lt; Size; buffercounter+=4U)</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="comment">/* Write input data 4 bytes at a time */</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    HASH-&gt;DIN = *(uint32_t*)inputaddr;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    inputaddr+=4U;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; </div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="comment">/* If the suspension flag has been raised and if the processing is not about</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="comment">    to end, suspend processing */</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">if</span> ((hhash-&gt;SuspendRequest == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac921bf63635ada79302844569ffd2187a52352a2032b6796241997597dc1d583d">HAL_HASH_SUSPEND</a>) &amp;&amp; ((buffercounter+4U) &lt; Size))</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      <span class="comment">/* Wait for DINIS = 1, which occurs when 16 32-bit locations are free</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="comment">      in the input buffer */</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;      <span class="keywordflow">if</span> (__HAL_HASH_GET_FLAG(HASH_FLAG_DINIS))</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      {</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <span class="comment">/* Reset SuspendRequest */</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        hhash-&gt;SuspendRequest = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac921bf63635ada79302844569ffd2187acd41d873585ae1f6ba973dc5f3eb05fe">HAL_HASH_SUSPEND_NONE</a>;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160; </div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        <span class="comment">/* Depending whether the key or the input data were fed to the Peripheral, the feeding point</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment">        reached at suspension time is not saved in the same handle fields */</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="keywordflow">if</span> ((hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a88c8f06870a194b274717cc285b56cb2">HAL_HASH_PHASE_PROCESS</a>) || (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1">HAL_HASH_PHASE_HMAC_STEP_2</a>))</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        {</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;          <span class="comment">/* Save current reading and writing locations of Input and Output buffers */</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;          hhash-&gt;pHashInBuffPtr =  (uint8_t *)inputaddr;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;          <span class="comment">/* Save the number of bytes that remain to be processed at this point */</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;          hhash-&gt;HashInCount    =  Size - (buffercounter + 4U);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        }</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf">HAL_HASH_PHASE_HMAC_STEP_1</a>) || (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a57feae8364971e1485bdfa943c8ddec1">HAL_HASH_PHASE_HMAC_STEP_3</a>))</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        {</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;          <span class="comment">/* Save current reading and writing locations of Input and Output buffers */</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;          hhash-&gt;pHashKeyBuffPtr  =  (uint8_t *)inputaddr;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;          <span class="comment">/* Save the number of bytes that remain to be processed at this point */</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;          hhash-&gt;HashKeyCount  =  Size - (buffercounter + 4U);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;          <span class="comment">/* Unexpected phase: unlock process and report error */</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;          hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;          <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;          <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160; </div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="comment">/* Set the HASH state to Suspended and exit to stop entering data */</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      } <span class="comment">/* if (__HAL_HASH_GET_FLAG(HASH_FLAG_DINIS))  */</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    } <span class="comment">/* if ((hhash-&gt;SuspendRequest == HAL_HASH_SUSPEND) &amp;&amp; ((buffercounter+4) &lt; Size)) */</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  }   <span class="comment">/* for(buffercounter = 0; buffercounter &lt; Size; buffercounter+=4)                 */</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160; </div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <span class="comment">/* At this point, all the data have been entered to the Peripheral: exit */</span></div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="keywordflow">return</span>  <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga625f50b7143fd5430f4eab8ce922168e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga625f50b7143fd5430f4eab8ce922168e">&#9670;&nbsp;</a></span>HMAC_Processing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HAL_StatusTypeDef HMAC_Processing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>HMAC processing in polling mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l02177">2177</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;{</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <span class="comment">/* Ensure first that Phase is correct */</span></div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <span class="keywordflow">if</span> ((hhash-&gt;Phase != <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf">HAL_HASH_PHASE_HMAC_STEP_1</a>) &amp;&amp; (hhash-&gt;Phase != <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1">HAL_HASH_PHASE_HMAC_STEP_2</a>) &amp;&amp; (hhash-&gt;Phase != <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a57feae8364971e1485bdfa943c8ddec1">HAL_HASH_PHASE_HMAC_STEP_3</a>))</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  {</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160; </div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="comment">/* Process Unlock */</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  }</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <span class="comment">/* HMAC Step 1 processing */</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf">HAL_HASH_PHASE_HMAC_STEP_1</a>)</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  {</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="comment">    /************************** STEP 1 ******************************************/</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="comment">/* Configure the Number of valid bits in last word of the message */</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    __HAL_HASH_SET_NBVALIDBITS(hhash-&gt;Init.KeySize);</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160; </div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="comment">/* Write input buffer in Data register */</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    hhash-&gt;Status = <a class="code" href="group__HASH__Private__Functions.html#ga773e202be8d07bb74066061b1686bc24">HASH_WriteData</a>(hhash, hhash-&gt;pHashKeyBuffPtr, hhash-&gt;HashKeyCount);</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;Status != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    {</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      <span class="keywordflow">return</span> hhash-&gt;Status;</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    }</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <span class="comment">/* Check whether or not key entering process has been suspended */</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;State == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>)</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    {</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160; </div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="comment">/* Stop right there and return function status */</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    }</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160; </div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="comment">/* No processing suspension at this point: set DCAL bit. */</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    __HAL_HASH_START_DIGEST();</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160; </div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="comment">/* Wait for BUSY flag to be cleared */</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__HASH__Private__Functions.html#ga2d26771f27ab8873c97479dcc7296b10">HASH_WaitOnFlagUntilTimeout</a>(hhash, HASH_FLAG_BUSY, SET, Timeout) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    {</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <span class="keywordflow">return</span> HAL_TIMEOUT;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    }</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160; </div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="comment">/* Move from Step 1 to Step 2 */</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1">HAL_HASH_PHASE_HMAC_STEP_2</a>;</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160; </div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  }</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160; </div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  <span class="comment">/* HMAC Step 2 processing.</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">     After phase check, HMAC_Processing() may</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">     - directly start up from this point in resumption case</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment">       if the same Step 2 processing was suspended previously</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">    - or fall through from the Step 1 processing carried out hereabove */</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;  <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1">HAL_HASH_PHASE_HMAC_STEP_2</a>)</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  {</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="comment">    /************************** STEP 2 ******************************************/</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="comment">/* Configure the Number of valid bits in last word of the message */</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    __HAL_HASH_SET_NBVALIDBITS(hhash-&gt;HashBuffSize);</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160; </div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="comment">/* Write input buffer in Data register */</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    hhash-&gt;Status = <a class="code" href="group__HASH__Private__Functions.html#ga773e202be8d07bb74066061b1686bc24">HASH_WriteData</a>(hhash, hhash-&gt;pHashInBuffPtr, hhash-&gt;HashInCount);</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;Status != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    {</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      <span class="keywordflow">return</span> hhash-&gt;Status;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    }</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160; </div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="comment">/* Check whether or not data entering process has been suspended */</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;State == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>)</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    {</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160; </div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      <span class="comment">/* Stop right there and return function status */</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    }</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160; </div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="comment">/* No processing suspension at this point: set DCAL bit. */</span></div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    __HAL_HASH_START_DIGEST();</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160; </div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="comment">/* Wait for BUSY flag to be cleared */</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__HASH__Private__Functions.html#ga2d26771f27ab8873c97479dcc7296b10">HASH_WaitOnFlagUntilTimeout</a>(hhash, HASH_FLAG_BUSY, SET, Timeout) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    {</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="keywordflow">return</span> HAL_TIMEOUT;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    }</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160; </div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <span class="comment">/* Move from Step 2 to Step 3 */</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a57feae8364971e1485bdfa943c8ddec1">HAL_HASH_PHASE_HMAC_STEP_3</a>;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <span class="comment">/* In case Step 1 phase was suspended then resumed,</span></div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="comment">       set again Key input buffers and size before moving to</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="comment">       next step */</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    hhash-&gt;pHashKeyBuffPtr = hhash-&gt;Init.pKey;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    hhash-&gt;HashKeyCount    = hhash-&gt;Init.KeySize;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  }</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160; </div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160; </div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160; <span class="comment">/* HMAC Step 3 processing.</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="comment">     After phase check, HMAC_Processing() may</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;<span class="comment">     - directly start up from this point in resumption case</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="comment">       if the same Step 3 processing was suspended previously</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="comment">    - or fall through from the Step 2 processing carried out hereabove */</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a57feae8364971e1485bdfa943c8ddec1">HAL_HASH_PHASE_HMAC_STEP_3</a>)</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  {</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="comment">    /************************** STEP 3 ******************************************/</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="comment">/* Configure the Number of valid bits in last word of the message */</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    __HAL_HASH_SET_NBVALIDBITS(hhash-&gt;Init.KeySize);</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160; </div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="comment">/* Write input buffer in Data register */</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    hhash-&gt;Status = <a class="code" href="group__HASH__Private__Functions.html#ga773e202be8d07bb74066061b1686bc24">HASH_WriteData</a>(hhash, hhash-&gt;pHashKeyBuffPtr, hhash-&gt;HashKeyCount);</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;Status != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    {</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      <span class="keywordflow">return</span> hhash-&gt;Status;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    }</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="comment">/* Check whether or not key entering process has been suspended */</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;State == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>)</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;      <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      <span class="comment">/* Stop right there and return function status */</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    }</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160; </div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="comment">/* No processing suspension at this point: start the Digest calculation. */</span></div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    __HAL_HASH_START_DIGEST();</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160; </div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="comment">/* Wait for DCIS flag to be set */</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="group__HASH__Private__Functions.html#ga2d26771f27ab8873c97479dcc7296b10">HASH_WaitOnFlagUntilTimeout</a>(hhash, HASH_FLAG_DCIS, RESET, Timeout) != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    {</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;      <span class="keywordflow">return</span> HAL_TIMEOUT;</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    }</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160; </div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="comment">/* Read the message digest */</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <a class="code" href="group__HASH__Private__Functions.html#ga2e645606af2ada5cc3c9ef7a37f3df5f">HASH_GetDigest</a>(hhash-&gt;pHashOutBuffPtr, HASH_DIGEST_LENGTH());</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  }</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160; </div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;   <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;   hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160; </div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;   <span class="comment">/* Process Unlock */</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;   <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160; </div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6cec06e5eb56b09e0fefe2fc54ffc819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6cec06e5eb56b09e0fefe2fc54ffc819">&#9670;&nbsp;</a></span>HMAC_Start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HMAC_Start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pInBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pOutBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Algorithm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the HASH peripheral in HMAC mode, next process pInBuffer then read the computed digest. </p>
<dl class="section note"><dt>Note</dt><dd>Digest is available in pOutBuffer. </dd>
<dd>
Same key is used for the inner and the outer hash functions; pointer to key and key size are respectively stored in hhash-&gt;Init.pKey and hhash-&gt;Init.KeySize. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">pInBuffer</td><td>pointer to the input buffer (buffer to be hashed). </td></tr>
    <tr><td class="paramname">Size</td><td>length of the input buffer in bytes. </td></tr>
    <tr><td class="paramname">pOutBuffer</td><td>pointer to the computed digest. </td></tr>
    <tr><td class="paramname">Timeout</td><td>Timeout value. </td></tr>
    <tr><td class="paramname">Algorithm</td><td>HASH algorithm. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l03027">3027</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;{</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;    <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188">HAL_HASH_StateTypeDef</a> State_tmp = hhash-&gt;State;</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160; </div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;   <span class="comment">/* If State is ready or suspended, start or resume polling-based HASH processing */</span></div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;<span class="keywordflow">if</span>((State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>) || (State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>))</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;  {</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    <span class="comment">/* Check input parameters */</span></div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    <span class="keywordflow">if</span> ((pInBuffer == NULL) || (Size == 0U) || (hhash-&gt;Init.pKey == NULL) || (hhash-&gt;Init.KeySize == 0U) || (pOutBuffer == NULL))</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    {</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;    }</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160; </div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hhash);</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160; </div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160; </div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    <span class="comment">/* Check if initialization phase has already be performed */</span></div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    <span class="keywordflow">if</span>(hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a>)</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    {</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      <span class="comment">/* Check if key size is larger than 64 bytes, accordingly set LKEY and the other setting bits */</span></div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      <span class="keywordflow">if</span>(hhash-&gt;Init.KeySize &gt; 64U)</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;      {</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_ALGOMODE_HMAC | HASH_HMAC_KEYTYPE_LONGKEY | HASH_CR_INIT);</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;      }</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;      {</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_ALGOMODE_HMAC | HASH_CR_INIT);</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;      }</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;      <span class="comment">/* Set the phase to Step 1 */</span></div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;      hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf">HAL_HASH_PHASE_HMAC_STEP_1</a>;</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;      <span class="comment">/* Resort to hhash internal fields to feed the Peripheral.</span></div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;<span class="comment">         Parameters will be updated in case of suspension to contain the proper</span></div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="comment">         information at resumption time. */</span></div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;      hhash-&gt;pHashOutBuffPtr  = pOutBuffer;            <span class="comment">/* Output digest address                                              */</span></div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;      hhash-&gt;pHashInBuffPtr   = pInBuffer;             <span class="comment">/* Input data address, HMAC_Processing input parameter for Step 2     */</span></div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;      hhash-&gt;HashInCount      = Size;                  <span class="comment">/* Input data size, HMAC_Processing input parameter for Step 2        */</span></div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;      hhash-&gt;HashBuffSize     = Size;                  <span class="comment">/* Store the input buffer size for the whole HMAC process             */</span></div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;      hhash-&gt;pHashKeyBuffPtr  = hhash-&gt;Init.pKey;      <span class="comment">/* Key address, HMAC_Processing input parameter for Step 1 and Step 3 */</span></div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;      hhash-&gt;HashKeyCount     = hhash-&gt;Init.KeySize;   <span class="comment">/* Key size, HMAC_Processing input parameter for Step 1 and Step 3    */</span></div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    }</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160; </div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;    <span class="comment">/* Carry out HMAC processing */</span></div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__HASH__Private__Functions.html#ga625f50b7143fd5430f4eab8ce922168e">HMAC_Processing</a>(hhash, Timeout);</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160; </div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  }</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  {</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  }</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gac92bee79690b39d05bacf362ef1b7c81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac92bee79690b39d05bacf362ef1b7c81">&#9670;&nbsp;</a></span>HMAC_Start_DMA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HMAC_Start_DMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pInBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Algorithm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the HASH peripheral in HMAC mode then initiate the required DMA transfers to feed the key and the input buffer to the Peripheral. </p>
<dl class="section note"><dt>Note</dt><dd>Same key is used for the inner and the outer hash functions; pointer to key and key size are respectively stored in hhash-&gt;Init.pKey and hhash-&gt;Init.KeySize. </dd>
<dd>
In case of multi-buffer HMAC processing, the input buffer size (in bytes) must be a multiple of 4 otherwise, the HASH digest computation is corrupted. Only the length of the last buffer of the thread doesn't have to be a multiple of 4. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">pInBuffer</td><td>pointer to the input buffer (buffer to be hashed). </td></tr>
    <tr><td class="paramname">Size</td><td>length of the input buffer in bytes. </td></tr>
    <tr><td class="paramname">Algorithm</td><td>HASH algorithm. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l03204">3204</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;{</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  uint32_t inputaddr;</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;  uint32_t inputSize;</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;  HAL_StatusTypeDef status ;</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;  <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188">HAL_HASH_StateTypeDef</a> State_tmp = hhash-&gt;State;</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;   <span class="comment">/* Make sure the input buffer size (in bytes) is a multiple of 4 when digest calculation</span></div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;<span class="comment">      is disabled (multi-buffer HMAC processing, MDMAT bit to be set) */</span></div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;   <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a>(IS_HMAC_DMA_MULTIBUFFER_SIZE(hhash, Size));</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  <span class="comment">/* If State is ready or suspended, start or resume DMA-based HASH processing */</span></div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;<span class="keywordflow">if</span>((State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>) || (State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>))</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;  {</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    <span class="comment">/* Check input parameters */</span></div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    <span class="keywordflow">if</span> ((pInBuffer == NULL ) || (Size == 0U) || (hhash-&gt;Init.pKey == NULL ) || (hhash-&gt;Init.KeySize == 0U) ||</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;   <span class="comment">/* Check phase coherency. Phase must be</span></div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;<span class="comment">       either READY (fresh start)</span></div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;<span class="comment">       or one of HMAC PROCESS steps (multi-buffer HASH management) */</span></div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;       ((hhash-&gt;Phase != <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a>) &amp;&amp; (!(IS_HMAC_PROCESSING(hhash)))))</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    {</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;    }</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160; </div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160; </div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hhash);</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160; </div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <span class="comment">/* If not a case of resumption after suspension */</span></div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;State == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>)</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;    {</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    <span class="comment">/* Check whether or not initialization phase has already be performed */</span></div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    <span class="keywordflow">if</span>(hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a>)</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    {</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;      <span class="comment">/* Check if key size is larger than 64 bytes, accordingly set LKEY and the other setting bits.</span></div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;<span class="comment">         At the same time, ensure MDMAT bit is cleared. */</span></div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;      <span class="keywordflow">if</span>(hhash-&gt;Init.KeySize &gt; 64U)</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;      {</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_MDMAT|HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_ALGOMODE_HMAC | HASH_HMAC_KEYTYPE_LONGKEY | HASH_CR_INIT);</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;      }</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;      {</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_MDMAT|HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_ALGOMODE_HMAC | HASH_CR_INIT);</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;      }</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;      <span class="comment">/* Store input aparameters in handle fields to manage steps transition</span></div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;<span class="comment">         or possible HMAC suspension/resumption */</span></div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;      hhash-&gt;HashInCount = hhash-&gt;Init.KeySize;   <span class="comment">/* Initial size for first DMA transfer (key size)      */</span></div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;      hhash-&gt;pHashKeyBuffPtr = hhash-&gt;Init.pKey;  <span class="comment">/* Key address                                         */</span></div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;      hhash-&gt;pHashInBuffPtr  = hhash-&gt;Init.pKey ; <span class="comment">/* First address passed to DMA (key address at Step 1) */</span></div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;      hhash-&gt;pHashMsgBuffPtr = pInBuffer;         <span class="comment">/* Input data address                                  */</span></div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;      hhash-&gt;HashBuffSize = Size;                 <span class="comment">/* input data size (in bytes)                          */</span></div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160; </div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;      <span class="comment">/* Set DMA input parameters */</span></div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;      inputaddr = (uint32_t)(hhash-&gt;Init.pKey);   <span class="comment">/* Address passed to DMA (start by entering Key message) */</span></div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;      inputSize = hhash-&gt;Init.KeySize;            <span class="comment">/* Size for first DMA transfer (in bytes) */</span></div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160; </div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;      <span class="comment">/* Configure the number of valid bits in last word of the key */</span></div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;      __HAL_HASH_SET_NBVALIDBITS(hhash-&gt;Init.KeySize);</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160; </div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;      <span class="comment">/* Set the phase to Step 1 */</span></div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf">HAL_HASH_PHASE_HMAC_STEP_1</a>;</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160; </div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    }</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1">HAL_HASH_PHASE_HMAC_STEP_2</a>)</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    {</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;      <span class="comment">/* Process a new input data message in case of multi-buffer HMAC processing</span></div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;<span class="comment">        (this is not a resumption case) */</span></div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160; </div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160; </div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;      <span class="comment">/* Save input parameters to be able to manage possible suspension/resumption */</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;        hhash-&gt;HashInCount = Size;                <span class="comment">/* Input message address       */</span></div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;        hhash-&gt;pHashInBuffPtr = pInBuffer;        <span class="comment">/* Input message size in bytes */</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160; </div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;      <span class="comment">/* Set DMA input parameters */</span></div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;        inputaddr = (uint32_t)pInBuffer;           <span class="comment">/* Input message address       */</span></div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;        inputSize = Size;                          <span class="comment">/* Input message size in bytes */</span></div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160; </div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      <span class="keywordflow">if</span> (hhash-&gt;DigestCalculationDisable == RESET)</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;      {</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;        <span class="comment">/* This means this is the last buffer of the multi-buffer sequence: DCAL needs to be set. */</span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;       __HAL_HASH_RESET_MDMAT();</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;        __HAL_HASH_SET_NBVALIDBITS(inputSize);</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;      }</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;    }</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;      {</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;        <span class="comment">/* Phase not aligned with handle READY state */</span></div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;        <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      }</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    }</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    {</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;       <span class="comment">/* Resumption case (phase may be Step 1, 2 or 3) */</span></div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160; </div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;      <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160; </div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;      <span class="comment">/* Set DMA input parameters at resumption location;</span></div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;<span class="comment">         inputaddr and inputSize are not set to the API input parameters</span></div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;<span class="comment">         but to those saved beforehand by HAL_HASH_DMAFeed_ProcessSuspend() when the</span></div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;<span class="comment">         processing was suspended. */</span></div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;      inputaddr = (uint32_t)(hhash-&gt;pHashInBuffPtr);  <span class="comment">/* Input message address       */</span></div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;      inputSize = hhash-&gt;HashInCount;                 <span class="comment">/* Input message size in bytes */</span></div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    }</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160; </div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160; </div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    <span class="comment">/* Set the HASH DMA transfert complete callback */</span></div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    hhash-&gt;hdmain-&gt;XferCpltCallback = <a class="code" href="group__HASH__Private__Functions.html#ga1c83f5e68eebaad2703af4ccc4243ca9">HASH_DMAXferCplt</a>;</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    <span class="comment">/* Set the DMA error callback */</span></div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    hhash-&gt;hdmain-&gt;XferErrorCallback = <a class="code" href="group__HASH__Private__Functions.html#gabf56ba2cfed548146deed64cd67bba65">HASH_DMAError</a>;</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160; </div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <span class="comment">/* Store number of words already pushed to manage proper DMA processing suspension */</span></div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;    hhash-&gt;NbWordsAlreadyPushed = HASH_NBW_PUSHED();</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160; </div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;    <span class="comment">/* Enable the DMA In DMA Stream */</span></div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    status = <a class="code" href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a>(hhash-&gt;hdmain, inputaddr, (uint32_t)&amp;HASH-&gt;DIN, (((inputSize %4U)!=0U) ? ((inputSize+(4U-(inputSize %4U)))/4U):(inputSize/4U)));</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;    <span class="comment">/* Enable DMA requests */</span></div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    SET_BIT(HASH-&gt;CR, HASH_CR_DMAE);</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <span class="comment">/* Process Unlocked */</span></div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160; </div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;    <span class="keywordflow">if</span> (status != <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>)</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;    {</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;      <span class="comment">/* Update HASH state machine to error */</span></div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a9c10b41e87bb7b763cacb8e38bc4070b">HAL_HASH_STATE_ERROR</a>;</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;    }</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160; </div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;  }</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;  {</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  }</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gafcdc28a74ed5cc2649816d06f6443bac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafcdc28a74ed5cc2649816d06f6443bac">&#9670;&nbsp;</a></span>HMAC_Start_IT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAL_StatusTypeDef HMAC_Start_IT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a> *&#160;</td>
          <td class="paramname"><em>hhash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pInBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pOutBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>Algorithm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the HASH peripheral in HMAC mode, next process pInBuffer then read the computed digest in interruption mode. </p>
<dl class="section note"><dt>Note</dt><dd>Digest is available in pOutBuffer. </dd>
<dd>
Same key is used for the inner and the outer hash functions; pointer to key and key size are respectively stored in hhash-&gt;Init.pKey and hhash-&gt;Init.KeySize. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hhash</td><td>HASH handle. </td></tr>
    <tr><td class="paramname">pInBuffer</td><td>pointer to the input buffer (buffer to be hashed). </td></tr>
    <tr><td class="paramname">Size</td><td>length of the input buffer in bytes. </td></tr>
    <tr><td class="paramname">pOutBuffer</td><td>pointer to the computed digest. </td></tr>
    <tr><td class="paramname">Algorithm</td><td>HASH algorithm. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stm32l4xx__hal__hash_8c_source.html#l03097">3097</a> of file <a class="el" href="stm32l4xx__hal__hash_8c_source.html">stm32l4xx_hal_hash.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;{</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188">HAL_HASH_StateTypeDef</a> State_tmp = hhash-&gt;State;</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160; </div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;  <span class="comment">/* If State is ready or suspended, start or resume IT-based HASH processing */</span></div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;<span class="keywordflow">if</span>((State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>) || (State_tmp == <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a>))</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  {</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    <span class="comment">/* Check input parameters */</span></div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <span class="keywordflow">if</span> ((pInBuffer == NULL) || (Size == 0U) || (hhash-&gt;Init.pKey == NULL) || (hhash-&gt;Init.KeySize == 0U) || (pOutBuffer == NULL))</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    {</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      <span class="keywordflow">return</span>  HAL_ERROR;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    }</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160; </div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <span class="comment">/* Process Locked */</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a>(hhash);</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160; </div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="comment">/* Change the HASH state */</span></div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a>;</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160; </div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    <span class="comment">/* Initialize IT counter */</span></div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    hhash-&gt;HashITCounter = 1;</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160; </div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    <span class="comment">/* Check if initialization phase has already be performed */</span></div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a>)</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    {</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      <span class="comment">/* Check if key size is larger than 64 bytes, accordingly set LKEY and the other setting bits */</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;      <span class="keywordflow">if</span>(hhash-&gt;Init.KeySize &gt; 64U)</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      {</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_ALGOMODE_HMAC | HASH_HMAC_KEYTYPE_LONGKEY | HASH_CR_INIT);</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;      }</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;      {</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a>(HASH-&gt;CR, HASH_CR_LKEY|HASH_CR_ALGO|HASH_CR_MODE|HASH_CR_INIT, Algorithm | HASH_ALGOMODE_HMAC | HASH_CR_INIT);</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;      }</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160; </div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;      <span class="comment">/* Resort to hhash internal fields hhash-&gt;pHashInBuffPtr and hhash-&gt;HashInCount</span></div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;<span class="comment">         to feed the Peripheral whatever the HMAC step.</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;<span class="comment">         Lines below are set to start HMAC Step 1 processing where key is entered first. */</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      hhash-&gt;HashInCount     = hhash-&gt;Init.KeySize; <span class="comment">/* Key size                      */</span></div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;      hhash-&gt;pHashInBuffPtr  = hhash-&gt;Init.pKey ;   <span class="comment">/* Key address                   */</span></div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160; </div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;      <span class="comment">/* Store input and output parameters in handle fields to manage steps transition</span></div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;<span class="comment">         or possible HMAC suspension/resumption */</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;      hhash-&gt;pHashKeyBuffPtr = hhash-&gt;Init.pKey;    <span class="comment">/* Key address                   */</span></div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;      hhash-&gt;pHashMsgBuffPtr = pInBuffer;           <span class="comment">/* Input message address         */</span></div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;      hhash-&gt;HashBuffSize    = Size;                <span class="comment">/* Input message size (in bytes) */</span></div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;      hhash-&gt;pHashOutBuffPtr = pOutBuffer;          <span class="comment">/* Output digest address         */</span></div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160; </div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;      <span class="comment">/* Configure the number of valid bits in last word of the key */</span></div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;      __HAL_HASH_SET_NBVALIDBITS(hhash-&gt;Init.KeySize);</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160; </div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;      <span class="comment">/* Set the phase to Step 1 */</span></div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;      hhash-&gt;Phase = <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf">HAL_HASH_PHASE_HMAC_STEP_1</a>;</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    }</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf">HAL_HASH_PHASE_HMAC_STEP_1</a>) || (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a57feae8364971e1485bdfa943c8ddec1">HAL_HASH_PHASE_HMAC_STEP_3</a>))</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    {</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;      <span class="comment">/* Restart IT-based HASH processing after Step 1 or Step 3 suspension */</span></div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160; </div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    }</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hhash-&gt;Phase == <a class="code" href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1">HAL_HASH_PHASE_HMAC_STEP_2</a>)</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;    {</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;      <span class="comment">/* Restart IT-based HASH processing after Step 2 suspension */</span></div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160; </div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    }</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    {</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      <span class="comment">/* Error report as phase incorrect */</span></div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;      <span class="comment">/* Process Unlock */</span></div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;      hhash-&gt;State = <a class="code" href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a>;</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;      <span class="keywordflow">return</span> HAL_ERROR;</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    }</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160; </div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    <span class="comment">/* Process Unlock */</span></div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a>(hhash);</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160; </div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    <span class="comment">/* Enable Interrupts */</span></div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    __HAL_HASH_ENABLE_IT(HASH_IT_DINI|HASH_IT_DCI);</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160; </div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <span class="comment">/* Return function status */</span></div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a>;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;  }</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;  {</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    <span class="keywordflow">return</span> HAL_BUSY;</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;  }</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160; </div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__LPUART__LL__EF__Configuration_html_ga3278356e8f771edc00843def4920f76c"><div class="ttname"><a href="group__LPUART__LL__EF__Configuration.html#ga3278356e8f771edc00843def4920f76c">if</a></div><div class="ttdeci">if(lpuartdiv &gt;=LPUART_BRR_MIN_VALUE)</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__ll__lpuart_8h_source.html#l01479">stm32l4xx_ll_lpuart.h:1479</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga4734c37dd6682d79ce748b9bff126f66"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga4734c37dd6682d79ce748b9bff126f66">CLEAR_BIT</a></div><div class="ttdeci">CLEAR_BIT(hrtc-&gt;Instance-&gt;CR, RTC_CR_WUTE)</div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga3feac430acb1b5e74ad139639f3af9ca"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga3feac430acb1b5e74ad139639f3af9ca">__HAL_UNLOCK</a></div><div class="ttdeci">__HAL_UNLOCK(hrtc)</div></div>
<div class="ttc" id="astruct____DMA__HandleTypeDef_html"><div class="ttname"><a href="struct____DMA__HandleTypeDef.html">__DMA_HandleTypeDef</a></div><div class="ttdoc">DMA handle Structure definition.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dma_8h_source.html#l00113">stm32l4xx_hal_dma.h:113</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1ae6a1a18f5638bb63ecb87734bdf2bfd1">HAL_HASH_PHASE_HMAC_STEP_2</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00080">stm32l4xx_hal_hash.h:80</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a5f2520c8f1f6c8f24d5d6d29e4b47726">HAL_HASH_PHASE_READY</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00076">stm32l4xx_hal_hash.h:76</a></div></div>
<div class="ttc" id="agroup__HASH__Exported__Functions__Group1_html_ga5722be2b1d893fded21917cb054cc541"><div class="ttname"><a href="group__HASH__Exported__Functions__Group1.html#ga5722be2b1d893fded21917cb054cc541">HAL_HASH_DgstCpltCallback</a></div><div class="ttdeci">void HAL_HASH_DgstCpltCallback(HASH_HandleTypeDef *hhash)</div><div class="ttdoc">Digest computation complete call back.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8c_source.html#l00508">stm32l4xx_hal_hash.c:508</a></div></div>
<div class="ttc" id="agroup__HASH__Private__Functions_html_ga625f50b7143fd5430f4eab8ce922168e"><div class="ttname"><a href="group__HASH__Private__Functions.html#ga625f50b7143fd5430f4eab8ce922168e">HMAC_Processing</a></div><div class="ttdeci">static HAL_StatusTypeDef HMAC_Processing(HASH_HandleTypeDef *hhash, uint32_t Timeout)</div><div class="ttdoc">HMAC processing in polling mode.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8c_source.html#l02177">stm32l4xx_hal_hash.c:2177</a></div></div>
<div class="ttc" id="agroup__HAL__Exported__Functions__Group2_html_gac9b3a85a73735ac840d0dcb59bc0fdd6"><div class="ttname"><a href="group__HAL__Exported__Functions__Group2.html#gac9b3a85a73735ac840d0dcb59bc0fdd6">HAL_GetTick</a></div><div class="ttdeci">uint32_t HAL_GetTick(void)</div><div class="ttdoc">Provide a tick value in millisecond.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal_8c_source.html#l00337">stm32l4xx_hal.c:337</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_acc6a519440ca624aceed4cfd88ad0188"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188">HAL_HASH_StateTypeDef</a></div><div class="ttdeci">HAL_HASH_StateTypeDef</div><div class="ttdoc">HAL State structures definition.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00061">stm32l4xx_hal_hash.h:61</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a6ea6a6057a42df4a92be707fec58d153">HAL_HASH_STATE_SUSPENDED</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00068">stm32l4xx_hal_hash.h:68</a></div></div>
<div class="ttc" id="agroup__LPUART__LL__EF__Configuration_html_gade2e7de91276a335ce5818ba0bf57da2"><div class="ttname"><a href="group__LPUART__LL__EF__Configuration.html#gade2e7de91276a335ce5818ba0bf57da2">return</a></div><div class="ttdeci">return(brrresult)</div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_ac2c930134f7b12670afa8b22b1c081d1a57feae8364971e1485bdfa943c8ddec1"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a57feae8364971e1485bdfa943c8ddec1">HAL_HASH_PHASE_HMAC_STEP_3</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00082">stm32l4xx_hal_hash.h:82</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a5f4793d7455acc296d1b8577416fe6b0">HAL_HASH_STATE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00065">stm32l4xx_hal_hash.h:65</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_acc6a519440ca624aceed4cfd88ad0188a9c10b41e87bb7b763cacb8e38bc4070b"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a9c10b41e87bb7b763cacb8e38bc4070b">HAL_HASH_STATE_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00067">stm32l4xx_hal_hash.h:67</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga05dcbf41f5c5e42a592e9ad9e351391e"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga05dcbf41f5c5e42a592e9ad9e351391e">HAL_OK</a></div><div class="ttdeci">return HAL_OK</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__rtc__ex_8c_source.html#l00885">stm32l4xx_hal_rtc_ex.c:885</a></div></div>
<div class="ttc" id="agroup__DMA__Exported__Functions__Group2_html_ga7eddc0931ac8a3d77b23d6d5e68407c7"><div class="ttname"><a href="group__DMA__Exported__Functions__Group2.html#ga7eddc0931ac8a3d77b23d6d5e68407c7">HAL_DMA_Start_IT</a></div><div class="ttdeci">HAL_StatusTypeDef HAL_DMA_Start_IT(DMA_HandleTypeDef *hdma, uint32_t SrcAddress, uint32_t DstAddress, uint32_t DataLength)</div><div class="ttdoc">Start the DMA Transfer with interrupt enabled.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__dma_8c_source.html#l00473">stm32l4xx_hal_dma.c:473</a></div></div>
<div class="ttc" id="agroup__HASH__Private__Functions_html_ga2e645606af2ada5cc3c9ef7a37f3df5f"><div class="ttname"><a href="group__HASH__Private__Functions.html#ga2e645606af2ada5cc3c9ef7a37f3df5f">HASH_GetDigest</a></div><div class="ttdeci">static void HASH_GetDigest(uint8_t *pMsgDigest, uint8_t Size)</div><div class="ttdoc">Retrieve the message digest.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8c_source.html#l01799">stm32l4xx_hal_hash.c:1799</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_ac921bf63635ada79302844569ffd2187acd41d873585ae1f6ba973dc5f3eb05fe"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#ac921bf63635ada79302844569ffd2187acd41d873585ae1f6ba973dc5f3eb05fe">HAL_HASH_SUSPEND_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00091">stm32l4xx_hal_hash.h:91</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_ac921bf63635ada79302844569ffd2187a52352a2032b6796241997597dc1d583d"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#ac921bf63635ada79302844569ffd2187a52352a2032b6796241997597dc1d583d">HAL_HASH_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00092">stm32l4xx_hal_hash.h:92</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#acc6a519440ca624aceed4cfd88ad0188a8237e76fcc5a99c243d4f36f9a160ac4">HAL_HASH_STATE_READY</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00064">stm32l4xx_hal_hash.h:64</a></div></div>
<div class="ttc" id="agroup__HASH__Exported__Functions__Group1_html_gaf4f00ac21733c04343c230acce9227db"><div class="ttname"><a href="group__HASH__Exported__Functions__Group1.html#gaf4f00ac21733c04343c230acce9227db">HAL_HASH_ErrorCallback</a></div><div class="ttdeci">void HAL_HASH_ErrorCallback(HASH_HandleTypeDef *hhash)</div><div class="ttdoc">Error callback.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8c_source.html#l00525">stm32l4xx_hal_hash.c:525</a></div></div>
<div class="ttc" id="agroup__HASH__Private__Functions_html_ga1c83f5e68eebaad2703af4ccc4243ca9"><div class="ttname"><a href="group__HASH__Private__Functions.html#ga1c83f5e68eebaad2703af4ccc4243ca9">HASH_DMAXferCplt</a></div><div class="ttdeci">static void HASH_DMAXferCplt(DMA_HandleTypeDef *hdma)</div><div class="ttdoc">DMA HASH Input Data transfer completion callback.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8c_source.html#l01561">stm32l4xx_hal_hash.c:1561</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_gaf0bea6a9989d50f8ffa9b2afc911fc4b"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#gaf0bea6a9989d50f8ffa9b2afc911fc4b">MODIFY_REG</a></div><div class="ttdeci">MODIFY_REG(hrtc-&gt;Instance-&gt;CR, RTC_CR_WUCKSEL,(uint32_t) WakeUpClock)</div></div>
<div class="ttc" id="agroup__HASH__Exported__Functions__Group1_html_gabd466076a4a45634a30e4bf76e1309fb"><div class="ttname"><a href="group__HASH__Exported__Functions__Group1.html#gabd466076a4a45634a30e4bf76e1309fb">HAL_HASH_InCpltCallback</a></div><div class="ttdeci">void HAL_HASH_InCpltCallback(HASH_HandleTypeDef *hhash)</div><div class="ttdoc">Input data transfer complete call back.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8c_source.html#l00491">stm32l4xx_hal_hash.c:491</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_ac2c930134f7b12670afa8b22b1c081d1a88c8f06870a194b274717cc285b56cb2"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a88c8f06870a194b274717cc285b56cb2">HAL_HASH_PHASE_PROCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00077">stm32l4xx_hal_hash.h:77</a></div></div>
<div class="ttc" id="agroup__HASH__Private__Functions_html_ga2d26771f27ab8873c97479dcc7296b10"><div class="ttname"><a href="group__HASH__Private__Functions.html#ga2d26771f27ab8873c97479dcc7296b10">HASH_WaitOnFlagUntilTimeout</a></div><div class="ttdeci">static HAL_StatusTypeDef HASH_WaitOnFlagUntilTimeout(HASH_HandleTypeDef *hhash, uint32_t Flag, FlagStatus Status, uint32_t Timeout)</div><div class="ttdoc">Handle HASH processing Timeout.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8c_source.html#l01873">stm32l4xx_hal_hash.c:1873</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga88b8891e30e4b1c54fecb1235c95870d"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga88b8891e30e4b1c54fecb1235c95870d">__HAL_LOCK</a></div><div class="ttdeci">__HAL_LOCK(hrtc)</div></div>
<div class="ttc" id="agroup__HASH__Private__Functions_html_ga773e202be8d07bb74066061b1686bc24"><div class="ttname"><a href="group__HASH__Private__Functions.html#ga773e202be8d07bb74066061b1686bc24">HASH_WriteData</a></div><div class="ttdeci">static HAL_StatusTypeDef HASH_WriteData(HASH_HandleTypeDef *hhash, uint8_t *pInBuffer, uint32_t Size)</div><div class="ttdoc">Feed the input buffer to the HASH Peripheral.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8c_source.html#l01735">stm32l4xx_hal_hash.c:1735</a></div></div>
<div class="ttc" id="agroup__HASH__Private__Functions_html_gabf56ba2cfed548146deed64cd67bba65"><div class="ttname"><a href="group__HASH__Private__Functions.html#gabf56ba2cfed548146deed64cd67bba65">HASH_DMAError</a></div><div class="ttdeci">static void HASH_DMAError(DMA_HandleTypeDef *hdma)</div><div class="ttdoc">DMA HASH communication error callback.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8c_source.html#l01701">stm32l4xx_hal_hash.c:1701</a></div></div>
<div class="ttc" id="agroup__RTCEx__Exported__Functions__Group2_html_ga2b23ae77e9ce099e35aaa5e9e0daba7b"><div class="ttname"><a href="group__RTCEx__Exported__Functions__Group2.html#ga2b23ae77e9ce099e35aaa5e9e0daba7b">assert_param</a></div><div class="ttdeci">assert_param(IS_RTC_WAKEUP_CLOCK(WakeUpClock))</div></div>
<div class="ttc" id="agroup__HASH__Private__Functions_html_ga18717c6def7b9e0cef0fa23c2d2ceff2"><div class="ttname"><a href="group__HASH__Private__Functions.html#ga18717c6def7b9e0cef0fa23c2d2ceff2">HASH_Write_Block_Data</a></div><div class="ttdeci">static uint32_t HASH_Write_Block_Data(HASH_HandleTypeDef *hhash)</div><div class="ttdoc">Write a block of data in HASH Peripheral in interruption mode.</div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8c_source.html#l02072">stm32l4xx_hal_hash.c:2072</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#ac2c930134f7b12670afa8b22b1c081d1a09118fb5c829cf6d75db6d50d71234cf">HAL_HASH_PHASE_HMAC_STEP_1</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32l4xx__hal__hash_8h_source.html#l00078">stm32l4xx_hal_hash.h:78</a></div></div>
<div class="ttc" id="astm32l4xx__hal__hash_8h_html_ad2ab834787b08b67ae60a4885cb790b0"><div class="ttname"><a href="stm32l4xx__hal__hash_8h.html#ad2ab834787b08b67ae60a4885cb790b0">HASH_HandleTypeDef</a></div><div class="ttdeci">struct __HASH_HandleTypeDef else typedef struct endif HASH_HandleTypeDef</div><div class="ttdoc">HASH Handle Structure definition.</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
